/*!
 * Box Content Preview
 * 
 * Copyright 2017 Box, Inc. All rights reserved.
 * 
 * This product includes software developed by Box, Inc. ("Box")
 * (http://www.box.com)
 * 
 * ALL BOX SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL BOX BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 * See the Box license for the specific language governing permissions
 * and limitations under the license.
 */
!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=146)}([function(e,t,n){"use strict";n.d(t,"S",function(){return i}),n.d(t,"K",function(){return r}),n.d(t,"T",function(){return o}),n.d(t,"e",function(){return a}),n.d(t,"f",function(){return s}),n.d(t,"g",function(){return l}),n.d(t,"h",function(){return u}),n.d(t,"i",function(){return c}),n.d(t,"d",function(){return h}),n.d(t,"j",function(){return d}),n.d(t,"k",function(){return p}),n.d(t,"l",function(){return f}),n.d(t,"o",function(){return v}),n.d(t,"p",function(){return b}),n.d(t,"q",function(){return m}),n.d(t,"r",function(){return g}),n.d(t,"s",function(){return y}),n.d(t,"t",function(){return E}),n.d(t,"u",function(){return w}),n.d(t,"v",function(){return _}),n.d(t,"w",function(){return O}),n.d(t,"x",function(){return k}),n.d(t,"m",function(){return P}),n.d(t,"n",function(){return S}),n.d(t,"E",function(){return L}),n.d(t,"y",function(){return x}),n.d(t,"z",function(){return C}),n.d(t,"A",function(){return j}),n.d(t,"B",function(){return T}),n.d(t,"C",function(){return H}),n.d(t,"D",function(){return A}),n.d(t,"H",function(){return I}),n.d(t,"I",function(){return M}),n.d(t,"J",function(){return R}),n.d(t,"R",function(){return V}),n.d(t,"L",function(){return D}),n.d(t,"P",function(){return B}),n.d(t,"Q",function(){return F}),n.d(t,"N",function(){return z}),n.d(t,"O",function(){return N}),n.d(t,"M",function(){return U}),n.d(t,"G",function(){return W}),n.d(t,"F",function(){return q}),n.d(t,"_17",function(){return G}),n.d(t,"_11",function(){return K}),n.d(t,"_18",function(){return X}),n.d(t,"_19",function(){return Z}),n.d(t,"_26",function(){return Q}),n.d(t,"_27",function(){return J}),n.d(t,"_13",function(){return Y}),n.d(t,"_12",function(){return $}),n.d(t,"_16",function(){return ee}),n.d(t,"_14",function(){return te}),n.d(t,"_15",function(){return ne}),n.d(t,"_20",function(){return ie}),n.d(t,"_21",function(){return re}),n.d(t,"_22",function(){return oe}),n.d(t,"_23",function(){return ae}),n.d(t,"_24",function(){return se}),n.d(t,"_25",function(){return le}),n.d(t,"_6",function(){return ue}),n.d(t,"_7",function(){return ce}),n.d(t,"b",function(){return he}),n.d(t,"c",function(){return de}),n.d(t,"_1",function(){return pe}),n.d(t,"_8",function(){return fe}),n.d(t,"_28",function(){return ve}),n.d(t,"_29",function(){return be}),n.d(t,"_30",function(){return me}),n.d(t,"_31",function(){return ge}),n.d(t,"_34",function(){return ye}),n.d(t,"_35",function(){return Ee}),n.d(t,"_36",function(){return we}),n.d(t,"_37",function(){return _e}),n.d(t,"_38",function(){return Oe}),n.d(t,"_2",function(){return ke}),n.d(t,"_4",function(){return Pe}),n.d(t,"_5",function(){return Se}),n.d(t,"_3",function(){return Le}),n.d(t,"U",function(){return xe}),n.d(t,"Y",function(){return Ce}),n.d(t,"_0",function(){return je}),n.d(t,"_32",function(){return Te}),n.d(t,"_33",function(){return He}),n.d(t,"_9",function(){return Ae}),n.d(t,"W",function(){return Ie}),n.d(t,"X",function(){return Me}),n.d(t,"_10",function(){return Re}),n.d(t,"V",function(){return Ve}),n.d(t,"a",function(){return De}),n.d(t,"Z",function(){return Be});var i="bp-is-navigation-visible",r="bp-is-hidden",o="bp-loaded",a="bp-btn",s="bp-find-bar",l="bp-has-header",u="bp-has-navigation",c="bp-header",h="bp-base-header",d="bp-link",p="bp-menu",f="bp-is-mobile",v="bp-overlay",b="bp-overlay-wrapper",m="bp-preload",g="bp-preload-content",y="bp-preload-overlay",E="bp-preload-spinner",w="bp-document-preload-wrapper",_="bp-presentation-preload-wrapper",O="bp-progress-bar",k="bp-progress-bar-container",P="bp-notification",S="bp-notifications-wrapper",L="bp-toggle-overlay",x="bp-theme-dark",C="bp-thumbnails-close",j="bp-thumbnails-close-active",T="bp-thumbnails-container",H="bp-thumbnails-open",A="bp-thumbnails-open-active",I="bp-has-keyboard-focus",M="bp-is-fullscreen",R="bp-fullscreen-unsupported",V="bp-multi-image-page",D="bp-is-invisible",B="bp-is-transparent",F="bp-is-visible",z="bp-is-scrollable",N="bp-is-selectable",U="bp-is-buffering",W="bp-dark",q="bp-crawler",G=".bp-container",K=".bp",X=".bp-content",Z=".bp-crawler-wrapper",Q=".bp-navigate-left",J=".bp-navigate-right",Y=".bp-btn-annotate-point",$=".bp-btn-annotate-draw",ee=".bp-btn-print",te=".bp-btn-download",ne=".bp-btn-loading-download",ie=".bp-header-container",re=".bp-icon",oe=".bp-loading-text",ae=".bp-loading-wrapper",se=".bp-custom-logo",le=".bp-default-logo",ue="can_download",ce="can_preview",he="https://api.box.com",de="https://app.box.com",pe="ORIGINAL",fe="jpg",ve="none",be="pending",me="success",ge="viewable",ye="[3d][pdf][text][mp3]",Ee="[jpg?dimensions=1024x1024&paged=false]",we="[jpg?dimensions=2048x2048,png?dimensions=2048x2048]",_e="[dash,mp4][filmstrip]",Oe="[mp4]",ke=96/72,Pe=1.25,Se=40,Le=5,xe="1.60.0",Ce="1.33.0",je="1.12.0",Te="0.112.0",He="0.114.0",Ae="preview.js",Ie="fileVersionId",Me="startAt",Re="encoding",Ve={GZIP:"gzip"},De={modeEnter:"annotationmodeenter",modeExit:"annotationmodeexit",fetch:"annotationsfetched",error:"annotationerror",scale:"scaleannotations"},Be={FIELD_HASXREFS:"hasxrefs",SCOPE_GLOBAL:"global",TEMPLATE_AUTOCAD:"autocad"}},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(){var e=document.querySelector("#downloadiframe");return e||(e=document.createElement("iframe"),e.setAttribute("id","downloadiframe"),e.style.display="none",e=document.body.appendChild(e)),e.src="about:blank",e}function o(e){var t=r();return t.src=e,t}function a(e){var t=r();return t.contentDocument&&(t.contentDocument.write(e),t.contentDocument.close()),t}function s(e,t){var n=document.createRange();return n.selectNode(e),n.createContextualFragment(t.replace(/>\s*</g,"><"))}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.insertBefore(s(e,t),n)}function u(e){var t=document.createElement("script");return t.src=e,t.async=!1,t}function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("link");return n.rel=t?"preload":"prefetch",n.href=e,t&&(n.as=-1!==e.indexOf(".js")?"script":"style"),n}function h(e){var t=document.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=e,t}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return t&&(e.Authorization="Bearer "+t),n&&(e.BoxApi="shared_link="+n,i&&(e.BoxApi=e.BoxApi+"&shared_link_password="+i)),Y&&(e[X]=Y),$&&(e[Z]=$),e}function p(e,t){if(!t)return e;var n=new z.a(e);return Object.keys(t).forEach(function(e){var i=t[e];i&&(n.hasQueryParam(e)?n.replaceQueryParam(e,i):n.addQueryParam(e,i))}),n.toString()}function f(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return n||r?p(e,(t={access_token:n,shared_link:r,shared_link_password:o},i(t,Q,Y),i(t,J,$),t)):e}function v(e,t){return W.a.isDownloadHostBlocked()&&(e=W.a.replaceDownloadHostWithDefault(e)),e.replace("{+asset_path}",t||"")}function b(e){var t=e.baseURI,n=e.staticBaseURI;return function(e){return 0===e.indexOf("http")?e:0===e.indexOf("third-party")?n+e:t+e}}function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document,i=n.head,r=t?"preload":"prefetch";e.forEach(function(e){i.querySelector('link[rel="'+r+'"][href="'+e+'"]')||i.appendChild(c(e,t))})}function g(e){var t=document,n=t.head;e.forEach(function(e){n.querySelector('link[rel="stylesheet"][href="'+e+'"]')||n.appendChild(h(e))})}function y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=document,r=i.head,o=[],a=!!window.define&&"function"==typeof define&&!!n(247),s=a?define:void 0;return t&&a&&(define=void 0),e.forEach(function(e){if(!r.querySelector('script[src="'+e+'"]')){var t=u(e);o.push(new Promise(function(e,n){t.addEventListener("load",e),t.addEventListener("error",n)})),r.appendChild(t)}}),Promise.all(o).then(function(){t&&a&&(define=s)}).catch(function(){t&&a&&(define=s)})}function E(e){return Object(N.a)(e)}function w(e,t){var n=document.querySelector('script[src*="/'+e+'"]')||{},i=t?t.src:n.src;if(!i||-1===i.indexOf(e)&&-1===i.indexOf("__tests__"))throw new Error("Missing or malformed "+e+" library");var r=document.createElement("a");r.href=i;var o=r.pathname,a=o.split("/"),s=a.length,l=a[s-1],u=a[s-2],c=a[s-3],h=r.search,d=r.href.replace(l,"").replace(h,""),p=d.replace(c+"/"+u+"/","");return{origin:r.origin,host:r.host,hostname:r.hostname,search:h,protocol:r.protocol,port:r.port,href:r.href,pathname:o,locale:u,version:c,baseURI:d,staticBaseURI:p}}function _(e,t){var n=/\{\d+\}/g;return e&&e.length?e.replace(n,function(e){var n=parseInt(e.replace(/^\D+/g,""),10)-1;return t[n]?t[n]:e}):e}function O(e){return e.name.slice(0,e.name.lastIndexOf(".")).endsWith(".360")}function k(e,t,n){e.style.width=t+"px",e.style.height=n+"px"}function P(e){return function(t){if("click"===t.type)e(t);else if("keydown"===t.type){var n=E(t);"Space"!==n&&"Enter"!==n||(e(t),t.preventDefault(),t.stopPropagation())}}}function S(e,t){e.addEventListener("click",t),e.addEventListener("keydown",t)}function L(e,t){e.removeEventListener("click",t),e.removeEventListener("keydown",t)}function x(e,t,n,i){var r=e,o=i.scrollTop,a=i.scrollTop+i.offsetHeight,s=n.offsetTop+n.clientHeight/2;return o>t?r=o>s?e+1:e:o<t&&(r=a<s?e-1:e),r}function C(e,t,n,i){return[(e+n)/2,(t+i)/2]}function j(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))}function T(e,t,n){if(!n||!n.first||!n.last)return null;for(var i=null,r=n.first.id,o=null;r<=n.last.id;r++){var a=document.querySelector("#bp-page-"+r),s=C(a.offsetLeft,a.offsetTop,a.offsetLeft+a.scrollWidth,a.offsetTop+a.scrollHeight),l=j(s[0],s[1],e,t);(!i||l<o)&&(i=a,o=l)}return i}function H(e){return"string"!=typeof e?e:e.replace(/access_token=([^&]*)/,"access_token=[FILTERED]")}function A(e,t,n){for(var i=e,r=t.split("."),o=0;o<r.length;o++){if(null==i)return n;i=i[r[o]]}return void 0!==i?i:n}function I(e){return/^\d+$/.test(e)}function M(){return/(app|ent)\.(box\.com|boxcn\.net|boxenterprise\.net)/.test(q.a.getHostname())}function R(e){var t="";return"all"===e?t="only_watermarked":"none"===e&&(t="only_non_watermarked"),t}function V(){try{var e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}function D(e){if(202===A(e,"status")){var t=new G.a(K.c.DELETED_REPS,"We're sorry, the preview didn't load. Please refresh the page.",{isRepDeleted:!0});return Promise.reject(t)}return Promise.resolve(e)}function B(e){return U.a.get(e,{type:"blob"}).then(D)}n.d(t,"a",function(){return $}),t.z=o,t.y=a,t.i=s,t.s=l,t.j=h,t.p=d,t.e=p,t.d=f,t.h=v,t.g=b,t.B=m,t.x=g,t.w=y,t.k=E,t.m=w,t.D=_,t.E=O,t.F=k,t.b=P,t.c=S,t.C=L,t.A=x,t.q=C,t.o=j,t.n=T,t.G=H,t.r=A,t.v=I,t.t=M,t.f=R,t.u=V,t.l=B;var F=n(245),z=n.n(F),N=n(246),U=n(9),W=n(65),q=n(112),G=n(8),K=n(2),X="X-Box-Client-Name",Z="X-Box-Client-Version",Q="box_client_name",J="box_client_version",Y="box-content-preview",$="2.12.0"},function(e,t,n){"use strict";n.d(t,"l",function(){return i}),n.d(t,"c",function(){return r}),n.d(t,"h",function(){return o}),n.d(t,"i",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"g",function(){return u}),n.d(t,"f",function(){return c}),n.d(t,"a",function(){return h}),n.d(t,"j",function(){return d}),n.d(t,"k",function(){return p}),n.d(t,"e",function(){return f});var i={download:"download",reload:"reload",load:"load",progressStart:"progressstart",progressEnd:"progressend",notificationShow:"notificationshow",notificationHide:"notificationhide",mediaEndAutoplay:"mediaendautoplay",error:"error",default:"viewerevent",metric:"viewermetric",thumbnailsClose:"thumbnailsClose",thumbnailsOpen:"thumbnailsOpen"},r={ACCOUNT:"error_account",UNSUPPORTED_FILE_TYPE:"error_unsupported_file_type",PERMISSIONS_PREVIEW:"error_permissions_preview",BAD_INPUT:"error_bad_input",DELETED_REPS:"error_deleted_reps",LOAD_ANNOTATIONS:"error_load_annotations",LOAD_ASSET:"error_load_asset",LOAD_CSV:"error_load_csv",LOAD_DOCUMENT:"error_load_document",LOAD_MEDIA:"error_load_media",LOAD_VIEWER:"error_load_viewer",IMAGE_SIZING:"error_image_sizing",SHAKA:"error_shaka",INVALID_CACHE_ATTEMPT:"error_invalid_file_for_cache",PREFETCH_FILE:"error_prefetch_file",RATE_LIMIT:"error_rate_limit",EXCEEDED_RETRY_LIMIT:"error_exceeded_retry_limit",BROWSER_GENERIC:"error_browser_generic",BROWSER_UNSUPPORTED:"error_browser_unsupported",NOT_DOWNLOADABLE:"error_file_not_downloadable",GENERIC:"error_generic",CONVERSION_GENERIC:"error_conversion_generic",CONVERSION_PASSWORD_PROTECTED:"error_password_protected",CONVERSION_TRY_AGAIN_LATER:"error_try_again_later",CONVERSION_UNSUPPORTED_FORMAT:"error_unsupported_format",VIEWER_LOAD_TIMEOUT:"error_viewer_load_timeout",CONTENT_DOWNLOAD:"error_content_download",FLASH_NOT_ENABLED:"error_flash_not_enabled"},o="preview_error",a="preview_metric",s={previewLoadEvent:"load",previewPreloadEvent:"preload",fileInfoTime:"file_info_time",convertTime:"convert_time",downloadResponseTime:"download_response_time",contentLoadTime:"full_document_load_time",preloadTime:"preload_time",previewLoadTime:"preview_loading"},l="preview_duration_metric",u="preview_end",c="preview_download_attempt",h={NOTIFICATION_SHOWN:"dl_reachability_notification_shown",DOWNLOAD_BLOCKED:"dl_reachability_host_blocked"},d={NEXT:"user_document_find_next",OPEN:"user_document_find_open",PREVIOUS:"user_document_find_previous"},p={CLOSE:"user_document_thumbnails_close",NAVIGATE:"user_document_thumbnails_navigate",OPEN:"user_document_thumbnails_open"},f="missing_x_refs"},,,function(e,t,n){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=navigator,o=r.userAgent,a=void 0,s=void 0,l=void 0,u=function(){function t(){n(this,t)}return i(t,null,[{key:"overrideUserAgent",value:function(e){o=e,a=null}},{key:"getName",value:function(){return a||(o.indexOf("Edge/")>0?a="Edge":o.indexOf("OPR/")>0||o.indexOf("Opera/")>0?a="Opera":o.indexOf("Chrome/")>0?a="Chrome":o.indexOf("Safari/")>0?a="Safari":o.indexOf("Trident/")>0?a="Explorer":o.indexOf("Firefox/")>0&&(a="Firefox"),a)}},{key:"canPlayType",value:function(e,t){var n=void 0;if(0===e.indexOf("audio/"))n=document.createElement("audio");else{if(0!==e.indexOf("video/"))return!1;n=document.createElement("video")}return!(!n.canPlayType||n.canPlayType(e).replace(/^no$/,"")!==t)}},{key:"canPlayH264",value:function(e){return t.canPlayType(e,"maybe")||t.canPlayType(e,"probably")}},{key:"canPlayH264Baseline",value:function(){return t.canPlayH264('video/mp4; codecs="avc1.42E01E"')}},{key:"canPlayH264Main",value:function(){return t.canPlayH264('video/mp4; codecs="avc1.4D401E"')}},{key:"canPlayH264High",value:function(){return t.canPlayH264('video/mp4; codecs="avc1.64001E"')}},{key:"canPlayMP3",value:function(){return t.canPlayType("audio/mpeg","maybe")||t.canPlayType("audio/mpeg","probably")}},{key:"canPlayDash",value:function(){var n=e.MediaSource,i=!1;return n&&(i="function"==typeof n.isTypeSupported?n.isTypeSupported('video/mp4; codecs="avc1.64001E"'):t.canPlayH264High()),i}},{key:"hasMSE",value:function(){return!!e.MediaSource}},{key:"hasWebGL",value:function(){if(!s){var e=document.createElement("canvas");e.addEventListener("webglcontextlost",function(e){e.preventDefault(),e.stopPropagation()});try{s=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}l=null!==s&&void 0!==s}return l}},{key:"clearGLContext",value:function(){if(s){var e=s.getExtension("WEBGL_lose_context");e&&"function"==typeof e.loseContext&&e.loseContext(),s=null}}},{key:"supportsModel3D",value:function(){return!!t.hasWebGL()&&!!s.getExtension("OES_standard_derivatives")}},{key:"hasFlash",value:function(){var t=!1;try{t=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(n){t=void 0!==e.navigator.mimeTypes["application/x-shockwave-flash"]}return t}},{key:"hasSVG",value:function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}},{key:"hasTouch",value:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}},{key:"isMobile",value:function(){return/iphone|ipad|ipod|android|blackberry|bb10|mini|windows\sce|palm/i.test(o)}},{key:"canDownload",value:function(){return!t.isMobile()||!window.externalHost&&"download"in document.createElement("a")}},{key:"isIOS",value:function(){return/(iPad|iPhone|iPod)/g.test(o)}},{key:"isAndroid",value:function(){return/Android/g.test(o)}},{key:"isMac",value:function(){return/Macintosh; Intel Mac OS X/g.test(o)}},{key:"hasFontIssue",value:function(){return t.isIOS()&&/(?:OS\s)10_3/i.test(o)||t.isMac()&&"Safari"===t.getName()}},{key:"getBrowserInfo",value:function(){return{name:t.getName(),swf:t.hasFlash(),svg:t.hasSVG(),mse:t.hasMSE(),mp3:t.canPlayMP3(),dash:t.canPlayDash(),h264:{baseline:t.canPlayH264Baseline(),main:t.canPlayH264Main(),high:t.canPlayH264High()}}}}]),t}();t.a=u}).call(t,n(16))},function(e,t,n){"use strict";function i(e){var t=mt[e];return bt[t]}function r(e){return bt[e]}n.d(t,"h",function(){return Ke}),n.d(t,"i",function(){return Xe}),n.d(t,"l",function(){return Ze}),n.d(t,"m",function(){return Qe}),n.d(t,"s",function(){return Je}),n.d(t,"v",function(){return Ye}),n.d(t,"w",function(){return $e}),n.d(t,"d",function(){return et}),n.d(t,"e",function(){return tt}),n.d(t,"f",function(){return nt}),n.d(t,"n",function(){return it}),n.d(t,"c",function(){return rt}),n.d(t,"o",function(){return ot}),n.d(t,"p",function(){return at}),n.d(t,"q",function(){return st}),n.d(t,"a",function(){return lt}),n.d(t,"b",function(){return ut}),n.d(t,"j",function(){return ct}),n.d(t,"k",function(){return ht}),n.d(t,"g",function(){return dt}),n.d(t,"t",function(){return pt}),n.d(t,"r",function(){return ft}),n.d(t,"u",function(){return vt}),t.x=i,t.y=r;var o=n(248),a=n.n(o),s=n(249),l=n.n(s),u=n(250),c=n.n(u),h=n(251),d=n.n(h),p=n(252),f=n.n(p),v=n(253),b=n.n(v),m=n(254),g=n.n(m),y=n(255),E=n.n(y),w=n(256),_=n.n(w),O=n(257),k=n.n(O),P=n(258),S=n.n(P),L=n(259),x=n.n(L),C=n(260),j=n.n(C),T=n(261),H=n.n(T),A=n(262),I=n.n(A),M=n(263),R=n.n(M),V=n(264),D=n.n(V),B=n(265),F=n.n(B),z=n(266),N=n.n(z),U=n(267),W=n.n(U),q=n(268),G=n.n(q),K=n(269),X=n.n(K),Z=n(270),Q=n.n(Z),J=n(271),Y=n.n(J),$=n(272),ee=n.n($),te=n(273),ne=n.n(te),ie=n(274),re=n.n(ie),oe=n(275),ae=n.n(oe),se=n(276),le=n.n(se),ue=n(277),ce=n.n(ue),he=n(278),de=n.n(he),pe=n(279),fe=n.n(pe),ve=n(280),be=n.n(ve),me=n(281),ge=n.n(me),ye=n(282),Ee=n.n(ye),we=n(283),_e=n.n(we),Oe=n(284),ke=n.n(Oe),Pe=n(285),Se=n.n(Pe),Le=n(286),xe=n.n(Le),Ce=n(287),je=n.n(Ce),Te=n(288),He=n.n(Te),Ae=n(289),Ie=n.n(Ae),Me=n(290),Re=n.n(Me),Ve=n(291),De=n.n(Ve),Be=n(292),Fe=n.n(Be),ze=n(293),Ne=n.n(ze),Ue=n(294),We=n.n(Ue),qe=n(295),Ge=n.n(qe),Ke=a.a,Xe=l.a,Ze=(c.a,d.a),Qe=f.a,Je=b.a,Ye=g.a,$e=E.a,et=_.a,tt=k.a,nt=S.a,it=x.a,rt=ke.a,ot=Se.a,at=xe.a,st=je.a,lt=He.a,ut=Ie.a,ct=Re.a,ht=De.a,dt=Fe.a,pt=Ne.a,ft=We.a,vt=Ge.a,bt={FILE_AUDIO:j.a,FILE_AUTOCAD:H.a,FILE_BOX_NOTE:I.a,FILE_CODE:R.a,FILE_DEFAULT:F.a,FILE_DICOM:D.a,FILE_DOCUMENT:N.a,FILE_EXCEL:W.a,FILE_GOOGLE_DOC:G.a,FILE_GOOGLE_SHEET:X.a,FILE_GOOGLE_SLIDE:Q.a,FILE_ILLUSTRATOR:Y.a,FILE_IMAGE:ee.a,FILE_KEYNOTE:ne.a,FILE_MEDIA:re.a,FILE_NUMBERS:ae.a,FILE_OBJ:le.a,FILE_PAGES:ce.a,FILE_PDF:de.a,FILE_POWERPOINT:fe.a,FILE_PRESENTATION:be.a,FILE_SPREADSHEET:ge.a,FILE_WORD:Ee.a,FILE_ZIP:_e.a},mt={};["aac","aif","aifc","aiff","amr","au","flac","m4a","mp3","ra","wav","wma"].forEach(function(e){mt[e]="FILE_AUDIO"}),["boxnote"].forEach(function(e){mt[e]="FILE_BOX_NOTE"}),["as","as3","asm","bat","c","cc","cmake","cpp","cs","css","cxx","diff","erb","groovy","h","haml","hh","htm","html","java","js","json","less","m","make","md","ml","mm","php","pl","plist","properties","py","rb","rst","sass","scala","script","scm","sml","sql","sh","vi","vim","webdoc","xml","xsd","xsl","yaml"].forEach(function(e){mt[e]="FILE_CODE"}),["xls","xlsm","xlsx"].forEach(function(e){mt[e]="FILE_EXCEL"}),["log","msg","ods","rtf","txt","wpd"].forEach(function(e){mt[e]="FILE_DOCUMENT"}),["gdoc"].forEach(function(e){mt[e]="FILE_GOOGLE_DOC"}),["gsheet"].forEach(function(e){mt[e]="FILE_GOOGLE_SHEET"}),["gslide"].forEach(function(e){mt[e]="FILE_GOOGLE_SLIDE"}),["ai","bmp","dcm","eps","gif","heic","jpg","jpeg","png","ps","psd","svg","svs","swf","tga","tif","tiff"].forEach(function(e){mt[e]="FILE_IMAGE"}),["key"].forEach(function(e){mt[e]="FILE_KEYNOTE"}),["3g2","3gp","avi","flv","m2v","m2ts","m4v","mkv","mov","mp4","mpeg","mpg","mts","ogg","qt","ts","wmv"].forEach(function(e){mt[e]="FILE_MEDIA"}),["numbers"].forEach(function(e){mt[e]="FILE_NUMBERS"}),["3ds","box3d","dae","fbx","obj","ply","stl"].forEach(function(e){mt[e]="FILE_OBJ"}),["pages"].forEach(function(e){mt[e]="FILE_PAGES"}),["pdf"].forEach(function(e){mt[e]="FILE_PDF"}),["ppt","pptx"].forEach(function(e){mt[e]="FILE_POWERPOINT"}),["odp"].forEach(function(e){mt[e]="FILE_PRESENTATION"}),["csv","tsv"].forEach(function(e){mt[e]="FILE_SPREADSHEET"}),["doc","docx"].forEach(function(e){mt[e]="FILE_WORD"}),["tgz","zip"].forEach(function(e){mt[e]="FILE_ZIP"}),["dwg"].forEach(function(e){mt[e]="FILE_AUTOCAD"})},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),r=u.length,l=0;l<r;l++)u[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.trace),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(e){function t(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,t);for(var s=arguments.length,l=Array(s>3?s-3:0),u=3;u<s;u++)l[u-3]=arguments[u];var c=r(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(l)));return c.constructor=t,c.__proto__=t.prototype,Error.captureStackTrace&&Error.captureStackTrace(c,t),c.code=e,c.details=a,c.displayMessage=o||"We're sorry, the preview didn't load.",c.message=c.message||c.displayMessage,c}return o(t,e),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));t.a=a},function(e,t,n){"use strict";function i(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}var r=n(222),o=n.n(r),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s={filterOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return Object.keys(e).forEach(function(n){void 0!==e[n]&&null!==e[n]&&""!==e[n]&&(t[n]=e[n])}),t},handleError:function(e){var t=e.response;if(t){var n=new Error(t.statusText);throw n.response=t,n}},parseResponse:function(e){return 204===e.status||202===e.status?e:e.data},transformTextResponse:function(e){return e},xhr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0;return"text"===t.responseType&&(n=s.transformTextResponse),o()(e,s.filterOptions(a({transformResponse:n},t))).then(s.parseResponse).catch(s.handleError)},get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=void 0===n?"json":n,o=i(t,["type"]);return s.xhr(e,a({method:"get",responseType:r},o))},head:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.xhr(e,a({method:"head"},t))},post:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.xhr(e,a({method:"post",data:t},n))},delete:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.xhr(e,a({method:"delete",data:t},n))},put:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s.xhr(e,a({method:"put",data:t},n))}};t.a=s},function(e,t,n){"use strict";function i(e){return"[object Array]"===P.call(e)}function r(e){return"[object ArrayBuffer]"===P.call(e)}function o(e){return"undefined"!=typeof FormData&&e instanceof FormData}function a(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"==typeof e}function l(e){return"number"==typeof e}function u(e){return void 0===e}function c(e){return null!==e&&"object"==typeof e}function h(e){return"[object Date]"===P.call(e)}function d(e){return"[object File]"===P.call(e)}function p(e){return"[object Blob]"===P.call(e)}function f(e){return"[object Function]"===P.call(e)}function v(e){return c(e)&&f(e.pipe)}function b(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function m(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function g(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function y(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function E(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=E(t[n],e):t[n]=e}for(var t={},n=0,i=arguments.length;n<i;n++)y(arguments[n],e);return t}function w(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=w(t[n],e):t[n]="object"==typeof e?w({},e):e}for(var t={},n=0,i=arguments.length;n<i;n++)y(arguments[n],e);return t}function _(e,t,n){return y(t,function(t,i){e[i]=n&&"function"==typeof t?O(t,n):t}),e}var O=n(103),k=n(224),P=Object.prototype.toString;e.exports={isArray:i,isArrayBuffer:r,isBuffer:k,isFormData:o,isArrayBufferView:a,isString:s,isNumber:l,isObject:c,isUndefined:u,isDate:h,isFile:d,isBlob:p,isFunction:f,isStream:v,isURLSearchParams:b,isStandardBrowserEnv:g,forEach:y,merge:E,deepMerge:w,extend:_,trim:m}},function(e,t,n){var i=n(88),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();e.exports=o},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e)}return r(e,[{key:"canLoad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!!this.determineViewer(e,t)}},{key:"getViewers",value:function(){return Array.isArray(this.viewers)?this.viewers:[]}},{key:"determineViewer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.viewers.find(function(n){return!(t.indexOf(n.NAME)>-1)&&(n.EXT.indexOf(e.extension)>-1&&e.representations.entries.some(function(e){return n.REP===e.representation}))})}},{key:"determineRepresentation",value:function(e,t){return e.representations.entries.find(function(e){return t.REP===e.representation})}}]),e}();t.a=o},function(e,t,n){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(7),s=n.n(a),l=n(86),u=n.n(l),c=n(43),h=n.n(c),d=n(35),p=n(64),f=n(5),v=n(65),b=n(1),m=n(0),g=n(6),y=n(2),E=n(8),w=n(44),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),O=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},k={error:"error",loaded:"loaded",loading:"loading"},P={point:{title:"Point annotation mode",selector:m._13},draw:{title:"Drawing annotation mode",selector:m._12}},S=function(t){function n(e){i(this,n);var t=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.destroyed=!1,t.rotationAngle=0,t.scale=1,t.hasRetriedContentDownload=!1,t.isSetup=!1,t.options=e,t.cache=e.cache,t.previewUI=e.ui,t.repStatuses=[],t.isMobile=f.a.isMobile(),t.hasTouch=f.a.hasTouch(),t.emittedMetrics={},t.resetLoadTimeout=t.resetLoadTimeout.bind(t),t.preventDefault=t.preventDefault.bind(t),t.debouncedResizeHandler=t.getResizeHandler().bind(t),t.handleAssetError=t.handleAssetError.bind(t),t.toggleFullscreen=t.toggleFullscreen.bind(t),t.mobileZoomStartHandler=t.mobileZoomStartHandler.bind(t),t.mobileZoomChangeHandler=t.mobileZoomChangeHandler.bind(t),t.mobileZoomEndHandler=t.mobileZoomEndHandler.bind(t),t.handleAnnotatorEvents=t.handleAnnotatorEvents.bind(t),t.handleFullscreenEnter=t.handleFullscreenEnter.bind(t),t.handleFullscreenExit=t.handleFullscreenExit.bind(t),t.createAnnotator=t.createAnnotator.bind(t),t.viewerLoadHandler=t.viewerLoadHandler.bind(t),t.initAnnotations=t.initAnnotations.bind(t),t.loadBoxAnnotations=t.loadBoxAnnotations.bind(t),t.createViewer=t.createViewer.bind(t),t}return o(n,t),_(n,[{key:"setup",value:function(){var e=this;if(!this.isSetup){if(this.options.file){var t=this.options.file.extension;this.fileLoadingIcon=Object(g.x)(t),this.startAt=Object(b.r)(this.options,"fileOptions."+this.options.file.id+"."+m.X,{})}this.finishLoadingSetup();var n=this.options.container;"string"==typeof n&&(n=document.querySelector(n)),this.rootEl=n.querySelector(m._11),this.containerEl=n.querySelector(m._18),this.addCommonListeners(),this.loadTimeout=18e4,this.isMobile&&this.rootEl.classList.add(m.l),this.areAnnotationsEnabled()&&!this.options.sharedLink&&(this.annotatorPromise=new Promise(function(t){e.annotatorPromiseResolver=t})),this.isSetup=!0}}},{key:"finishLoadingSetup",value:function(){var e=this.options.container,t=e.querySelector(m._19);t&&t.classList.add(m.K);var n=e.querySelector(m._21);n&&(n.innerHTML=this.fileLoadingIcon||Object(g.y)("FILE_DEFAULT"))}},{key:"destroy",value:function(){var e=this;this.repStatuses&&this.repStatuses.forEach(function(t){t.removeListener("conversionpending",e.resetLoadTimeout),t.destroy()}),d.a.removeAllListeners(),document.defaultView.removeEventListener("resize",this.debouncedResizeHandler),this.removeAllListeners(),this.containerEl&&(this.containerEl.removeEventListener("contextmenu",this.preventDefault),this.containerEl.innerHTML=""),this.annotator&&"function"==typeof this.annotator.destroy&&(this.annotator.removeAllListeners(),this.annotator.destroy()),this.destroyed=!0,this.annotatorPromise=null,this.annotatorPromiseResolver=null,this.emittedMetrics=null,this.emit("destroy")}},{key:"getResizeHandler",value:function(){var e=this;return h()(function(){e.resize()},300)}},{key:"load",value:function(){this.resetLoadTimeout()}},{key:"resetLoadTimeout",value:function(){var e=this;clearTimeout(this.loadTimeoutId),this.loadTimeoutId=setTimeout(function(){if(document.hidden)return void e.resetLoadTimeout();if(!e.isLoaded()&&!e.isDestroyed()){var t=new E.a(y.c.VIEWER_LOAD_TIMEOUT,"We're sorry, the preview didn't load. Please refresh the page.");e.triggerError(t)}},this.loadTimeout)}},{key:"startLoadTimer",value:function(){var e=this.options.file,t=w.a.createTag(e.id,y.d.contentLoadTime);w.a.start(t)}},{key:"handleAssetError",value:function(e){var t=e?e.message:"",n=e instanceof E.a?e:new E.a(y.c.LOAD_ASSET,t,{});this.triggerError(n),this.destroyed=!0}},{key:"handleDownloadError",value:function(e,t){var n=this,i=Object(b.r)(e,"details.isRepDeleted",!1);if(this.hasRetriedContentDownload||i)return void this.triggerError(e);v.a.isCustomDownloadHost(t)&&v.a.setDownloadReachability(t).then(function(e){e&&n.emitMetric(y.a.DOWNLOAD_BLOCKED,v.a.getHostnameFromUrl(t))}),this.hasRetriedContentDownload=!0,this.load()}},{key:"triggerError",value:function(e){var t=e?e.message:"",n=e instanceof E.a?e:new E.a(y.c.LOAD_VIEWER,"We're sorry, the preview didn't load. Please refresh the page.",{},t);this.emit("error",n)}},{key:"isLoaded",value:function(){return this.loaded}},{key:"isDestroyed",value:function(){return this.destroyed}},{key:"appendAuthParams",value:function(e){var t=this.options,n=t.token,i=t.sharedLink,r=t.sharedLinkPassword;return Object(b.d)(e,n,i,r)}},{key:"createContentUrl",value:function(e,t){this.hasRetriedContentDownload&&(e=v.a.replaceDownloadHostWithDefault(e));var n=this.options.queryParams;return Object(b.e)(Object(b.h)(e,t),n)}},{key:"createContentUrlWithAuthParams",value:function(e,t){var n=this.appendAuthParams(this.createContentUrl(e,t)),i=this.options.queryParams;return Object(b.e)(n,i)}},{key:"appendAuthHeader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.options,n=t.token,i=t.sharedLink,r=t.sharedLinkPassword;return Object(b.p)(e,n,i,r)}},{key:"addCommonListeners",value:function(){d.a.addListener("enter",this.handleFullscreenEnter),d.a.addListener("exit",this.handleFullscreenExit),document.defaultView.addEventListener("resize",this.debouncedResizeHandler);var e=this.options.file.permissions;e&&!e.can_download&&this.containerEl.addEventListener("contextmenu",this.preventDefault),this.addListener(y.l.load,this.viewerLoadHandler)}},{key:"viewerLoadHandler",value:function(e){var t=Object(b.r)(this.options,"representation.content.url_template",""),n=v.a.getDownloadNotificationToShow(t);n&&(this.previewUI.notification.show(Object(b.D)("It looks like your connection to {1} is being blocked. We think we can make file previews faster for you. To do that, please ask your network admin to configure firewall settings so that {1} is reachable.",[n]),"Okay",!0),v.a.setDownloadHostNotificationShown(n),this.emitMetric(y.a.NOTIFICATION_SHOWN,{host:n})),e&&e.scale&&(this.scale=e.scale),this.annotatorPromise&&this.annotatorPromise.then(this.initAnnotations)}},{key:"preventDefault",value:function(e){e.preventDefault()}},{key:"toggleFullscreen",value:function(){d.a.toggle(this.containerEl)}},{key:"handleFullscreenEnter",value:function(){this.resize()}},{key:"handleFullscreenExit",value:function(){this.resize()}},{key:"resize",value:function(){this.emit("resize",{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight})}},{key:"allowNavigationArrows",value:function(){return!0}},{key:"emit",value:function(e,t){var i=this.options,r=i.file,o=i.viewer;O(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"emit",this).call(this,e,t),O(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"emit",this).call(this,y.l.default,{event:e,data:t,viewerName:o?o.NAME:"",fileId:r.id})}},{key:"emitMetric",value:function(e,t){this.emittedMetrics[e]&&this.getMetricsWhitelist().includes(e)||(this.emittedMetrics[e]=!0,O(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"emit",this).call(this,y.l.metric,{event:e,data:t}))}},{key:"getMetricsWhitelist",value:function(){return[]}},{key:"mobileZoomStartHandler",value:function(e){f.a.isIOS()?(this._scaling=!0,e.preventDefault(),e.stopPropagation()):2===e.touches.length?(this._pinchScale={initial:{0:[e.touches[0].clientX,e.touches[0].clientY],1:[e.touches[1].clientX,e.touches[1].clientY]},end:{}},this._scaling=!0,e.preventDefault(),e.stopPropagation()):(this._scaling=!1,this._pinchScale=void 0)}},{key:"mobileZoomChangeHandler",value:function(e){2===e.touches.length&&this._scaling&&(this._pinchScale.end={0:[e.touches[0].clientX,e.touches[0].clientY],1:[e.touches[1].clientX,e.touches[1].clientY]})}},{key:"mobileZoomEndHandler",value:function(e){if(this._scaling){var t=0;if(f.a.isIOS())t=e.scale-1;else{var n=Math.sqrt((this._pinchScale.initial[0][0]-this._pinchScale.initial[1][0])*(this._pinchScale.initial[0][0]-this._pinchScale.initial[1][0])+(this._pinchScale.initial[0][1]-this._pinchScale.initial[1][1])*(this._pinchScale.initial[0][1]-this._pinchScale.initial[1][1]));t=Math.sqrt((this._pinchScale.end[0][0]-this._pinchScale.end[1][0])*(this._pinchScale.end[0][0]-this._pinchScale.end[1][0])+(this._pinchScale.end[0][1]-this._pinchScale.end[1][1])*(this._pinchScale.end[0][1]-this._pinchScale.end[1][1]))-n}t>0?this.zoomIn():t<0&&this.zoomOut(),this._scaling=!1,this._pinchScale=void 0}}},{key:"getViewerOption",value:function(e){var t=this.options,n=t.viewers,i=t.viewer,r=Object(b.r)(i,"NAME");return Object(b.r)(n,r+"."+e)}},{key:"loadAssets",value:function(e,t){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.options.location,o=Object(b.g)(r);Object(b.x)((t||[]).map(o));var a=i&&this.options.fixDependencies;return Object(b.w)((e||[]).map(o),a).then(function(){i&&n.emit("assetsloaded")})}},{key:"prefetchAssets",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.options.location,r=Object(b.g)(i);Object(b.B)((t||[]).map(r),n),Object(b.B)((e||[]).map(r),n)}},{key:"getRepStatus",value:function(e){var t=this.options,n=t.token,i=t.sharedLink,r=t.sharedLinkPassword,o=t.logger,a=t.file,s=new p.a({representation:e||this.options.representation,token:n,sharedLink:i,sharedLinkPassword:r,fileId:a.id,logger:e?null:o});return s.addListener("conversionpending",this.resetLoadTimeout),this.repStatuses.push(s),s}},{key:"getLoadStatus",value:function(){return this.loaded?"Error"===this.options.viewer.NAME?k.error:k.loaded:k.loading}},{key:"isRepresentationReady",value:function(e){var t=p.a.getStatus(e);return t===m._30||t===m._31}},{key:"disableViewerControls",value:function(){this.controls&&this.controls.disable()}},{key:"enableViewerControls",value:function(){this.controls&&this.controls.enable()}},{key:"getRepresentation",value:function(){return this.options.representation}},{key:"getAssetPath",value:function(){return Object(b.r)(this,"options.viewer.ASSET","")}},{key:"loadBoxAnnotations",value:function(){return!this.areAnnotationsEnabled()||window.BoxAnnotations&&this.options.boxAnnotations instanceof window.BoxAnnotations?Promise.resolve():this.loadAssets(["annotations.js"],["annotations.css"],!1)}},{key:"createAnnotator",value:function(){if(this.areAnnotationsEnabled()){var t={};if(t[this.options.viewer.NAME]=this.viewerConfig,!e.BoxAnnotations){var n=new E.a(y.c.LOAD_ANNOTATIONS,"We're sorry, annotations failed to load for this file.",{silent:!0});return this.previewUI.notification.show(n.displayMessage),void this.triggerError(n)}var i=this.options.boxAnnotations||new e.BoxAnnotations(t);if(this.annotatorConf=i.determineAnnotator(this.options,this.viewerConfig),this.annotatorConf){var r=this.createAnnotatorOptions({annotator:this.annotatorConf,modeButtons:P});this.annotator=new this.annotatorConf.CONSTRUCTOR(r),this.annotatorPromiseResolver&&this.annotatorPromiseResolver()}}}},{key:"initAnnotations",value:function(){var e=this;this.annotator.init(this.scale),this.emit("annotator",this.annotator),this.addListener("toggleannotationmode",function(t){return e.annotator.toggleAnnotationMode(t)}),this.addListener("scale",function(t){e.annotator.emit(m.a.scale,t)}),this.addListener("scrolltoannotation",function(t){return e.annotator.scrollToAnnotation(t)}),this.annotator.addListener("annotatorevent",this.handleAnnotatorEvents)}},{key:"hasAnnotationPermissions",value:function(e){return!!e&&!!(e.can_annotate||e.can_view_annotations_all||e.can_view_annotations_self)}},{key:"areAnnotationsEnabled",value:function(){var e=this.options.file.permissions;if(!this.hasAnnotationPermissions(e))return!1;if(window.BoxAnnotations&&this.options.boxAnnotations instanceof window.BoxAnnotations&&this.options.boxAnnotations.viewerOptions){var t=this.options,n=t.boxAnnotations,i=t.viewer,r=n.viewerOptions[i.NAME];this.viewerConfig={enabled:r&&(r.enabled||r.enabledTypes.length>0)}}else this.viewerConfig=this.getViewerAnnotationsConfig();return this.viewerConfig&&void 0!==this.viewerConfig.enabled?this.viewerConfig.enabled:!!this.options.showAnnotations}},{key:"getViewerAnnotationsConfig",value:function(){var e=this.getViewerOption("annotations"),t=null!==e&&void 0!==e?e:{};return"boolean"==typeof t?{enabled:t}:t}},{key:"handleAnnotatorEvents",value:function(e){switch(e.event){case m.a.modeEnter:this.disableViewerControls(),"point"===e.data.mode?this.previewUI.notification.show("Click anywhere to add a comment to the document"):"draw"===e.data.mode&&(this.previewUI.notification.show("Press down and drag the pointer to draw on the document"),this.previewUI.replaceHeader(e.data.headerSelector));break;case m.a.modeExit:this.enableViewerControls(),this.previewUI.notification.hide(),"draw"===e.data.mode&&this.previewUI.replaceHeader(e.data.headerSelector);break;case m.a.error:this.previewUI.notification.show(e.data);break;case m.a.fetch:this.emit("scale",{scale:this.scale,rotationAngle:this.rotationAngle})}this.emit(e.event,e.data),this.emit("annotatorevent",e)}},{key:"createAnnotatorOptions",value:function(e){var t={loadError:"We're sorry, annotations failed to load for this file.",createError:"We're sorry, the annotation could not be created.",deleteError:"We're sorry, the annotation could not be deleted.",authError:"Your session has expired. Please refresh the page.",doneButton:"Done",closeButton:"Close",cancelButton:"Cancel",saveButton:"Save",postButton:"Post",deleteButton:"Delete",addCommentPlaceholder:"Add a comment here...",replyPlaceholder:"Post a reply...",deleteConfirmation:"Delete this annotation?",posting:"Posting...",profileAlt:"Avatar",anonymousUserName:"Some User",pointToggle:"Point annotation mode",highlightToggle:"Highlight text",highlightComment:"Add comment to highlighted text",whoHighlighted:"{1} highlighted",drawToggle:"Drawing annotation mode",drawSave:"Save drawing",drawDelete:"Delete drawing",whoDrew:"{1} drew"};return u()(Object.assign({},this.options,e,{isMobile:this.isMobile,hasTouch:this.hasTouch,locale:this.options.location.locale,localizedStrings:t}))}},{key:"handleAssetAndRepLoad",value:function(){this.loadBoxAnnotations().then(this.createAnnotator)}},{key:"createViewer",value:function(e){if(!e)return null;var t=this.containerEl.firstChild;return t?this.containerEl.insertBefore(e,t):this.containerEl.appendChild(e)}}]),n}(s.a);t.a=S}).call(t,n(16))},function(e,t,n){"use strict";function i(e,t,n){return n+"/2.0/files/"+e+(t?"/versions/"+t:"")+"?fields="+O.join(",")}function r(e,t){return t+"/2.0/files/"+e+"?fields=download_url"}function o(e,t){return e.representations.entries.find(function(e){return e.representation===t})||null}function a(e){return Object(E.r)(e,"watermark_info.is_watermarked",!1)}function s(e,t){return Object(E.r)(e,"permissions."+t,!1)}function l(e,t,n){return!!e&&"function"==typeof e[t]&&(!n||e[t](n))}function u(e){return!(!e||"object"!==(void 0===e?"undefined":_(e)))&&O.every(function(t){return void 0!==e[t]})}function c(e,t){var n=Object.assign({},e);return n.id=t,n.shared_link={},n.file_version={type:"file_version",id:e.id,sha1:e.sha1},n}function h(e){if(!o(e,w._1)){var t={preview:"true"};e.file_version&&(t.version=e.file_version.id);var n=Object(E.e)(e.authenticated_download_url,t);e.representations.entries.push({content:{url_template:n},representation:w._1,status:{state:"success"}})}}function d(e){var t=e.fileId,n=e.fileVersionId;return t?"file_"+t:n?"file_version_"+n:""}function p(e,t){a(t)||(t.representations&&h(t),e.set(d({fileId:t.id}),t),t.file_version&&t.file_version.id&&e.set(d({fileVersionId:t.file_version.id}),t))}function f(e,t){e.unset(d({fileId:t.id})),t.file_version&&t.file_version.id&&e.unset(d({fileVersionId:t.file_version.id}))}function v(e,t){var n=t.fileId,i=t.fileVersionId;return n&&!i?e.get(d({fileId:n})):i?e.get(d({fileVersionId:i})):null}function b(e){return/.*\.(vera\..*|vera)\.html/i.test(e.name)}function m(e,t){return t.downloadWM&&a(e)}function g(e,t){var n=e.is_download_available,i=t.showDownload,r=s(e,w._6),o=s(e,w._7),a=n&&i&&y.a.canDownload(),l=a&&r,u=a&&o&&m(e,t);return l||u}t.i=i,t.g=r,t.h=o,t.k=a,t.e=s,t.c=l,t.d=u,t.l=c,t.a=p,t.n=f,t.f=v,t.j=b,t.m=m,t.b=g;var y=n(5),E=n(1),w=n(0),_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O=["id","permissions","shared_link","sha1","file_version","name","size","extension","representations","watermark_info","authenticated_download_url","is_download_available"]},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},,function(e,t,n){function i(e,t){var n=o(e,t);return r(n)?n:void 0}var r=n(161),o=n(166);e.exports=i},function(e,t,n){"use strict";n.d(t,"j",function(){return i}),n.d(t,"d",function(){return r}),n.d(t,"e",function(){return o}),n.d(t,"f",function(){return a}),n.d(t,"g",function(){return s}),n.d(t,"h",function(){return l}),n.d(t,"i",function(){return u}),n.d(t,"l",function(){return c}),n.d(t,"k",function(){return h}),n.d(t,"a",function(){return d}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return f});var i="toggleVr",r="error",o="load",a="reset",s="sceneLoaded",l="showVrButton",u="toggleFullscreen",c="webglContextRestored",h="webglContextLost",d="bp-box3d",p="bp-is-hidden",f="bp-invisible"},,,,,function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){function i(e,t,n){var i=!0,s=!0;if("function"!=typeof e)throw new TypeError(a);return o(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),r(e,t,{leading:i,maxWait:t,trailing:s})}var r=n(43),o=n(17),a="Expected a function";e.exports=i},function(e,t,n){"use strict";n.d(t,"l",function(){return i}),n.d(t,"m",function(){return r}),n.d(t,"n",function(){return o}),n.d(t,"o",function(){return a}),n.d(t,"r",function(){return s}),n.d(t,"p",function(){return l}),n.d(t,"s",function(){return u}),n.d(t,"t",function(){return c}),n.d(t,"q",function(){return h}),n.d(t,"u",function(){return d}),n.d(t,"v",function(){return p}),n.d(t,"y",function(){return f}),n.d(t,"z",function(){return v}),n.d(t,"x",function(){return b}),n.d(t,"w",function(){return m}),n.d(t,"f",function(){return g}),n.d(t,"h",function(){return y}),n.d(t,"i",function(){return E}),n.d(t,"j",function(){return w}),n.d(t,"k",function(){return _}),n.d(t,"g",function(){return O}),n.d(t,"a",function(){return k}),n.d(t,"b",function(){return P}),n.d(t,"c",function(){return S}),n.d(t,"e",function(){return L}),n.d(t,"d",function(){return x}),n.d(t,"A",function(){return C}),n.d(t,"D",function(){return j}),n.d(t,"B",function(){return T}),n.d(t,"C",function(){return H}),n.d(t,"E",function(){return A}),n.d(t,"F",function(){return I});var i="canvasClick",r="resetSkeletons",o="rotateOnAxis",a="selectAnimationClip",s="setRenderMode",l="setCameraProjection",u="setSkeletonsVisible",c="setWireframesVisible",h="setGridVisible",d="toggleAnimation",p="toggleHelpers",f=10,v=10,b=4386,m=11184810,g="box3d-animation-clip-pullup",y="bp-overlay-panel",E="bp-pullup",w="bp-settings-panel-label",_="bp-settings-panel-row",O="bp-is-hidden",k="x",P="y",S="z",L="Perspective",x="Orthographic",C="Lit",j="Unlit",T="Normals",H="Shape",A="UV Overlay",I=90},,,,,,function(e,t,n){function i(e){return null==e?void 0===e?l:s:u&&u in Object(e)?o(e):a(e)}var r=n(54),o=n(162),a=n(163),s="[object Null]",l="[object Undefined]",u=r?r.toStringTag:void 0;e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(26),o=n.n(r),a=n(5),s=n(0),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u="box-show-preview-controls",c=2e3,h=function(){function e(t){var n=this;i(this,e),this.buttonRefs=[],this.shouldHide=!0,this.hasTouch=a.a.hasTouch(),this.mousemoveHandler=o()(function(){n.containerEl.classList.add(u),n.resetTimeout()},c-500),this.mouseenterHandler=function(){n.shouldHide=!1},this.mouseleaveHandler=function(){n.shouldHide=!0},this.focusinHandler=function(e){n.isPreviewControlButton(e.target)&&(n.containerEl.classList.add(u),n.shouldHide=!1)},this.focusoutHandler=function(e){n.isPreviewControlButton(e.target)&&!n.isPreviewControlButton(e.relatedTarget)&&(n.shouldHide=!0)},this.clickHandler=function(){n.shouldHide=!0},this.containerEl=t;var r=document.createElement("div");r.className="bp-controls-wrapper",r.setAttribute("data-testid","controls-wrapper"),this.containerEl.appendChild(r),this.controlsEl=r.appendChild(document.createElement("div")),this.controlsEl.className="bp-controls",this.containerEl.addEventListener("mousemove",this.mousemoveHandler),this.controlsEl.addEventListener("mouseenter",this.mouseenterHandler),this.controlsEl.addEventListener("mouseleave",this.mouseleaveHandler),this.controlsEl.addEventListener("focusin",this.focusinHandler),this.controlsEl.addEventListener("focusout",this.focusoutHandler),this.hasTouch&&(this.containerEl.addEventListener("touchstart",this.mousemoveHandler),this.controlsEl.addEventListener("click",this.clickHandler))}return l(e,[{key:"destroy",value:function(){this.containerEl.removeEventListener("mousemove",this.mousemoveHandler),this.controlsEl.removeEventListener("mouseenter",this.mouseenterHandler),this.controlsEl.removeEventListener("mouseleave",this.mouseleaveHandler),this.controlsEl.removeEventListener("focusin",this.focusinHandler),this.controlsEl.removeEventListener("focusout",this.focusoutHandler),this.hasTouch&&(this.containerEl.removeEventListener("touchstart",this.mousemoveHandler),this.controlsEl.removeEventListener("click",this.clickHandler)),this.buttonRefs.forEach(function(e){e.button.removeEventListener("click",e.handler)})}},{key:"isPreviewControlButton",value:function(e){return!!e&&(e.classList.contains("bp-controls-btn")||e.parentNode.classList.contains("bp-page-num-wrapper"))}},{key:"resetTimeout",value:function(){var e=this;clearTimeout(this.controlDisplayTimeoutId),this.controlDisplayTimeoutId=setTimeout(function(){clearTimeout(e.controlDisplayTimeoutId),!e.shouldHide||e.isPageNumFocused()?e.resetTimeout():(e.containerEl.classList.remove(u),e.controlsEl.contains(document.activeElement)&&document.activeElement.blur())},c)}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=document.createElement("div");r.className="bp-controls-cell";var o=document.createElement("button");return o.setAttribute("aria-label",e),o.setAttribute("type","button"),o.setAttribute("title",e),o.className="bp-controls-btn "+n,o.addEventListener("click",t),i&&(o.innerHTML=i),r.appendChild(o),this.controlsEl.appendChild(r),this.buttonRefs.push({button:o,handler:t}),o}},{key:"enable",value:function(){this.controlsEl.classList.remove(s.K)}},{key:"disable",value:function(){this.controlsEl.classList.add(s.K)}},{key:"isPageNumFocused",value:function(){return document.activeElement&&document.activeElement.classList.contains("bp-page-num-input")}}]),e}();t.a=h},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(7),s=n.n(a),l=n(244),u=n.n(l),c=n(0),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.fullscreenchangeHandler=function(){var t=u.a.fullscreenElement;t?e.fullscreenEnterHandler(t):e.fullscreenExitHandler()},e.bindDOMListeners(),e}return o(t,e),h(t,[{key:"bindDOMListeners",value:function(){u.a.addEventListener("fullscreenchange",this.fullscreenchangeHandler)}},{key:"unbindDOMListeners",value:function(){u.a.removeEventListener("fullscreenchange",this.fullscreenchangeHandler)}},{key:"destroy",value:function(){this.unbindDOMListeners(),this.removeAllListeners()}},{key:"isSupported",value:function(){return u.a.fullscreenEnabled}},{key:"isFullscreen",value:function(e){return this.isSupported()?!!u.a.fullscreenElement:e&&e.classList.contains(c.I)}},{key:"fullscreenEnterHandler",value:function(e){this.fullscreenElement=e,this.fullscreenElement.classList.add(c.I),this.fullscreenElement.focus(),this.isSupported()||this.fullscreenElement.classList.add(c.J),this.emit("enter")}},{key:"fullscreenExitHandler",value:function(){this.fullscreenElement.classList.remove(c.I),this.fullscreenElement.classList.remove(c.J),this.fullscreenElement=null,this.emit("exit")}},{key:"enter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement;this.isSupported()?u.a.requestFullscreenFunction(e).call(e,Element.ALLOW_KEYBOARD_INPUT):this.fullscreenEnterHandler(e)}},{key:"exit",value:function(){this.isSupported()?u.a.exitFullscreen():this.fullscreenExitHandler()}},{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement;this.isFullscreen(e)?this.exit():this.enter(e)}}]),t}(s.a);t.a=new d},,,function(e,t,n){function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var r=n(151),o=n(152),a=n(153),s=n(154),l=n(155);i.prototype.clear=r,i.prototype.delete=o,i.prototype.get=a,i.prototype.has=s,i.prototype.set=l,e.exports=i},function(e,t,n){function i(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}var r=n(87);e.exports=i},function(e,t,n){var i=n(19),r=i(Object,"create");e.exports=r},function(e,t,n){function i(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}var r=n(176);e.exports=i},function(e,t,n){function i(e,t,n,i){var a=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var u=t[s],c=i?i(n[u],e[u],u,n,e):void 0;void 0===c&&(c=e[u]),a?o(n,u,c):r(n,u,c)}return n}var r=n(90),o=n(91);e.exports=i},function(e,t,n){function i(e,t,n){function i(t){var n=g,i=y;return g=y=void 0,k=t,w=e.apply(i,n)}function c(e){return k=e,_=setTimeout(p,t),P?i(e):w}function h(e){var n=e-O,i=e-k,r=t-n;return S?u(r,E-i):r}function d(e){var n=e-O,i=e-k;return void 0===O||n>=t||n<0||S&&i>=E}function p(){var e=o();if(d(e))return f(e);_=setTimeout(p,h(e))}function f(e){return _=void 0,L&&g?i(e):(g=y=void 0,w)}function v(){void 0!==_&&clearTimeout(_),k=0,g=O=y=_=void 0}function b(){return void 0===_?w:f(o())}function m(){var e=o(),n=d(e);if(g=arguments,y=this,O=e,n){if(void 0===_)return c(O);if(S)return _=setTimeout(p,t),i(O)}return void 0===_&&(_=setTimeout(p,t)),w}var g,y,E,w,_,O,k=0,P=!1,S=!1,L=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,r(n)&&(P=!!n.leading,S="maxWait"in n,E=S?l(a(n.maxWait)||0,t):E,L="trailing"in n?!!n.trailing:L),m.cancel=v,m.flush=b,m}var r=n(17),o=n(219),a=n(220),s="Expected a function",l=Math.max,u=Math.min;e.exports=i},function(e,t,n){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function t(){n(this,t),this.times={}}return i(t,[{key:"start",value:function(t){var n=this.get(t);n||(n=this.create(t)),n.start||(n.start=e.performance.now(),n.end=void 0,n.elapsed=void 0)}},{key:"stop",value:function(t){var n=this.get(t);n&&void 0!==n.start&&void 0===n.end&&(n.end=e.performance.now(),n.elapsed=Math.round(n.end-n.start))}},{key:"get",value:function(e){return this.times[e]}},{key:"reset",value:function(e){var t=this;if(!e)return void Object.keys(this.times).forEach(this.reset.bind(this));("string"==typeof e?[e]:e).forEach(function(e){var n=t.get(e);n&&(n.start=void 0,n.end=void 0,n.elapsed=void 0)})}},{key:"createTag",value:function(e,t){return"file_"+e+"_"+t}},{key:"create",value:function(e){var t={start:void 0,end:void 0,elapsed:void 0};return this.times[e]=t,t}}]),t}();t.a=new r}).call(t,n(16))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){var i="";if(n){i="&shared_link_password="+encodeURI(n)}e.setRequestHeader("boxapi","shared_link="+encodeURI(t)+i)}var s=n(7),l=n.n(s),u=n(9),c=n(20),h=n(0),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(e){function t(e,n){i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.vrEnabled=!1,o.vrGamepads=[],o.vrGamepadLoadPromises={},o.containerEl=e,o.boxSdk=n,o.handleContextLost=o.handleContextLost.bind(o),o.handleContextRestored=o.handleContextRestored.bind(o),o}return o(t,e),p(t,[{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.staticBaseURI=t&&t.location?t.location.staticBaseURI:"",this.initBox3d(t)}},{key:"destroy",value:function(){this.box3d&&(this.box3d.canvas&&(this.box3d.canvas.removeEventListener("webglcontextlost",this.handleContextLost),this.box3d.canvas.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.disableVr(),this.box3d.destroy(),this.box3d=null)}},{key:"reset",value:function(){this.resetView()}},{key:"resetView",value:function(){var e=this.getCamera();e&&(e.setPosition(this.savedCameraPosition.x,this.savedCameraPosition.y,this.savedCameraPosition.z),e.setQuaternion(this.savedCameraQuaternion.x,this.savedCameraQuaternion.y,this.savedCameraQuaternion.z,this.savedCameraQuaternion.w))}},{key:"getCamera",value:function(){return this.box3d?this.box3d.getObjectByClass(Box3D.CameraObject):null}},{key:"getScene",value:function(){return this.box3d?this.box3d.getObjectByClass(Box3D.SceneObject):null}},{key:"getBox3D",value:function(){return this.box3d}},{key:"configureXHR",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new XMLHttpRequest;return i.open("GET",t),n.isExternal||(i.setRequestHeader("Authorization","Bearer "+e.token),e.sharedLink&&a(i,e.sharedLink,e.sharedLinkPassword)),Promise.resolve(i)}},{key:"getEntitiesFromUrl",value:function(e){return u.a.get(e)}},{key:"initBox3d",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Box3D)return Promise.reject(new Error("Missing Box3D"));if(!t.file||!t.file.file_version)return Promise.reject(new Error("Missing file version"));var n=new Box3D.XhrResourceLoader(this.configureXHR.bind(this,t)),i=t&&t.box3dApplication?t.box3dApplication:{},r=Promise.resolve([]);return"object"===(void 0===i?"undefined":d(i))?r=Promise.resolve(i):"string"==typeof i&&(r=this.getEntitiesFromUrl(i)),r.then(function(i){return e.createBox3d(n,t.sceneEntities,i.entities,""+t.apiHost)})}},{key:"createBox3d",value:function(e,t,n,i){var r=this,o=new Box3D.Engine({container:this.containerEl,engineName:"Default",resourceLoader:e,apiBase:i});return o.canvas&&(o.canvas.addEventListener("webglcontextlost",this.handleContextLost),o.canvas.addEventListener("webglcontextrestored",this.handleContextRestored)),new Promise(function(e){n&&o.addEntities(n);var i=o.getAssetByClass(Box3D.ApplicationAsset);o.addEntities(t),i||(i=o.getAssetByClass(Box3D.ApplicationAsset)),i.load(),r.box3d=o,e(r.box3d)})}},{key:"handleContextLost",value:function(e){e.preventDefault(),this.emit(c.k)}},{key:"handleContextRestored",value:function(){this.emit(c.l)}},{key:"onSceneLoad",value:function(){var e=this.getCamera();e&&(this.savedCameraPosition=e.getPosition(),this.savedCameraQuaternion=e.getQuaternion()),this.reset(),this.emit(c.g),this.initVr()}},{key:"toggleVr",value:function(){this.vrEnabled?this.disableVr():this.enableVr()}},{key:"onDisableVr",value:function(){this.enableCameraControls(),this.box3d.trigger("resize"),this.box3d.getRenderer().setAttribute("renderOnDemand",!0),this.hideVrGamepads();var e=this.box3d.getVrDisplay();this.vrEnabled=e&&e.isPresenting,this.resetView()}},{key:"onEnableVr",value:function(){this.disableCameraControls(),this.box3d.getRenderer().setAttribute("renderOnDemand",!1),this.showVrGamepads();var e=this.box3d.getVrDisplay();this.vrEnabled=e&&e.isPresenting}},{key:"enableVr",value:function(){this.vrEnabled||this.box3d.trigger("enableVrRendering")}},{key:"disableVr",value:function(){this.vrEnabled&&this.box3d.trigger("disableVrRendering")}},{key:"resize",value:function(){this.box3d&&this.box3d.trigger("resize")}},{key:"enableCameraControls",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"orbit_camera",t=this.getCamera(),n=t.getComponentByScriptId(e);n&&n.enable()}},{key:"disableCameraControls",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"orbit_camera",t=this.getCamera(),n=t.getComponentByScriptId(e);n&&n.disable()}},{key:"initVr",value:function(){var e=this;if(!Box3D.isTablet()){var t=this.box3d.getApplication(),n=t.getComponentByScriptId("vr_presenter");n&&n.whenDisplaysAvailable(function(t){t.length&&(e.emit(c.h),e.box3d.listenTo(e.box3d,"vrRenderingDisabled",e.onDisableVr.bind(e)),e.box3d.listenTo(e.box3d,"vrRenderingEnabled",e.onEnableVr.bind(e)),e.createVrGamepads())})}}},{key:"createVrGamepads",value:function(){var e=this;this.vrGamepads.length||(this.vrGamepads=[Box3D.Handedness.Left,Box3D.Handedness.Right].map(function(t){return e.createVrGamepad(t)}))}},{key:"createVrGamepad",value:function(e){var t=this,n=this.box3d.createNode(),i=function(e){var i=e.find(function(e){return"prefab"===e.type}),r=t.box3d.getAssetById(i.id);n.addChild(r.createInstance()),t.vrEnabled?t.showVrGamepads():t.hideVrGamepads()},r=function(e){var n=null,r=null;if(e.id.indexOf("Oculus")>-1)switch(r="oculusTouchCommon",e.hand){case"left":n="oculusTouchLeft";break;default:n="oculusTouchRight"}else e.id.indexOf("OpenVR")>-1&&(n="viveController");t.vrCommonLoadPromise||(t.vrCommonLoadPromise=r?t.box3d.importEntitiesFromUrl(t.staticBaseURI+"third-party/model3d/"+h._0+"/WebVR/"+r+"/entities.json",{isExternal:!0}):Promise.resolve()),t.vrGamepadLoadPromises[n]||(t.vrGamepadLoadPromises[n]=t.vrCommonLoadPromise.then(function(){return t.box3d.importEntitiesFromUrl(t.staticBaseURI+"third-party/model3d/"+h._0+"/WebVR/"+n+"/entities.json",{isExternal:!0})})),t.vrGamepadLoadPromises[n].then(i)},o=n.addComponent("motion_gamepad_device",{handPreference:e});return n.addComponent("intersection_checker",{objectTypeFilter:["mesh"]}),this.getScene().addChild(n),o.whenGamepadFound(r),n}},{key:"showVrGamepads",value:function(){this.vrGamepads.forEach(function(e){return e.setProperty("visible",!0)})}},{key:"hideVrGamepads",value:function(){this.vrGamepads.forEach(function(e){return e.setProperty("visible",!1)})}}]),t}(l.a);t.a=f},,,,,,,function(e,t,n){var i=n(19),r=n(11),o=i(r,"Map");e.exports=o},function(e,t,n){function i(e){if(!o(e))return!1;var t=r(e);return t==s||t==l||t==a||t==u}var r=n(33),o=n(17),a="[object AsyncFunction]",s="[object Function]",l="[object GeneratorFunction]",u="[object Proxy]";e.exports=i},function(e,t,n){var i=n(11),r=i.Symbol;e.exports=r},function(e,t,n){function i(e){return a(e)?r(e):o(e)}var r=n(92),o=n(190),a=n(96);e.exports=i},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){(function(e){var i=n(88),r="object"==typeof t&&t&&!t.nodeType&&t,o=r&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===r,s=a&&i.process,l=function(){try{return s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=l}).call(t,n(57)(e))},function(e,t){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||i)}var i=Object.prototype;e.exports=n},function(e,t,n){var i=n(198),r=n(98),o=Object.prototype,a=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols,l=s?function(e){return null==e?[]:(e=Object(e),i(s(e),function(t){return a.call(e,t)}))}:r;e.exports=l},function(e,t,n){var i=n(202),r=n(52),o=n(203),a=n(204),s=n(205),l=n(33),u=n(89),c=u(i),h=u(r),d=u(o),p=u(a),f=u(s),v=l;(i&&"[object DataView]"!=v(new i(new ArrayBuffer(1)))||r&&"[object Map]"!=v(new r)||o&&"[object Promise]"!=v(o.resolve())||a&&"[object Set]"!=v(new a)||s&&"[object WeakMap]"!=v(new s))&&(v=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,i=n?u(n):"";if(i)switch(i){case c:return"[object DataView]";case h:return"[object Map]";case d:return"[object Promise]";case p:return"[object Set]";case f:return"[object WeakMap]"}return t}),e.exports=v},function(e,t,n){function i(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}var r=n(208);e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(7),s=n.n(a),l=n(9),u=n(1),c=n(0),h=n(8),d=n(44),p=n(2),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function(e){function t(e){var n=e.representation,o=e.token,a=e.sharedLink,s=e.sharedLinkPassword,l=e.logger,c=e.fileId;i(this,t);var h=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));h.representation=n,h.logger=l,h.fileId=c;var d=h.representation.info;return h.infoUrl=d?Object(u.d)(d.url,o,a,s):"",h.promise=new Promise(function(e,t){h.resolve=e,h.reject=t}),h}return o(t,e),v(t,null,[{key:"getStatus",value:function(e){var t=e.status;return t="object"===(void 0===t?"undefined":f(t))?t.state:e.temp_status.state}},{key:"getErrorCode",value:function(e){var t=e.status;return"object"===(void 0===t?"undefined":f(t))?t.code:e.temp_status.code}}]),v(t,[{key:"destroy",value:function(){clearTimeout(this.statusTimeout)}},{key:"updateStatus",value:function(){var e=this;if(!this.infoUrl)return Promise.resolve();var t=d.a.createTag(this.fileId,p.d.convertTime);return d.a.start(t),l.a.get(this.infoUrl).then(function(t){clearTimeout(e.statusTimeout),t.metadata&&(e.representation.metadata=t.metadata);var n="object"===f(t.status)?t.status.state:t.temp_status.state;"object"===f(e.representation.status)?e.representation.status.state=n:e.representation.temp_status.state=n,e.handleResponse()})}},{key:"handleResponse",value:function(){var e=this,n=t.getStatus(this.representation),i=d.a.createTag(this.fileId,p.d.convertTime),r=t.getErrorCode(this.representation),o=void 0,a=void 0;switch(n){case"error":switch(r){case p.c.CONVERSION_PASSWORD_PROTECTED:o="We're sorry the preview didn't load. This document is protected.";break;case p.c.CONVERSION_TRY_AGAIN_LATER:o="We're sorry the preview didn't load. Please try again later.";break;case p.c.CONVERSION_UNSUPPORTED_FORMAT:o="We're sorry the preview didn't load. This file could not be converted.";break;default:o="We're sorry, the preview didn't load. Please refresh the page."}a=new h.a(r,o,{representation:this.representation}),this.reject(a);break;case c._30:case c._31:d.a.stop(i),this.resolve();break;case c._28:case c._29:this.logger&&this.logger.setUnConverted(),this.emit("conversionpending"),this.statusTimeout=setTimeout(function(){e.updateStatus()},n===c._28?0:2e3)}}},{key:"getPromise",value:function(){return this.handleResponse(),this.promise}}]),t}(s.a);t.a=b},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(9),o=n(1),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=/^https:\/\/.+?\./,l=void 0,u=function(){function e(){i(this,e)}return a(e,null,[{key:"isStorageAvailable",value:function(){return void 0===l&&(l=Object(o.u)()),l}},{key:"getHostnameFromUrl",value:function(e){var t=document.createElement("a");return t.href=e,t.hostname}},{key:"isCustomDownloadHost",value:function(e){return!e.startsWith("https://dl.")&&-1!==e.indexOf("boxcloud.com")}},{key:"replaceDownloadHostWithDefault",value:function(e){return e.replace(s,"https://dl.")}},{key:"setDownloadHostFallback",value:function(){e.isStorageAvailable()&&sessionStorage.setItem("download_host_fallback","true")}},{key:"isDownloadHostBlocked",value:function(){return!!e.isStorageAvailable()&&"true"===sessionStorage.getItem("download_host_fallback")}},{key:"setDownloadHostNotificationShown",value:function(t){if(e.isStorageAvailable()){var n=JSON.parse(localStorage.getItem("download_host_notification_shown"))||[];n.push(t),localStorage.setItem("download_host_notification_shown",JSON.stringify(n))}}},{key:"getDownloadNotificationToShow",value:function(t){if(!e.isStorageAvailable())return null;var n=e.getHostnameFromUrl(t),i=JSON.parse(localStorage.getItem("download_host_notification_shown"))||[];return"true"===sessionStorage.getItem("download_host_fallback")&&!i.includes(n)&&e.isCustomDownloadHost(t)?n:null}},{key:"setDownloadReachability",value:function(t){return r.a.head(t).then(function(){return Promise.resolve(!1)}).catch(function(){return e.setDownloadHostFallback(),Promise.resolve(!0)})}},{key:"downloadWithReachabilityCheck",value:function(t){var n=e.replaceDownloadHostWithDefault(t);e.isDownloadHostBlocked()||!e.isCustomDownloadHost(t)?Object(o.z)(n):(Object(o.z)(t),e.setDownloadReachability(t).then(function(e){e&&Object(o.z)(n)}))}}]),e}();t.a=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(7),s=n.n(a),l=n(34),u=n(20),c=n(6),h=n(302),d=(n.n(h),n(0)),p=n(67),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.vrButtonVisible=!1,n.el=e,n.controls=new l.a(n.el),n.uiRegistry=new p.a,n.handleToggleFullscreen=n.handleToggleFullscreen.bind(n),n.handleToggleVr=n.handleToggleVr.bind(n),n.handleReset=n.handleReset.bind(n),n}return o(t,e),f(t,[{key:"addUi",value:function(){this.addVrButton(),this.addFullscreenButton(),this.hideVrButton()}},{key:"addFullscreenButton",value:function(){this.controls.add("Enter fullscreen",this.handleToggleFullscreen,"bp-enter-fullscreen-icon",c.l),this.controls.add("Exit fullscreen",this.handleToggleFullscreen,"bp-exit-fullscreen-icon",c.m)}},{key:"addVrButton",value:function(){this.vrButtonEl=this.controls.add("Toggle VR display",this.handleToggleVr,"",c.b),this.vrButtonVisible?this.showVrButton():this.hideVrButton()}},{key:"handleSceneLoaded",value:function(){this.emit(u.g)}},{key:"handleToggleVr",value:function(){this.emit(u.j)}},{key:"handleToggleFullscreen",value:function(){this.emit(u.i)}},{key:"handleReset",value:function(){this.emit(u.f)}},{key:"showVrButton",value:function(){this.vrButtonVisible=!0,this.vrButtonEl&&this.vrButtonEl.classList.remove(d.K)}},{key:"hideVrButton",value:function(){this.vrButtonVisible=!1,this.vrButtonEl&&this.vrButtonEl.classList.add(d.K)}},{key:"setElementVisibility",value:function(e,t){t?e.classList.remove(d.K):e.classList.add(d.K)}},{key:"toggleElementVisibility",value:function(e){e.classList.toggle(d.K)}},{key:"destroy",value:function(){this.controls&&this.controls.destroy(),this.uiRegistry&&this.uiRegistry.unregisterAll(),this.controls=null,this.uiRegistry=null}}]),t}(s.a);t.a=v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("div");return t.classList.add(c.j),t.textContent=e,t}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("button");return t.textContent=e,t.classList.add(h.e),t}function a(){var e=document.createElement("input");return e.type="checkbox",e}function s(){var e=document.createElement("div");return e.classList.add(c.h),e.classList.add(c.i),e.classList.add(c.g),e}function l(e){var t=document.createElement("div");if(t.classList.add(c.k),e){var n=r(e);t.appendChild(n)}return t}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=l(e),r=document.createElement("div");r.classList.add(h.E);var a=document.createElement("div");a.classList.add(h.p),a.innerHTML="<div class="+h.o+">\n                                        <menu class="+h.k+'>\n                                            <div class="link-group">\n                                                <ul></ul>\n                                            </div>\n                                        </menu>\n                                    </div>';var s=o(t);s.addEventListener("click",function(){a.classList.toggle(h.Q)});var u=a.querySelector("ul");return n.forEach(function(e){var t=document.createElement("li"),n=document.createElement("a");n.classList.add(h.j),n.textContent=e.text,n.addEventListener("click",function(){s.textContent=e.text,a.classList.toggle(h.Q),e.callback()}),t.appendChild(n),u.appendChild(t)}),r.appendChild(s),r.appendChild(a),i.appendChild(r),i}n.d(t,"b",function(){return a}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return r}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"a",function(){return p});var c=n(27),h=n(0),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(){function e(){i(this,e),this.registry={}}return d(e,[{key:"registerItem",value:function(e,t,n,i){if(!e)throw new Error("registerItem() requires a unique id");if(!t)throw new Error("registerItem() requires an element");if(this.registry[e]||(this.registry[e]={el:t,uuid:e,events:{}}),n&&i){t.addEventListener(n,i);var r=this.registry[e].events;r[n]=r[n]||[],r[n].push(i)}}},{key:"unregisterItem",value:function(e){var t=e;this.registry[t.uuid]&&(t.el.parentElement&&t.el.parentElement.removeChild(t.el),Object.keys(t.events).forEach(function(e){t.events[e].forEach(function(n){t.el.removeEventListener(e,n)}),delete t.events[e],delete t.el}),delete this.registry[t.uuid])}},{key:"unregisterAll",value:function(){var e=this;Object.keys(this.registry).forEach(function(t){e.unregisterItem(e.registry[t])})}}]),e}()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(0),o=n(6),a=n(1),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t){var n=this;i(this,e),this.popupClickHandler=function(e){e.preventDefault(),e.stopPropagation(),e.target===n.closeButtonEl||e.target===n.backdropEl?n.hide():e.target!==n.buttonEl||n.isButtonDisabled()||("function"==typeof n.buttonEl.handler?n.buttonEl.handler():n.hide())},this.keydownHandler=function(e){switch(Object(a.k)(e)){case"Esc":case"Escape":n.hide();break;default:return!1}return!0},this.containerEl=t;var r="popup_"+(new Date).getTime()+"_label";this.popupEl=document.createElement("div"),this.popupEl.className="bp-modal-dialog bp-is-hidden",this.popupEl.setAttribute("role","alert"),this.popupEl.setAttribute("aria-labeledby",r),this.popupEl.innerHTML=('\n            <div class="bp-modal-header">\n                <button class="bp-modal-close-button" type="button">\n                    '+o.g+'\n                </button>\n            </div>\n            <div class="bp-modal-content">\n                <p class="bp-modal-message" id='+r+'></p>\n                <div class="bp-modal-actions">\n                    <button class="bp-btn bp-btn-primary bp-popup-btn" type="button"> </button>\n                </div>\n            </div>\n            <div class="bp-modal-backdrop"> </div>\n        ').trim(),this.messageEl=this.popupEl.querySelector("#"+r),this.buttonEl=this.popupEl.querySelector("button.bp-popup-btn"),this.closeButtonEl=this.popupEl.querySelector("button.bp-modal-close-button"),this.contentEl=this.popupEl.querySelector("div.bp-modal-content"),this.backdropEl=this.popupEl.querySelector("div.bp-modal-backdrop"),this.buttonDisabled=!1,this.popupEl.addEventListener("click",this.popupClickHandler),document.addEventListener("keydown",this.keydownHandler);var s=document.createElement("div");s.className="bp-popup-modal",s.appendChild(this.popupEl),t.appendChild(s)}return s(e,[{key:"destroy",value:function(){if(this.popupEl){this.popupEl.removeEventListener("click",this.popupClickHandler),document.removeEventListener("keydown",this.keydownHandler);var e=this.popupEl.parentNode;e.parentNode.removeChild(e),this.popupEl=null}}},{key:"show",value:function(e,t,n){this.messageEl.textContent=e,this.buttonEl.textContent=t||"Okay",n&&"function"==typeof n&&(this.buttonEl.handler=n),this.popupEl.classList.remove(r.K),this.popupEl.focus()}},{key:"hide",value:function(){this.popupEl.classList.add(r.K)}},{key:"addContent",value:function(e,t){t?this.contentEl.insertBefore(e,this.contentEl.firstChild):this.contentEl.appendChild(e)}},{key:"isVisible",value:function(){return!this.popupEl.classList.contains(r.K)}},{key:"isButtonDisabled",value:function(){return this.buttonDisabled}},{key:"disableButton",value:function(){this.buttonDisabled=!0,this.buttonEl.classList.add("is-disabled")}},{key:"enableButton",value:function(){this.buttonDisabled=!1,this.buttonEl.classList.remove("is-disabled")}}]),e}();t.a=l},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return l});var i=["csv","log","md","tsv","txt"],r=["htm","html","xhtml","xml","xsd","xsl"],o=["as","as3","asm","bat","c","cc","cmake","cpp","cs","css","cxx","diff","erb","groovy","h","haml","hh","java","js","json","less","m","make","ml","mm","php","pl","plist","properties","py","rb","rst","sass","scala","script","scm","sml","sql","sh","vi","vim","webdoc","yaml"],a=o.concat(i).concat(r).concat(["doc","docx","dwg","gdoc","gsheet","gslide","gslides","pages","numbers","key","msg","odp","ods","odt","pdf","ppt","pptx","rtf","wpd","xls","xlsm","xlsx"]),s=o.concat(i),l=o.concat(r)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(123),s=n(126),l=n(35),u=n(339),c=(n.n(u),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),h=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},d=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"setup",value:function(){this.isSetup||(h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.docEl.classList.add("bp-doc-document"),this.preloader=new s.a(this.previewUI),this.preloader.addListener("preload",this.onPreload.bind(this)))}},{key:"destroy",value:function(){h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.preloader.removeAllListeners("preload")}},{key:"onKeydown",value:function(e,n){return"Shift++"===e?(this.zoomIn(),!0):"Shift+_"===e?(this.zoomOut(),!0):"ArrowUp"===e&&l.a.isFullscreen(this.containerEl)?(this.previousPage(),!0):"ArrowDown"===e&&l.a.isFullscreen(this.containerEl)?(this.nextPage(),!0):h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onKeydown",this).call(this,e,n)}}]),t}(a.a);t.a=d},,,,,,,,,,,,,,,,function(e,t,n){function i(e){return r(e,o|a)}var r=n(149),o=1,a=4;e.exports=i},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(16))},function(e,t){function n(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var i=Function.prototype,r=i.toString;e.exports=n},function(e,t,n){function i(e,t,n){var i=e[t];s.call(e,t)&&o(i,n)&&(void 0!==n||t in e)||r(e,t,n)}var r=n(91),o=n(87),a=Object.prototype,s=a.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var r=n(181);e.exports=i},function(e,t,n){function i(e,t){var n=a(e),i=!n&&o(e),c=!n&&!i&&s(e),d=!n&&!i&&!c&&u(e),p=n||i||c||d,f=p?r(e.length,String):[],v=f.length;for(var b in e)!t&&!h.call(e,b)||p&&("length"==b||c&&("offset"==b||"parent"==b)||d&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||l(b,v))||f.push(b);return f}var r=n(183),o=n(184),a=n(56),s=n(93),l=n(187),u=n(188),c=Object.prototype,h=c.hasOwnProperty;e.exports=i},function(e,t,n){(function(e){var i=n(11),r=n(186),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o,l=s?i.Buffer:void 0,u=l?l.isBuffer:void 0,c=u||r;e.exports=c}).call(t,n(57)(e))},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}var i=9007199254740991;e.exports=n},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){function i(e){return null!=e&&o(e.length)&&!r(e)}var r=n(53),o=n(94);e.exports=i},function(e,t,n){function i(e){return a(e)?r(e,!0):o(e)}var r=n(92),o=n(193),a=n(96);e.exports=i},function(e,t){function n(){return[]}e.exports=n},function(e,t,n){var i=n(100),r=n(101),o=n(61),a=n(98),s=Object.getOwnPropertySymbols,l=s?function(e){for(var t=[];e;)i(t,o(e)),e=r(e);return t}:a;e.exports=l},function(e,t){function n(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}e.exports=n},function(e,t,n){var i=n(95),r=i(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){function i(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}var r=n(100),o=n(56);e.exports=i},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},function(e,t,n){"use strict";function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var r=n(10);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,function(e,t){null!==e&&void 0!==e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))}))}),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){function i(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var r=n(10),o=n(230),a={"Content-Type":"application/x-www-form-urlencoded"},s={adapter:function(){var e;return void 0!==t&&"[object process]"===Object.prototype.toString.call(t)?e=n(107):"undefined"!=typeof XMLHttpRequest&&(e=n(107)),e}(),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],function(e){s.headers[e]={}}),r.forEach(["post","put","patch"],function(e){s.headers[e]=r.merge(a)}),e.exports=s}).call(t,n(229))},function(e,t,n){"use strict";var i=n(10),r=n(231),o=n(104),a=n(233),s=n(234),l=n(108);e.exports=function(e){return new Promise(function(t,u){var c=e.data,h=e.headers;i.isFormData(c)&&delete h["Content-Type"];var d=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",f=e.auth.password||"";h.Authorization="Basic "+btoa(p+":"+f)}if(d.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?a(d.getAllResponseHeaders()):null,i=e.responseType&&"text"!==e.responseType?d.response:d.responseText,o={data:i,status:d.status,statusText:d.statusText,headers:n,config:e,request:d};r(t,u,o),d=null}},d.onabort=function(){d&&(u(l("Request aborted",e,"ECONNABORTED",d)),d=null)},d.onerror=function(){u(l("Network Error",e,null,d)),d=null},d.ontimeout=function(){u(l("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},i.isStandardBrowserEnv()){var v=n(235),b=(e.withCredentials||s(e.url))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;b&&(h[e.xsrfHeaderName]=b)}if("setRequestHeader"in d&&i.forEach(h,function(e,t){void 0===c&&"content-type"===t.toLowerCase()?delete h[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){d&&(d.abort(),u(e),d=null)}),void 0===c&&(c=null),d.send(c)})}},function(e,t,n){"use strict";var i=n(232);e.exports=function(e,t,n,r,o){var a=new Error(e);return i(a,t,n,r,o)}},function(e,t,n){"use strict";var i=n(10);e.exports=function(e,t){t=t||{};var n={};return i.forEach(["url","method","params","data"],function(e){void 0!==t[e]&&(n[e]=t[e])}),i.forEach(["headers","auth","proxy"],function(r){i.isObject(t[r])?n[r]=i.deepMerge(e[r],t[r]):void 0!==t[r]?n[r]=t[r]:i.isObject(e[r])?n[r]=i.deepMerge(e[r]):void 0!==e[r]&&(n[r]=e[r])}),i.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(i){void 0!==t[i]?n[i]=t[i]:void 0!==e[i]&&(n[i]=e[i])}),n}},function(e,t,n){"use strict";function i(e){this.message=e}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(9),s=n(34),l=n(14),u=n(5),c=n(8),h=n(6),d=n(0),p=n(2),f=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},m=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.pan=n.pan.bind(n),n.stopPanning=n.stopPanning.bind(n),n.zoomIn=n.zoomIn.bind(n),n.zoomOut=n.zoomOut.bind(n),n.handleMouseDown=n.handleMouseDown.bind(n),n.handleMouseUp=n.handleMouseUp.bind(n),n.cancelDragEvent=n.cancelDragEvent.bind(n),n.finishLoading=n.finishLoading.bind(n),n.isMobile&&(u.a.isIOS()?(n.mobileZoomStartHandler=n.mobileZoomStartHandler.bind(n),n.mobileZoomEndHandler=n.mobileZoomEndHandler.bind(n)):(n.mobileZoomStartHandler=n.mobileZoomStartHandler.bind(n),n.mobileZoomChangeHandler=n.mobileZoomChangeHandler.bind(n),n.mobileZoomEndHandler=n.mobileZoomEndHandler.bind(n))),n}return o(t,e),v(t,[{key:"destroy",value:function(){this.unbindDOMListeners(),this.controls&&"function"==typeof this.controls.destroy&&this.controls.destroy(),this.imageEl&&this.imageEl.removeEventListener("mouseup",this.handleMouseUp),b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"finishLoading",value:function(){var e=this;if(!this.isDestroyed()){this.setOriginalImageSize(this.imageEl).then(function(){e.loadUI(),e.zoom(),e.imageEl.classList.remove(d.L),e.loaded=!0,e.emit(p.l.load)})}}},{key:"zoomIn",value:function(){this.zoom("in")}},{key:"zoomOut",value:function(){this.zoom("out")}},{key:"resize",value:function(){this.zoom(),b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this)}},{key:"startPanning",value:function(e,t){this.isPannable&&(this.panStartX=e,this.panStartY=t,this.panStartScrollLeft=this.wrapperEl.scrollLeft,this.panStartScrollTop=this.wrapperEl.scrollTop,document.addEventListener("mousemove",this.pan),document.addEventListener("mouseup",this.stopPanning),this.imageEl.classList.add("panning"),this.isPanning=!0,this.emit("panstart"))}},{key:"pan",value:function(e){if(this.isPanning){var t=e.clientX-this.panStartX,n=e.clientY-this.panStartY;this.wrapperEl.scrollLeft=this.panStartScrollLeft-t,this.wrapperEl.scrollTop=this.panStartScrollTop-n,this.didPan=!0,this.emit("pan")}}},{key:"stopPanning",value:function(){document.removeEventListener("mousemove",this.pan),document.removeEventListener("mouseup",this.stopPanning),this.imageEl.classList.remove("panning"),this.isPanning=!1,this.emit("panend")}},{key:"updateCursor",value:function(){this.isPannable?(this.isZoomable=!1,this.imageEl.classList.add("pannable"),this.imageEl.classList.remove("zoomable")):(this.isZoomable=!0,this.imageEl.classList.remove("pannable"),this.imageEl.classList.add("zoomable"))}},{key:"loadUI",value:function(){this.controls=new s.a(this.containerEl),this.bindControlListeners()}},{key:"setOriginalImageSize",value:function(e){return new Promise(function(t){e.naturalWidth&&e.naturalHeight?(e.setAttribute("originalWidth",e.naturalWidth),e.setAttribute("originalHeight",e.naturalHeight),t()):a.a.get(e.src,{type:"text"}).then(function(n){var i=new DOMParser,r=i.parseFromString(n,"image/svg+xml");try{var o=r.documentElement.getAttribute("viewBox"),a=o.split(" "),s=f(a,4),l=s[2],u=s[3],c=u?l/u:l;e.setAttribute("originalWidth",Math.round(150*c)),e.setAttribute("originalHeight",150)}catch(t){e.setAttribute("originalWidth",300),e.setAttribute("originalHeight",150)}finally{t()}}).catch(t)})}},{key:"bindControlListeners",value:function(){this.controls.add("Zoom out",this.zoomOut,"bp-image-zoom-out-icon",h.w),this.controls.add("Zoom in",this.zoomIn,"bp-image-zoom-in-icon",h.v)}},{key:"bindDOMListeners",value:function(){this.imageEl.addEventListener("mousedown",this.handleMouseDown),this.imageEl.addEventListener("mouseup",this.handleMouseUp),this.imageEl.addEventListener("dragstart",this.cancelDragEvent),this.isMobile&&(u.a.isIOS()?(this.imageEl.addEventListener("gesturestart",this.mobileZoomStartHandler),this.imageEl.addEventListener("gestureend",this.mobileZoomEndHandler)):(this.imageEl.addEventListener("touchstart",this.mobileZoomStartHandler),this.imageEl.addEventListener("touchmove",this.mobileZoomChangeHandler),this.imageEl.addEventListener("touchend",this.mobileZoomEndHandler)))}},{key:"unbindDOMListeners",value:function(){document.removeEventListener("mousemove",this.pan),document.removeEventListener("mouseup",this.stopPanning),this.imageEl&&(this.imageEl.removeEventListener("mousedown",this.handleMouseDown),this.imageEl.removeEventListener("mouseup",this.handleMouseUp),this.imageEl.removeEventListener("dragstart",this.cancelDragEvent),this.imageEl.removeEventListener("gesturestart",this.mobileZoomStartHandler),this.imageEl.removeEventListener("gestureend",this.mobileZoomEndHandler),this.imageEl.removeEventListener("touchstart",this.mobileZoomStartHandler),this.imageEl.removeEventListener("touchmove",this.mobileZoomChangeHandler),this.imageEl.removeEventListener("touchend",this.mobileZoomEndHandler))}},{key:"handleDownloadError",value:function(e,n){var i=new c.a(p.c.CONTENT_DOWNLOAD,"We're sorry, the preview didn't load. Please refresh the page.",{},e.message);b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleDownloadError",this).call(this,i,n)}},{key:"onKeydown",value:function(e){return!!this.controls&&("Shift++"===e?(this.zoomIn(),!0):"Shift+_"===e&&(this.zoomOut(),!0))}},{key:"handleMouseDown",value:function(e){var t=e.button,n=e.ctrlKey,i=e.metaKey,r=e.clientX,o=e.clientY;this.didPan=!1,!("number"!=typeof t||t<2)||n||i||this.startPanning(r,o)}},{key:"handleMouseUp",value:function(e){var t=e.button,n=e.ctrlKey,i=e.metaKey;!("number"!=typeof t||t<2)||n||i||(!this.isPannable&&this.isZoomable?this.zoom("in"):this.didPan||this.zoom("reset"))}},{key:"cancelDragEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"disableViewerControls",value:function(){b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disableViewerControls",this).call(this),this.unbindDOMListeners(),this.imageEl.classList.remove("zoomable"),this.imageEl.classList.remove("pannable")}},{key:"enableViewerControls",value:function(){b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enableViewerControls",this).call(this),this.bindDOMListeners(),this.isMobile||this.updateCursor()}},{key:"zoom",value:function(){}}]),t}(l.a);t.a=m},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e)}return r(e,null,[{key:"getHostname",value:function(){return window.location.hostname||""}},{key:"getOrigin",value:function(){return window.location.origin||""}}]),e}();t.a=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(7),s=n.n(a),l=n(35),u=n(5),c=n(1),h=n(6),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p="\n    <div class='bp-page-num-wrapper'>\n        <span class=bp-current-page data-testid='current-page'>1</span>\n        <input type='number' pattern='[0-9]*' min='1'  value='' size='3' class='bp-page-num-input' data-testid='page-num-input'/>\n        <span class='bp-page-num-divider'>&nbsp;/&nbsp;</span>\n        <span class='bp-total-pages'>1</span>\n    </div>".replace(/>\s*</g,"><"),f=function(e){function t(e,n){i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.controls=e,o.controlsEl=e.controlsEl,o.contentEl=n,o.pageNumInputBlurHandler=o.pageNumInputBlurHandler.bind(o),o.pageNumInputKeydownHandler=o.pageNumInputKeydownHandler.bind(o),o.setPreviousPage=o.setPreviousPage.bind(o),o.showPageNumInput=o.showPageNumInput.bind(o),o.setNextPage=o.setNextPage.bind(o),o}return o(t,e),d(t,[{key:"add",value:function(e,t){this.controls.add("Previous page",this.setPreviousPage,"bp-previous-page-icon bp-previous-page",h.i),this.controls.add("Click to enter page number",this.showPageNumInput,"bp-page-num",p),this.controls.add("Next page",this.setNextPage,"bp-next-page-icon bp-next-page",h.h);var n=this.controlsEl.querySelector(".bp-page-num");this.totalPagesEl=n.querySelector(".bp-total-pages"),this.totalPagesEl.textContent=t,this.currentPageEl=n.querySelector(".bp-current-page"),this.currentPageEl.textContent=e,this.pageNumInputEl=n.querySelector(".bp-page-num-input"),this.checkPaginationButtons()}},{key:"showPageNumInput",value:function(){this.controlsEl.classList.add("show-page-number-input"),this.pageNumInputEl.value=this.getCurrentPageNumber(),this.pageNumInputEl.focus(),this.pageNumInputEl.select(),this.pageNumInputEl.addEventListener("blur",this.pageNumInputBlurHandler),this.pageNumInputEl.addEventListener("keydown",this.pageNumInputKeydownHandler)}},{key:"hidePageNumInput",value:function(){this.controlsEl.classList.remove("show-page-number-input"),this.pageNumInputEl.removeEventListener("blur",this.pageNumInputBlurHandler),this.pageNumInputEl.removeEventListener("keydown",this.pageNumInputKeydownHandler)}},{key:"checkPaginationButtons",value:function(){var e=this.controlsEl.querySelector(".bp-page-num"),t=this.controlsEl.querySelector(".bp-previous-page"),n=this.controlsEl.querySelector(".bp-next-page"),i="Safari"===u.a.getName()&&l.a.isFullscreen();e&&(this.getTotalPages()<=1||i?e.disabled=!0:e.disabled=!1),t&&(1===this.getCurrentPageNumber()?t.disabled=!0:t.disabled=!1),n&&(this.getCurrentPageNumber()===this.getTotalPages()?n.disabled=!0:n.disabled=!1)}},{key:"updateCurrentPage",value:function(e){this.pageNumInputEl&&(this.pageNumInputEl.value=e),this.currentPageEl&&this.setCurrentPageNumber(e),this.checkPaginationButtons()}},{key:"setPreviousPage",value:function(){this.emit("pagechange",this.getCurrentPageNumber()-1)}},{key:"setNextPage",value:function(){this.emit("pagechange",this.getCurrentPageNumber()+1)}},{key:"getCurrentPageNumber",value:function(){return parseInt(this.currentPageEl.textContent,10)}},{key:"setCurrentPageNumber",value:function(e){this.currentPageEl.textContent=e}},{key:"getTotalPages",value:function(){return parseInt(this.totalPagesEl.textContent,10)}},{key:"pageNumInputBlurHandler",value:function(e){var t=e.target,n=parseInt(t.value,10);Number.isNaN(n)||this.emit("pagechange",n),this.hidePageNumInput()}},{key:"pageNumInputKeydownHandler",value:function(e){switch(Object(c.k)(e)){case"Enter":case"Tab":this.contentEl.focus(),"Explorer"!==u.a.getName()&&e.target.blur(),e.stopPropagation(),e.preventDefault();break;case"Escape":this.hidePageNumInput(),this.contentEl.focus(),e.stopPropagation(),e.preventDefault()}}}]),t}(s.a);t.a=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(13),s=n(1),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},c=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"determineViewer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"determineViewer",this).call(this,e,n);if(i&&Object(s.E)(e))return i}}]),t}(a.a);t.a=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(9),s=n(14),l=n(66),u=n(45),c=n(5),h=n(116),d=n(20),p=n(117),f=n(303),v=(n.n(f),n(2)),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},g=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleToggleVr=n.handleToggleVr.bind(n),n.handleReset=n.handleReset.bind(n),n.handleSceneLoaded=n.handleSceneLoaded.bind(n),n.handleShowVrButton=n.handleShowVrButton.bind(n),n.handleError=n.handleError.bind(n),n.handleContextRestored=n.handleContextRestored.bind(n),n.handleContextLost=n.handleContextLost.bind(n),n.onVrPresentChange=n.onVrPresentChange.bind(n),n.handleEnableVr=n.handleEnableVr.bind(n),n.handleDisableVr=n.handleDisableVr.bind(n),n.postLoad=n.postLoad.bind(n),n}return o(t,e),b(t,[{key:"setup",value:function(){this.isSetup||(m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.renderer=null,this.wrapperEl=this.createViewer(document.createElement("div")),this.wrapperEl.className=d.a,this.contextNotification=new h.a(this.wrapperEl),this.loadTimeout=5e4)}},{key:"createSubModules",value:function(){this.controls=new l.a(this.wrapperEl),this.renderer=new u.a(this.wrapperEl,this.boxSdk)}},{key:"attachEventHandlers",value:function(){this.controls&&(this.controls.on(d.i,this.toggleFullscreen),this.controls.on(d.j,this.handleToggleVr),this.controls.on(d.f,this.handleReset)),this.renderer&&(this.renderer.on(d.g,this.handleSceneLoaded),this.renderer.on(d.h,this.handleShowVrButton),this.renderer.on(d.d,this.handleError),this.renderer.on(d.l,this.handleContextRestored),this.renderer.on(d.k,this.handleContextLost)),window.addEventListener("vrdisplaypresentchange",this.onVrPresentChange),window.addEventListener("vrdisplayactivate",this.handleEnableVr),window.addEventListener("vrdisplaydeactivate",this.handleDisableVr)}},{key:"detachEventHandlers",value:function(){this.controls&&(this.controls.removeListener(d.i,this.toggleFullscreen),this.controls.removeListener(d.j,this.handleToggleVr),this.controls.removeListener(d.f,this.handleReset)),this.renderer&&(this.renderer.removeListener(d.g,this.handleSceneLoaded),this.renderer.removeListener(d.h,this.handleShowVrButton),this.renderer.removeListener(d.d,this.handleError),this.renderer.removeListener(d.l,this.handleContextRestored),this.renderer.removeListener(d.k,this.handleContextLost)),window.removeEventListener("vrdisplaypresentchange",this.onVrPresentChange),window.removeEventListener("vrdisplayactivate",this.handleEnableVr),window.removeEventListener("vrdisplaydeactivate",this.handleDisableVr)}},{key:"resize",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this),this.renderer&&this.renderer.resize()}},{key:"destroy",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.detachEventHandlers(),this.destroySubModules(),this.destroyed=!0}},{key:"destroySubModules",value:function(){this.controls&&this.controls.destroy(),this.renderer&&this.renderer.destroy()}},{key:"load",value:function(){return m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this),Promise.all([this.loadAssets(p.a),this.getRepStatus().getPromise()]).then(this.postLoad).catch(this.handleAssetError)}},{key:"postLoad",value:function(){var e=this.options,t=e.representation,n=e.token,i=e.apiHost,r=e.sharedLink,o=t.content.url_template;this.boxSdk=new BoxSDK({token:n,sharedLink:r,apiBase:i}),this.createSubModules(),this.attachEventHandlers(),this.startLoadTimer(),this.renderer.load(this.createContentUrl(o,"entities.json"),this.options).catch(this.handleError)}},{key:"prefetch",value:function(e){var t=e.assets,n=void 0===t||t,i=e.content,r=void 0===i||i;n&&this.prefetchAssets(p.a);var o=this.options.representation;if(r&&this.isRepresentationReady(o)){var s=o.content.url_template;a.a.get(this.createContentUrl(s,"entities.json"),{headers:this.appendAuthHeader(),type:"document"})}}},{key:"handleContextLost",value:function(){this.contextNotification.show("WebGL Context Lost"),this.destroySubModules()}},{key:"handleContextRestored",value:function(){this.detachEventHandlers(),this.contextNotification.show("WebGL Context Restored"),this.emit(v.l.progressStart),this.previewUI.showLoadingIndicator(),this.postLoad()}},{key:"handleToggleVr",value:function(){this.renderer.toggleVr()}},{key:"handleEnableVr",value:function(){this.renderer.enableVr()}},{key:"handleDisableVr",value:function(){this.renderer.disableVr()}},{key:"onVrPresentChange",value:function(){var e=this.renderer.box3d.getVrDisplay();c.a.isMobile()&&(e&&e.isPresenting?this.wrapperEl.classList.add("vr-enabled"):this.wrapperEl.classList.remove("vr-enabled"),this.controls&&(this.controls.vrEnabled=e&&e.isPresenting))}},{key:"handleSceneLoaded",value:function(){this.controls&&this.controls.addUi(),this.emit(d.e),this.loaded=!0}},{key:"handleShowVrButton",value:function(){this.controls.showVrButton()}},{key:"handleReset",value:function(){this.renderer&&this.renderer.reset()}},{key:"handleError",value:function(e){this.emit(d.d,e)}}]),t}(s.a);t.a=g},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(0),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){var n=this;i(this,e),this.clickHandler=function(e){e.stopPropagation(),e.target===n.buttonEl&&n.hide()};var o="notification_"+(new Date).getTime()+"_label";this.notificationEl=document.createElement("div"),this.notificationEl.classList.add(r.m),this.notificationEl.classList.add(r.K),this.notificationEl.addEventListener("click",this.clickHandler),this.notificationEl.setAttribute("role","alert"),this.notificationEl.setAttribute("aria-labeledby",o),this.notificationEl.innerHTML=('\n            <span id="'+o+'"></span>\n            <button class="close-btn" type="button">Okay</button>\n        ').trim(),this.messageEl=this.notificationEl.querySelector("#"+o),this.buttonEl=this.notificationEl.querySelector("button");var a=document.createElement("div");a.classList.add(r.n),a.appendChild(this.notificationEl),t.appendChild(a)}return o(e,[{key:"show",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.messageEl.textContent=e,this.buttonEl.textContent=t||"Okay",this.notificationEl.classList.remove(r.K),this.notificationEl.focus(),this.timeout=n?null:setTimeout(this.hide.bind(this),5e3)}},{key:"hide",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.notificationEl&&this.notificationEl.classList.add(r.K)}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(0),r="third-party/model3d/"+i._0+"/",o=[r+"boxsdk.min.js",r+"three.min.js",r+"box3d-runtime.min.js",r+"webvr-polyfill.js",r+"WebVR/VRConfig.js"];t.a=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(309),s=(n.n(a),n(9)),l=n(119),u=n(5),c=n(68),h=n(0),d=n(6),p=n(69),f=n(1),v=n(2),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},g=196608,y="third-party/text/"+h._33+"/",E=[y+"highlight.min.js"],w=[y+"github.min.css"],_=function(e){function t(){var e,n,o,a;i(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),o.postLoad=function(){var e=o.options,t=e.representation,n=e.file,i=t.content.url_template,r=n.extension,a=n.size;o.truncated=a>g;var l=o.truncated?{Range:"bytes=0-"+g}:{},u=o.createContentUrlWithAuthParams(i);return o.startLoadTimer(),s.a.get(u,{headers:l,type:"text"}).catch(function(e){o.handleDownloadError(e,u)}).then(function(e){if(!o.isDestroyed()){var t=e;o.truncated&&(t+="..."),-1===p.b.indexOf(r)?o.finishLoading(t,!1):o.initHighlightJs(t)}}).catch(o.handleAssetError)},a=n,r(o,a)}return o(t,e),b(t,[{key:"destroy",value:function(){if(this.textEl){var e=this.textEl.querySelector(".bp-btn-download");e&&e.removeEventListener("click",this.download.bind(this))}this.printIframe=null,m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"load",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this);var e=this.loadAssets(this.getJS(),this.getCSS());return Promise.all([e,this.getRepStatus().getPromise()]).then(this.postLoad).catch(this.handleAssetError)}},{key:"prefetch",value:function(e){var t=e.assets,n=void 0===t||t,i=e.content,r=void 0===i||i;n&&this.prefetchAssets(this.getJS(),this.getCSS());var o=this.options.representation;if(r&&this.isRepresentationReady(o)){var a=o.content.url_template;s.a.get(this.createContentUrlWithAuthParams(a),{type:"document"})}}},{key:"print",value:function(){var e=this;if(!this.printReady)return this.preparePrint(this.getCSS().concat("preview.css")),this.printPopup.show("Preparing to print...","Print",function(){e.printPopup.hide(),e.printIframe()}),void this.printPopup.disableButton();this.printIframe(),this.emit("printsuccess")}},{key:"setup",value:function(){this.isSetup||(m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.textEl=this.createViewer(document.createElement("pre")),this.textEl.className="bp-text bp-text-plain hljs "+h.N+" "+h.K,this.textEl.tabIndex="0",this.codeEl=this.textEl.appendChild(document.createElement("code")),this.codeEl.classList.add(this.options.file.extension),this.truncated=!1,this.initPrint())}},{key:"getJS",value:function(){return E}},{key:"getCSS",value:function(){return w}},{key:"finishLoading",value:function(e,t){t?this.codeEl.innerHTML=e:this.codeEl.textContent=e,this.loadUI(),this.textEl.classList.remove(h.K),this.loaded=!0,this.emit(v.l.load),this.truncated&&this.showTruncatedDownloadButton(),this.workerSrc&&URL.revokeObjectURL(this.workerSrc)}},{key:"initHighlightJs",value:function(e){var t=this,n=new Blob(["onmessage=function(e){importScripts(e.data.highlightSrc);postMessage(self.hljs.highlightAuto(e.data.text).value)};"],{type:"application/javascript"});this.workerSrc=URL.createObjectURL(n);var i=new Worker(this.workerSrc);i.onmessage=function(e){t.finishLoading(e.data,!0)};var r=Object(f.g)(this.options.location),o=r("third-party/text/"+h._33+"/highlight.min.js");i.postMessage({highlightSrc:o,text:e})}},{key:"initPrint",value:function(){this.printPopup=new c.a(this.rootEl);var e=document.createElement("div");e.className="bp-print-check "+h.K,e.innerHTML=d.r.trim();var t=document.createElement("div");t.classList.add("bp-crawler"),t.innerHTML="\n            <div></div>\n            <div></div>\n            <div></div>".trim(),this.printPopup.addContent(t,!0),this.printPopup.addContent(e,!0),this.printPopup.loadingIndicator=t,this.printPopup.printCheckmark=e}},{key:"preparePrint",value:function(e){var t=this,n=Object(f.g)(this.options.location);this.printframe=Object(f.y)(this.textEl.outerHTML),e.forEach(function(e){t.printframe.contentDocument.head.appendChild(Object(f.j)(n(e)))}),setTimeout(function(){t.printPopup&&(t.printPopup.enableButton(),t.printPopup.messageEl.textContent="Ready to print.",t.printPopup.loadingIndicator.classList.add(h.K),t.printPopup.printCheckmark.classList.remove(h.K)),t.printReady=!0},5e3)}},{key:"printIframe",value:function(){this.printframe.contentWindow.focus(),"Explorer"===u.a.getName()||"Edge"===u.a.getName()?this.printframe.contentWindow.document.execCommand("print",!1,null):this.printframe.contentWindow.print()}},{key:"showTruncatedDownloadButton",value:function(){var e=document.createElement("div");e.classList.add("bp-text-truncated");var t=document.createElement("p");t.textContent="This file has been truncated due to size limits. Please download to view the whole file.";var n=document.createElement("button");n.className="bp-btn bp-btn-primary bp-btn-download",n.textContent="Download File",e.appendChild(t),e.appendChild(n),this.textEl.appendChild(e),n.addEventListener("click",this.download.bind(this))}},{key:"download",value:function(){this.emit(v.l.download)}}]),t}(l.a);t.a=_},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(34),s=n(14),l=n(15),u=n(0),c=n(6),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},p=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.zoomOut=n.zoomOut.bind(n),n.zoomIn=n.zoomIn.bind(n),n}return o(t,e),h(t,[{key:"setup",value:function(){this.isSetup||d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this)}},{key:"destroy",value:function(){this.controls&&"function"==typeof this.controls.destroy&&this.controls.destroy(),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"zoom",value:function(e){var t=this.containerEl.querySelector(".bp-text"),n=parseInt(t.style.fontSize,10)||100,i=0;"in"===e?i=n+10+"%":"out"===e&&(i=n-10+"%"),t.style.fontSize=i,this.emit("zoom",{zoom:i,canZoomIn:!0,canZoomOut:!0})}},{key:"zoomIn",value:function(){this.zoom("in")}},{key:"zoomOut",value:function(){this.zoom("out")}},{key:"load",value:function(){Object(l.e)(this.options.file,u._6)&&!this.getViewerOption("disableTextLayer")&&this.containerEl.classList.add(u.O),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this)}},{key:"loadUI",value:function(){this.controls=new a.a(this.containerEl),this.controls.add("Zoom out",this.zoomOut,"bp-text-zoom-out-icon",c.w),this.controls.add("Zoom in",this.zoomIn,"bp-text-zoom-in-icon",c.v),this.controls.add("Enter fullscreen",this.toggleFullscreen,"bp-enter-fullscreen-icon",c.l),this.controls.add("Exit fullscreen",this.toggleFullscreen,"bp-exit-fullscreen-icon",c.m)}},{key:"onKeydown",value:function(e){return!!this.controls&&("Shift++"===e?(this.zoomIn(),!0):"Shift+_"===e&&(this.zoomOut(),!0))}},{key:"resize",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this)}}]),t}(s.a);t.a=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(43),s=n.n(a),l=n(14),u=n(5),c=n(316),h=n(8),d=n(0),p=n(2),f=n(1),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},m=100,g=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.debouncedEmit=s()(function(e,t){n.emit(e,t)},m),n.errorHandler=n.errorHandler.bind(n),n.setTimeCode=n.setTimeCode.bind(n),n.progressHandler=n.progressHandler.bind(n),n.updateVolumeIcon=n.updateVolumeIcon.bind(n),n.playingHandler=n.playingHandler.bind(n),n.pauseHandler=n.pauseHandler.bind(n),n.resetPlayIcon=n.resetPlayIcon.bind(n),n.seekHandler=n.seekHandler.bind(n),n.loadeddataHandler=n.loadeddataHandler.bind(n),n.containerClickHandler=n.containerClickHandler.bind(n),n.handleTimeupdateFromMediaControls=n.handleTimeupdateFromMediaControls.bind(n),n.setVolume=n.setVolume.bind(n),n.togglePlay=n.togglePlay.bind(n),n.toggleMute=n.toggleMute.bind(n),n.handleRate=n.handleRate.bind(n),n.handleAutoplay=n.handleAutoplay.bind(n),n.mediaendHandler=n.mediaendHandler.bind(n),n}return o(t,e),v(t,[{key:"setup",value:function(){this.isSetup||(b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.wrapperEl=this.createViewer(document.createElement("div")),this.wrapperEl.className="bp-media",this.mediaContainerEl=this.wrapperEl.appendChild(document.createElement("div")),this.mediaContainerEl.setAttribute("tabindex","-1"),this.mediaContainerEl.className="bp-media-container",this.mediaContainerEl.addEventListener("click",this.containerClickHandler),this.loadTimeout=1e5,this.oldVolume=1,this.pauseListener=null,this.startTimeInSeconds=this.getStartTimeInSeconds(this.startAt))}},{key:"getStartTimeInSeconds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n=Object(f.r)(e,"value"),i=Object(f.r)(e,"unit");if(!n||!i)return 0;if("seconds"===i){if(t=parseFloat(n,10),Number.isNaN(t)||t<0)return 0}else"timestamp"===i&&(t=this.convertTimestampToSeconds(n));return t}},{key:"destroy",value:function(){this.mediaControls&&(this.mediaControls.removeAllListeners(),this.mediaControls.destroy());try{this.mediaEl&&(this.mediaEl.removeEventListener("timeupdate",this.setTimeCode),this.mediaEl.removeEventListener("progress",this.progressHandler),this.mediaEl.removeEventListener("volumechange",this.updateVolumeIcon),this.mediaEl.removeEventListener("playing",this.playingHandler),this.mediaEl.removeEventListener("pause",this.pauseHandler),this.mediaEl.removeEventListener("ended",this.resetPlayIcon),this.mediaEl.removeEventListener("seeked",this.seekHandler),this.mediaEl.removeEventListener("loadeddata",this.loadeddataHandler),this.mediaEl.removeEventListener("error",this.errorHandler),this.removePauseEventListener(),this.mediaEl.removeAttribute("src"),this.mediaEl.load()),this.mediaContainerEl&&(this.mediaContainerEl.removeChild(this.mediaEl),this.mediaContainerEl.removeEventListener("click",this.containerClickHandler))}catch(e){}b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"load",value:function(){var e=this;b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this);var n=this.options.representation.content.url_template;return this.mediaUrl=this.createContentUrlWithAuthParams(n),this.mediaEl.addEventListener("loadeddata",this.loadeddataHandler),this.mediaEl.addEventListener("error",this.errorHandler),this.mediaEl.setAttribute("title",this.options.file.name),u.a.isIOS()&&(this.mediaEl.autoplay=!0),this.getRepStatus().getPromise().then(function(){e.startLoadTimer(),e.mediaEl.src=e.mediaUrl,e.isAutoplayEnabled()&&e.autoplay()}).catch(this.handleAssetError)}},{key:"containerClickHandler",value:function(){this.mediaContainerEl.classList.remove(d.H)}},{key:"loadeddataHandler",value:function(){this.destroyed||(this.setMediaTime(this.startTimeInSeconds),this.handleVolume(),this.loaded=!0,this.emit(p.l.load),this.loadUI(),this.resize(),this.showMedia(),this.options.autoFocus&&this.mediaContainerEl.focus())}},{key:"showMedia",value:function(){this.wrapperEl.classList.add(d.Q)}},{key:"errorHandler",value:function(e){var t=Object(f.r)(e,"target.error.code"),n=t?{error_code:t}:{},i=new h.a(p.c.LOAD_MEDIA,"We're sorry, the preview didn't load. Please refresh the page.",n);this.isLoaded()?this.triggerError(i):this.handleDownloadError(i,this.mediaUrl)}},{key:"handleRate",value:function(){var e=this.cache.get("media-speed")-0;e&&this.mediaEl.playbackRate!==e&&this.mediaEl.playbackRate>0&&this.emit("ratechange",e),this.mediaEl.playbackRate=e}},{key:"handleVolume",value:function(){var e=this.cache.has("media-volume")?this.cache.get("media-volume"):1;0!==e&&(this.oldVolume=e),this.mediaEl.volume!==e&&(this.debouncedEmit("volume",e),this.mediaEl.volume=e)}},{key:"handleAutoplay",value:function(){this.emit("autoplay",this.isAutoplayEnabled())}},{key:"autoplay",value:function(){var e=this,t=this.mediaEl.play();t&&"function"==typeof t.then?t.then(function(){e.handleRate(),e.handleVolume()}).catch(function(){e.pause()}):this.mediaEl.autoplay=!0}},{key:"isAutoplayEnabled",value:function(){return"Enabled"===this.cache.get("media-autoplay")}},{key:"loadUI",value:function(){this.mediaControls=new c.a(this.mediaContainerEl,this.mediaEl,this.cache),this.addEventListenersForMediaControls(),this.addEventListenersForMediaElement()}},{key:"handleTimeupdateFromMediaControls",value:function(e){this.removePauseEventListener(),this.setMediaTime(e)}},{key:"addEventListenersForMediaControls",value:function(){this.mediaControls.addListener("timeupdate",this.handleTimeupdateFromMediaControls),this.mediaControls.addListener("volumeupdate",this.setVolume),this.mediaControls.addListener("toggleplayback",this.togglePlay),this.mediaControls.addListener("togglemute",this.toggleMute),this.mediaControls.addListener("ratechange",this.handleRate),this.mediaControls.addListener("autoplaychange",this.handleAutoplay)}},{key:"setTimeCode",value:function(){this.mediaControls.setTimeCode(this.mediaEl.currentTime)}},{key:"setMediaTime",value:function(e){this.mediaEl&&e>=0&&e<=this.mediaEl.duration&&(this.mediaEl.currentTime=e)}},{key:"setVolume",value:function(e){this.cache.set("media-volume",e,!0),this.handleVolume()}},{key:"updateVolumeIcon",value:function(){this.mediaControls.updateVolumeIcon(this.mediaEl.volume)}},{key:"playingHandler",value:function(){this.mediaControls.showPauseIcon(),this.hideLoadingIcon(),this.handleRate(),this.handleVolume(),this.emit("play")}},{key:"progressHandler",value:function(){this.mediaControls.updateProgress()}},{key:"pauseHandler",value:function(){this.mediaControls.showPlayIcon()}},{key:"seekHandler",value:function(){this.hideLoadingIcon(),this.debouncedEmit("seeked",this.mediaEl.currentTime)}},{key:"mediaendHandler",value:function(){this.isAutoplayEnabled()&&this.emit(p.l.mediaEndAutoplay)}},{key:"showPlayButton",value:function(){this.playButtonEl&&this.playButtonEl.classList.remove(d.K)}},{key:"hidePlayButton",value:function(){this.playButtonEl&&this.playButtonEl.classList.add(d.K)}},{key:"resetPlayIcon",value:function(){this.mediaControls.setTimeCode(0),this.hideLoadingIcon(),this.pauseHandler()}},{key:"removePauseEventListener",value:function(){this.mediaEl&&this.pauseListener&&this.mediaEl.removeEventListener("timeupdate",this.pauseListener)}},{key:"isValidTime",value:function(e){return"number"==typeof e&&e>=0&&e<=this.mediaEl.duration}},{key:"play",value:function(e,t){var n=this.isValidTime(e),i=this.isValidTime(t);this.removePauseEventListener(),n&&(i&&e<t&&this.pause(t),this.setMediaTime(e)),(0===arguments.length||n)&&(this.mediaEl.play(),this.handleRate(),this.handleVolume())}},{key:"pause",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.isValidTime(e);this.removePauseEventListener(),i?(this.pauseListener=function(){t.mediaEl.currentTime>e&&t.pause()},this.mediaEl.addEventListener("timeupdate",this.pauseListener)):(this.mediaEl.pause(),this.emit("pause",{userInitiated:n}))}},{key:"togglePlay",value:function(){this.mediaEl.paused?this.play():this.pause(void 0,!0)}},{key:"toggleMute",value:function(){this.mediaEl.volume?(this.oldVolume=this.mediaEl.volume,this.cache.set("media-volume",0,!0)):this.cache.set("media-volume",this.oldVolume,!0),this.handleVolume()}},{key:"hideLoadingIcon",value:function(){this.containerEl&&this.containerEl.classList.remove(d.M)}},{key:"showLoadingIcon",value:function(){this.containerEl&&this.mediaEl&&!this.mediaEl.paused&&!this.mediaEl.ended&&(this.containerEl.classList.add(d.M),this.hidePlayButton())}},{key:"addEventListenersForMediaElement",value:function(){this.mediaEl.addEventListener("timeupdate",this.setTimeCode),this.mediaEl.addEventListener("progress",this.progressHandler),this.mediaEl.addEventListener("volumechange",this.updateVolumeIcon),this.mediaEl.addEventListener("playing",this.playingHandler),this.mediaEl.addEventListener("pause",this.pauseHandler),this.mediaEl.addEventListener("ended",this.resetPlayIcon),this.mediaEl.addEventListener("seeked",this.seekHandler),this.mediaEl.addEventListener("ended",this.mediaendHandler)}},{key:"quickSeek",value:function(e){var t=this.mediaEl.currentTime+e;this.removePauseEventListener(),t=Math.max(0,Math.min(t,this.mediaEl.duration)),this.setMediaTime(t)}},{key:"increaseVolume",value:function(){var e=Math.round(100*(this.mediaEl.volume+.05))/100;e=Math.min(1,e),this.setVolume(e)}},{key:"decreaseVolume",value:function(){var e=Math.round(100*(this.mediaEl.volume-.05))/100;e=Math.max(0,e),this.setVolume(e)}},{key:"onKeydown",value:function(e){if(!this.mediaControls)return!1;switch(e.toLowerCase()){case"tab":case"shift+tab":return this.mediaContainerEl.classList.add(d.H),this.mediaControls.show(),!1;case"space":case"k":this.togglePlay();break;case"arrowleft":this.mediaControls.isVolumeScrubberFocused()?this.decreaseVolume():this.quickSeek(-5);break;case"j":this.quickSeek(-10);break;case"arrowright":this.mediaControls.isVolumeScrubberFocused()?this.increaseVolume():this.quickSeek(5);break;case"l":this.quickSeek(10);break;case"0":case"home":this.setMediaTime(0);break;case"arrowup":this.mediaControls.isTimeScrubberFocused()?this.quickSeek(5):this.increaseVolume();break;case"arrowdown":this.mediaControls.isTimeScrubberFocused()?this.quickSeek(-5):this.decreaseVolume();break;case"shift+>":this.mediaControls.increaseSpeed();break;case"shift+<":this.mediaControls.decreaseSpeed();break;case"f":case"shift+f":this.mediaControls.toggleFullscreen();break;case"m":case"shift+m":this.toggleMute();break;case"c":case"shift+c":this.mediaControls.toggleSubtitles();break;default:return!1}return this.mediaControls.show(),!0}},{key:"convertTimestampToSeconds",value:function(e){var t=0,n=/^([0-9]+(\.[0-9]*)?[smh]?){1,3}$/,i=/[0-9]+(\.[0-9]*)?h/,r=/[0-9]+(\.[0-9]*)?m/,o=/[0-9]+(\.[0-9]*)?s/;if(!e||!n.test(e))return t;var a=i.exec(e),s=r.exec(e),l=o.exec(e),u=function(e){var t=parseFloat(e[0].slice(0,-1),10);return Number.isNaN(t)?0:t};return a&&(t+=3600*u(a)),s&&(t+=60*u(s)),l&&(t+=u(l)),t}}]),t}(l.a);t.a=g},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(26),s=n.n(a),l=n(120),u=n(0),c=n(6),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},p=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.loadeddataHandler=n.loadeddataHandler.bind(n),n.pointerHandler=n.pointerHandler.bind(n),n.waitingHandler=n.waitingHandler.bind(n),n.playingHandler=n.playingHandler.bind(n),n.pauseHandler=n.pauseHandler.bind(n),n.resize=n.resize.bind(n),n}return o(t,e),h(t,[{key:"setup",value:function(){this.isSetup||(d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.mediaEl=this.mediaContainerEl.appendChild(document.createElement("video")),this.mediaEl.setAttribute("preload","auto"),this.mediaEl.setAttribute("playsinline",""),this.playButtonEl=this.mediaContainerEl.appendChild(document.createElement("div")),this.playButtonEl.classList.add("bp-media-play-button"),this.playButtonEl.classList.add(u.K),this.playButtonEl.innerHTML=c.q,this.lowerLights())}},{key:"destroy",value:function(){this.mediaEl&&(this.mediaEl.removeEventListener("mousemove",this.mousemoveHandler),this.mediaEl.removeEventListener("click",this.pointerHandler),this.mediaEl.removeEventListener("touchstart",this.pointerHandler),this.mediaEl.removeEventListener("waiting",this.waitingHandler)),this.playButtonEl&&this.playButtonEl.removeEventListener("click",this.togglePlay),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"loadeddataHandler",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadeddataHandler",this).call(this),this.showPlayButton(),this.mediaControls.show()}},{key:"loadUI",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadUI",this).call(this)}},{key:"pointerHandler",value:function(e){"touchstart"===e.type?(e.preventDefault(),e.stopPropagation(),this.mediaControls.toggle()):"click"===e.type&&this.togglePlay()}},{key:"playingHandler",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"playingHandler",this).call(this),this.hidePlayButton()}},{key:"pauseHandler",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pauseHandler",this).call(this),this.showPlayButton(),this.hideLoadingIcon()}},{key:"waitingHandler",value:function(){this.containerEl&&(this.containerEl.classList.add(u.M),this.hidePlayButton())}},{key:"addEventListenersForMediaControls",value:function(){var e=this;d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addEventListenersForMediaControls",this).call(this),this.mediaControls.on("togglefullscreen",function(){e.toggleFullscreen()})}},{key:"addEventListenersForMediaElement",value:function(){var e=this;d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addEventListenersForMediaElement",this).call(this),this.mousemoveHandler=s()(function(){e.mediaControls.show()},1e3),this.mediaEl.addEventListener("mousemove",this.mousemoveHandler),this.hasTouch&&this.mediaEl.addEventListener("touchstart",this.pointerHandler),this.mediaEl.addEventListener("click",this.pointerHandler),this.mediaEl.addEventListener("waiting",this.waitingHandler),this.playButtonEl.addEventListener("click",this.togglePlay)}},{key:"showLoadingIcon",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"showLoadingIcon",this).call(this)}},{key:"resize",value:function(){this.mediaControls&&this.mediaControls.resizeTimeScrubber(),d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this)}},{key:"allowNavigationArrows",value:function(){return!this.mediaControls||!this.mediaControls.isSettingsVisible()}},{key:"lowerLights",value:function(){this.rootEl&&this.rootEl.classList.add(u.G)}},{key:"onKeydown",value:function(e){return d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onKeydown",this).call(this,e)}}]),t}(l.a);t.a=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(9),s=n(121),l=n(8),u=n(35),c=n(1),h=n(15),d=n(0),p=n(324),f=n(2),v=n(325),b=(n.n(v),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),m=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},g=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.loadeddataHandler=n.loadeddataHandler.bind(n),n.adaptationHandler=n.adaptationHandler.bind(n),n.shakaErrorHandler=n.shakaErrorHandler.bind(n),n.requestFilter=n.requestFilter.bind(n),n.handleQuality=n.handleQuality.bind(n),n.handleSubtitle=n.handleSubtitle.bind(n),n.handleAudioTrack=n.handleAudioTrack.bind(n),n.getBandwidthInterval=n.getBandwidthInterval.bind(n),n}return o(t,e),b(t,[{key:"setup",value:function(){this.isSetup||(m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.bandwidthHistory=[],this.switchHistory=[],this.hdVideoId=-1,this.sdVideoId=-1,this.textTracks=[],this.audioTracks=[],this.wrapperEl.classList.add("bp-media-dash"))}},{key:"destroy",value:function(){this.emit("bandwidthhistory",this.bandwidthHistory),this.emit("switchhistory",this.switchHistory),this.filmstripStatus&&this.filmstripStatus.destroy(),clearInterval(this.statsIntervalId),this.player&&(this.player.destroy(),this.player=void 0),this.mediaControls&&(this.mediaControls.removeListener("qualitychange",this.handleQuality),this.mediaControls.removeListener("subtitlechange",this.handleSubtitle),this.mediaControls.removeListener("audiochange",this.handleAudioTrack)),this.removeStats(),m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"load",value:function(){var e=this;return this.mediaUrl=this.options.representation.content.url_template,this.watermarkCacheBust=Date.now(),this.mediaEl.addEventListener("loadeddata",this.loadeddataHandler),Promise.all([this.loadAssets(this.getJSAssets()),this.getRepStatus().getPromise()]).then(function(){e.loadDashPlayer(),e.resetLoadTimeout()}).catch(this.handleAssetError)}},{key:"prefetch",value:function(e){var t=e.assets,n=void 0===t||t,i=e.content,r=void 0===i||i;n&&this.prefetchAssets(this.getJSAssets());var o=this.options.representation;if(r&&this.isRepresentationReady(o)){var s=o.content.url_template;a.a.get(this.createContentUrlWithAuthParams(s,"manifest.mpd"),{type:"document"})}}},{key:"getJSAssets",value:function(){return["third-party/media/"+d.Y+"/shaka-player.compiled.js"]}},{key:"loadDashPlayer",value:function(){shaka.polyfill.installAll(),this.adapting=!0,this.player=new shaka.Player(this.mediaEl),this.player.addEventListener("adaptation",this.adaptationHandler),this.player.addEventListener("error",this.shakaErrorHandler),this.player.configure({abr:{enabled:!1},streaming:{bufferingGoal:60,retryParameters:{timeout:0,maxAttempts:100,baseDelay:500,backoffFactor:2,fuzzFactor:.5}}}),this.player.getNetworkingEngine().registerRequestFilter(this.requestFilter),this.startLoadTimer(),this.player.load(this.mediaUrl,this.startTimeInSeconds).catch(this.shakaErrorHandler)}},{key:"requestFilter",value:function(e,t){var n=this,i=e===shaka.net.NetworkingEngine.RequestType.MANIFEST?"manifest.mpd":void 0;t.uris=t.uris.map(function(e){var t=n.createContentUrlWithAuthParams(e,i);return"manifest.mpd"!==i&&n.options.file.watermark_info.is_watermarked&&(t=Object(c.e)(t,{watermark_content:n.watermarkCacheBust})),t})}},{key:"getActiveTrack",value:function(){return this.player.getVariantTracks().find(function(e){return e.active})}},{key:"showLoadingIcon",value:function(e){this.getActiveTrack().id!==e&&m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"showLoadingIcon",this).call(this)}},{key:"enableVideoId",value:function(e){var t=this.player.getVariantTracks(),n=this.getActiveTrack(),i=t.find(function(t){return t.videoId===e&&t.audioId===n.audioId});i&&i.id!==n.id&&(this.showLoadingIcon(i.id),this.player.selectVariantTrack(i,!0))}},{key:"enableAudioId",value:function(e){var t=this.player.getVariantTracks(),n=this.getActiveTrack(),i=t.find(function(t){return t.roles[0]===e&&t.videoId===n.videoId});i&&i.audioId!==n.audioId&&(this.showLoadingIcon(i.id),this.player.selectVariantTrack(i,!0))}},{key:"enableAdaptation",value:function(e){this.adapting=e,this.player.configure({abr:{enabled:e}})}},{key:"handleSubtitle",value:function(){var e=parseInt(this.cache.get("media-subtitles"),10);if(this.autoCaptionDisplayer&&0===e)this.autoCaptionDisplayer.setTextVisibility(!0),this.emit("subtitlechange","Auto-Generated");else if(void 0!==this.textTracks[e]){var t=this.textTracks[e];this.player.selectTextTrack(t),this.player.setTextTrackVisibility(!0),this.emit("subtitlechange",t.language)}else this.autoCaptionDisplayer&&this.autoCaptionDisplayer.setTextVisibility(!1),this.player.setTextTrackVisibility(!1),this.emit("subtitlechange",null)}},{key:"handleAudioTrack",value:function(){var e=parseInt(this.cache.get("media-audiotracks"),10),t=this.audioTracks[e];void 0!==t&&this.enableAudioId(t.role)}},{key:"handleQuality",value:function(){var e=-1!==this.hdVideoId?this.cache.get("media-quality"):"sd";switch(e){case"hd":this.enableAdaptation(!1),this.enableVideoId(this.hdVideoId);break;case"sd":this.enableAdaptation(!1),this.enableVideoId(this.sdVideoId);break;case"auto":default:this.enableAdaptation(!0)}this.showGearHdIcon(this.getActiveTrack()),e&&this.emit("qualitychange",e)}},{key:"showGearHdIcon",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).videoId===this.hdVideoId?this.wrapperEl.classList.add("bp-media-controls-is-hd"):this.wrapperEl.classList.remove("bp-media-controls-is-hd")}},{key:"adaptationHandler",value:function(){var e=this.getActiveTrack();this.showGearHdIcon(e),this.isLoaded()&&(this.adapting&&this.emit("adaptation",e.bandwidth),this.hideLoadingIcon())}},{key:"shakaErrorHandler",value:function(e){var t=e.detail?e.detail:e,n=new l.a(f.c.SHAKA,"We're sorry, the preview didn't load. Please refresh the page.",{code:t.code,severity:t.severity},"Shaka error. Code = "+t.code+", Category = "+t.category+", Severity = "+t.severity+", Data = "+t.data.toString());if(t.severity>1){if(t.code===shaka.util.Error.Code.HTTP_ERROR){var i=t.data[0];return void this.handleDownloadError(n,i)}this.triggerError(n)}}},{key:"addEventListenersForMediaControls",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addEventListenersForMediaControls",this).call(this),this.mediaControls.addListener("qualitychange",this.handleQuality),this.mediaControls.addListener("subtitlechange",this.handleSubtitle),this.mediaControls.addListener("audiochange",this.handleAudioTrack)}},{key:"loadSubtitles",value:function(){this.textTracks=this.player.getTextTracks().sort(function(e,t){return e.id-t.id}),this.textTracks.length>0&&this.mediaControls.initSubtitles(this.textTracks.map(function(e){return Object(p.a)(e.language)||e.language}),Object(p.a)(this.options.location.locale.substring(0,2)))}},{key:"loadAutoGeneratedCaptions",value:function(e){if(this.transcript!==e){this.transcript=e;var t=this.createTextCues(e);if(t.length)if(this.autoCaptionDisplayer){var n=this.autoCaptionDisplayer.isTextVisible();this.autoCaptionDisplayer.destroy(),this.setupAutoCaptionDisplayer(t),this.autoCaptionDisplayer.setTextVisibility(n)}else this.setupAutoCaptionDisplayer(t),this.mediaControls.setLabel(this.mediaControls.subtitlesButtonEl,"Auto-Generated Captions"),this.mediaControls.initSubtitles(["Auto-Generated"],Object(p.a)(this.options.location.locale.substring(0,2)))}}},{key:"createTextCues",value:function(e){return Object(c.r)(e,"entries",[]).map(function(e){var t=e.appears,n=void 0===t?[{}]:t,i=e.text,r=void 0===i?"":i,o=Array.isArray(n)&&n.length>0?n[0]:{},a=o.start,s=void 0===a?0:a,l=o.end,u=void 0===l?0:l;return new shaka.text.Cue(s,u,r)})}},{key:"setupAutoCaptionDisplayer",value:function(e){this.autoCaptionDisplayer=new shaka.text.SimpleTextDisplayer(this.mediaEl),this.autoCaptionDisplayer.append(e),this.player.configure({textDisplayFactory:this.autoCaptionDisplayer})}},{key:"loadAlternateAudio",value:function(){var e=this.player.getVariantTracks().sort(function(e,t){return e.audioId-t.audioId}),t=[],n=[],i=0;for(i=0;i<e.length;i++){var r=e[i];t.indexOf(r.audioId)<0&&(t.push(r.audioId),n.push(r))}if(this.audioTracks=n.map(function(e){return{language:e.language,role:e.roles[0]}}),this.audioTracks.length>1){var o=this.audioTracks.map(function(e){return Object(p.a)(e.language)||e.language});this.mediaControls.initAlternateAudio(o)}}},{key:"loadeddataHandler",value:function(){this.isDestroyed()||(this.isAutoplayEnabled()&&this.autoplay(),this.calculateVideoDimensions(),this.loadUI(),this.loadFilmStrip(),this.resize(),this.handleVolume(),this.startBandwidthTracking(),this.loadSubtitles(),this.loadAlternateAudio(),this.showPlayButton(),this.loaded=!0,this.emit(f.l.load),this.showMedia(),this.mediaControls.show(),this.options.autoFocus&&this.mediaContainerEl.focus())}},{key:"loadUI",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadUI",this).call(this),-1!==this.hdVideoId&&this.mediaControls.enableHDSettings()}},{key:"loadFilmStrip",value:function(){var e=Object(h.h)(this.options.file,"filmstrip");if(e&&e.metadata&&e.metadata.interval>0){var t=this.createContentUrlWithAuthParams(e.content.url_template);this.filmstripStatus=this.getRepStatus(e),this.mediaControls.initFilmstrip(t,this.filmstripStatus,this.aspect,e.metadata.interval)}}},{key:"calculateVideoDimensions",value:function(){var e=this.player.getVariantTracks(),t=e.reduce(function(e,t){return e.width>t.width?e:t}),n=e.reduce(function(e,t){return e.width<t.width?e:t});this.player.isAudioOnly()?(this.videoWidth=854,this.videoHeight=480):(this.videoWidth=t.width,this.videoHeight=t.height,this.sdVideoId=n.videoId,t.videoId!==n.videoId&&(this.hdVideoId=t.videoId)),this.aspect=this.videoWidth/this.videoHeight}},{key:"resize",value:function(){var e=this.videoWidth||0,n=this.videoHeight||0,i={height:this.wrapperEl.clientHeight,width:this.wrapperEl.clientWidth};if(e<420&&(e=420,n=e/this.aspect),this.mediaEl.style.width="",!u.a.isFullscreen(this.containerEl)&&e<=i.width&&n<=i.height)this.aspect>=1?this.mediaEl.style.width=e+"px":this.mediaEl.style.width=n*this.aspect+"px";else{var r=(i.height-n)/n,o=e+e*r;n+n*((i.width-e)/e)<=i.height?this.mediaEl.style.width=i.width+"px":o<=i.width&&(this.mediaEl.style.width=i.height*this.aspect+"px")}m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this)}},{key:"getBandwidthInterval",value:function(){if(!this.isDestroyed()&&this.player&&this.player.getStats&&!this.mediaEl.paused&&!this.mediaEl.ended){var e=this.player.getStats(),t=e.estimatedBandwidth,n=e.switchHistory,i=e.streamBandwidth;this.bandwidthHistory.push({bandwidth:t,stream:i}),this.switchHistory.push({switchHistory:n,stream:i}),this.statsEl&&(this.statsEl.textContent=Math.round(t/1e3)+" kbps")}}},{key:"startBandwidthTracking",value:function(){this.statsIntervalId=setInterval(this.getBandwidthInterval,3e3)}},{key:"removeStats",value:function(){this.statsEl&&this.mediaContainerEl&&this.mediaContainerEl.removeChild(this.statsEl),this.statsEl=void 0}},{key:"toggleStats",value:function(){if(this.statsEl)return void this.removeStats();this.statsEl=this.mediaContainerEl.appendChild(document.createElement("div")),this.statsEl.className="bp-media-dash-stats",this.statsEl.textContent="?!? kbps"}},{key:"onKeydown",value:function(e){return"Shift+I"===e&&this.player?(this.toggleStats(),!0):m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onKeydown",this).call(this,e)}}]),t}(s.a);t.a=g},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(26),l=n.n(s),u=n(9),c=n(14),h=n(5),d=n(34),p=n(113),f=n(334),v=n(68),b=n(64),m=n(8),g=n(335),y=n(0),E=n(15),w=n(1),_=n(6),O=n(338),k=n(2),P=n(44),S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},L=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),x=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},C=this.isMobile?500:250,j=[k.k.CLOSE,k.k.NAVIGATE,k.k.OPEN],T=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleAssetAndRepLoad=n.handleAssetAndRepLoad.bind(n),n.print=n.print.bind(n),n.setPage=n.setPage.bind(n),n.zoomIn=n.zoomIn.bind(n),n.zoomOut=n.zoomOut.bind(n),n.pagerenderedHandler=n.pagerenderedHandler.bind(n),n.pagechangeHandler=n.pagechangeHandler.bind(n),n.pagesinitHandler=n.pagesinitHandler.bind(n),n.throttledScrollHandler=n.getScrollHandler().bind(n),n.pinchToZoomStartHandler=n.pinchToZoomStartHandler.bind(n),n.pinchToZoomChangeHandler=n.pinchToZoomChangeHandler.bind(n),n.pinchToZoomEndHandler=n.pinchToZoomEndHandler.bind(n),n.emitMetric=n.emitMetric.bind(n),n.toggleThumbnails=n.toggleThumbnails.bind(n),n.onThumbnailSelectHandler=n.onThumbnailSelectHandler.bind(n),n}return a(t,e),L(t,[{key:"setup",value:function(){if(!this.isSetup){if(x(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.docEl=this.createViewer(document.createElement("div")),this.docEl.classList.add("bp-doc"),this.docEl.tabIndex="0","Safari"===h.a.getName()&&this.docEl.classList.add("is-safari"),this.isMobile){var e=document.createElement("meta");e.setAttribute("name","viewport"),e.setAttribute("content","width=device-width, initial-scale=1, user-scalable=no"),document.getElementsByTagName("head")[0].appendChild(e)}this.viewerEl=this.docEl.appendChild(document.createElement("div")),this.viewerEl.classList.add("pdfViewer"),this.loadTimeout=18e4,this.startPageNum=this.getStartPage(this.startAt),this.options.enableThumbnailsSidebar&&(this.thumbnailsSidebarEl=document.createElement("div"),this.thumbnailsSidebarEl.className=""+y.B,this.thumbnailsSidebarEl.setAttribute("data-testid","thumbnails-sidebar"),this.thumbnailsSidebarEl.tabIndex=0,this.rootEl.insertBefore(this.thumbnailsSidebarEl,this.containerEl))}}},{key:"destroy",value:function(){if(this.unbindDOMListeners(),this.printBlob=null,this.printURL&&URL.revokeObjectURL(this.printURL),this.pageControls&&this.pageControls.removeListener("pagechange",this.setPage),this.controls&&"function"==typeof this.controls.destroy&&this.controls.destroy(),this.findBar&&(this.findBar.destroy(),this.findBar.removeListener(k.l.metric,this.emitMetric)),this.pdfLoadingTask)try{this.pdfLoadingTask.destroy()}catch(e){}this.pdfViewer&&(this.pdfViewer.cleanup(),this.pdfViewer.pdfDocument&&this.pdfViewer.pdfDocument.destroy()),this.printPopup&&this.printPopup.destroy(),this.thumbnailsSidebar&&this.thumbnailsSidebar.destroy(),this.thumbnailsSidebarEl&&(this.rootEl.classList.remove(y.C),this.thumbnailsSidebarEl.remove(),this.thumbnailsSidebarEl=null),x(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"getStartPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0,n=e.unit,i=e.value;return i&&n?"pages"!==n||(t=parseInt(i,10))&&!(t<1)?t:void 0:t}},{key:"prefetch",value:function(e){var t=e.assets,n=void 0===t||t,i=e.preload,r=void 0===i||i,o=e.content,a=void 0===o||o,s=this.options,l=s.file,c=s.representation,h=l&&l.watermark_info&&l.watermark_info.is_watermarked;if(n&&(this.prefetchAssets(O.b,O.a),this.prefetchAssets(O.c,[],!0)),r&&!h){var d=Object(E.h)(l,y._8);if(d&&this.isRepresentationReady(d)){var p=d.content.url_template;u.a.get(this.createContentUrlWithAuthParams(p),{type:"blob"})}}if(a&&!h&&this.isRepresentationReady(c)){var f=c.content.url_template;u.a.get(this.createContentUrlWithAuthParams(f),{type:"document"})}}},{key:"showPreload",value:function(){var e=this.options.file,t=e&&e.watermark_info&&e.watermark_info.is_watermarked;if(!(!this.preloader||t||this.startPageNum&&1!==this.startPageNum||1!==this.getCachedPage())){var n=Object(E.h)(e,y._8);if(n&&this.getViewerOption("preload")&&b.a.getStatus(n)===y._30){var i=n.content.url_template,r=this.createContentUrlWithAuthParams(i);this.startPreloadTimer(),this.preloader.showPreload(r,this.containerEl)}}}},{key:"hidePreload",value:function(){this.preloader&&this.preloader.hidePreload()}},{key:"load",value:function(){x(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this),this.showPreload();var e=this.options.representation.content.url_template;return this.pdfUrl=this.createContentUrlWithAuthParams(e),Promise.all([this.loadAssets(O.b,O.a),this.getRepStatus().getPromise()]).then(this.handleAssetAndRepLoad).catch(this.handleAssetError)}},{key:"handleAssetAndRepLoad",value:function(){this.setupPdfjs(),this.initViewer(this.pdfUrl),this.initPrint(),this.initFind(),x(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleAssetAndRepLoad",this).call(this)}},{key:"initFind",value:function(){this.findBarEl=this.containerEl.appendChild(document.createElement("div")),this.findBarEl.classList.add(y.f),this.findController=new PDFJS.PDFFindController({pdfViewer:this.pdfViewer}),this.pdfViewer.setFindController(this.findController);var e=Object(E.e)(this.options.file,y._6);this.getViewerOption("disableFindBar")||(this.findBar=new f.a(this.findBarEl,this.findController,e),this.findBar.addListener(k.l.metric,this.emitMetric))}},{key:"find",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.findBar&&(this.setPage(1),this.findBar.setFindFieldElValue(e),this.findBar.findFieldHandler(),t&&this.findBar.open())}},{key:"print",value:function(){var e=this;if(!this.printBlob)return this.fetchPrintBlob(this.pdfUrl).then(this.print),void(this.printDialogTimeout=setTimeout(function(){e.printPopup.show("Preparing to print...","Print",function(){e.printPopup.hide(),e.browserPrint()}),e.printPopup.disableButton(),e.printDialogTimeout=null},500));this.printDialogTimeout||!this.printPopup.isVisible()?(clearTimeout(this.printDialogTimeout),this.browserPrint()):(this.printPopup.enableButton(),this.printPopup.messageEl.textContent="Ready to print.",this.printPopup.loadingIndicator.classList.add(y.K),this.printPopup.printCheckmark.classList.remove(y.K))}},{key:"previousPage",value:function(){this.setPage(this.pdfViewer.currentPageNumber-1)}},{key:"nextPage",value:function(){this.setPage(this.pdfViewer.currentPageNumber+1)}},{key:"setPage",value:function(e){var t=parseInt(e,10);!t||t<1||t>this.pdfViewer.pagesCount||(this.pdfViewer.currentPageNumber=t,this.cachePage(this.pdfViewer.currentPageNumber),this.thumbnailsSidebar&&this.thumbnailsSidebar.setCurrentPage(t))}},{key:"getCachedPage",value:function(){var e=1;if(this.cache.has("doc-current-page-map")){e=this.cache.get("doc-current-page-map")[this.options.file.id]||e}return e}},{key:"cachePage",value:function(e){var t={};this.cache.has("doc-current-page-map")&&(t=this.cache.get("doc-current-page-map")),t[this.options.file.id]=e,this.cache.set("doc-current-page-map",t,!0)}},{key:"zoomIn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=e,n=this.pdfViewer.currentScale;do{n=(1.1*n).toFixed(3),n=Math.min(10,n),t-=1}while(t>0&&n<10);this.pdfViewer.currentScale!==n&&this.emit("zoom",{zoom:n,canZoomOut:!0,canZoomIn:n<10}),this.pdfViewer.currentScaleValue=n}},{key:"zoomOut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=e,n=this.pdfViewer.currentScale;do{n=(n/1.1).toFixed(3),n=Math.max(.1,n),t-=1}while(t>0&&n>.1);this.pdfViewer.currentScale!==n&&this.emit("zoom",{zoom:n,canZoomOut:n>.1,canZoomIn:!0}),this.pdfViewer.currentScaleValue=n}},{key:"onKeydown",value:function(e,t){switch(e){case"ArrowLeft":this.previousPage();break;case"ArrowRight":this.nextPage();break;case"[":this.previousPage();break;case"]":this.nextPage();break;default:return!!this.findBar&&this.findBar.onKeydown(t)}return!0}},{key:"emitMetric",value:function(e){var n=e.name,i=e.data;x(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emitMetric",this).call(this,n,i)}},{key:"initViewer",value:function(e){var t=this;this.bindDOMListeners(),this.pdfViewer=this.initPdfViewer();var n=this.getViewerOption("rangeChunkSize");this.encoding=PDFJS.disableRange?y.V.GZIP:void 0,n||(n="en-US"===this.options.location.locale?1048576:524288);var r=e;this.encoding&&(r=Object(w.e)(r,i({},y._10,this.encoding)));var o={url:r,rangeChunkSize:n};return h.a.isIOS()&&(o.httpHeaders={"If-None-Match":"webkit-no-cache"}),this.startLoadTimer(),this.pdfLoadingTask=PDFJS.getDocument(o),this.pdfLoadingTask.then(function(n){t.pdfViewer.setDocument(n),t.shouldThumbnailsBeToggled()&&(t.rootEl.classList.add(y.C),t.emit(k.l.thumbnailsOpen),t.resize());var i=t.pdfViewer.linkService;i instanceof PDFJS.PDFLinkService&&(i.setDocument(n,e),i.setViewer(t.pdfViewer))}).catch(function(n){var i=n.status,r=n.message,o=202===i?new m.a(k.c.DELETED_REPS,"We're sorry, the preview didn't load. Please refresh the page.",{isRepDeleted:!0},r):new m.a(k.c.CONTENT_DOWNLOAD,"We're sorry, the preview didn't load. This document may be protected.",r);t.handleDownloadError(o,e)})}},{key:"initPdfViewer",value:function(){return new PDFJS.PDFViewer({container:this.docEl,linkService:new PDFJS.PDFLinkService,enhanceTextSelection:!this.isMobile})}},{key:"resize",value:function(){if(!this.pdfViewer||!this.somePageRendered)return void(this.preloader&&this.preloader.resize());var e=this.pdfViewer.currentPageNumber;this.pdfViewer.currentScaleValue=this.pdfViewer.currentScaleValue||"auto",this.pdfViewer.update(),this.setPage(e),this.thumbnailsSidebar&&this.thumbnailsSidebar.resize(),x(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this)}},{key:"startPreloadTimer",value:function(){var e=this.options.file,t=P.a.createTag(e.id,k.d.preloadTime);P.a.start(t)}},{key:"stopPreloadTimer",value:function(){var e=this.options.file,t=P.a.createTag(e.id,k.d.preloadTime),n=P.a.get(t);n&&n.start&&(P.a.stop(t),this.emitMetric({name:k.d.previewPreloadEvent,data:n.elapsed}),P.a.reset(t))}},{key:"onPreload",value:function(){this.options.logger.setPreloaded(),this.stopPreloadTimer(),this.resetLoadTimeout()}},{key:"setupPdfjs",value:function(){var e=this.options,t=e.file,n=e.location,i=t.size,r=t.watermark_info,o=Object(w.g)(n);PDFJS.workerSrc=o("third-party/doc/"+y.U+"/pdf.worker.min.js"),PDFJS.imageResourcesPath=o("third-party/doc/"+y.U+"/images/"),PDFJS.cMapUrl=n.staticBaseURI+"third-party/doc/"+y.U+"/cmaps/",PDFJS.cMapPacked=!0,PDFJS.externalLinkTarget=PDFJS.LinkTarget.BLANK,PDFJS.disableStream=!0,PDFJS.disableFontFace=PDFJS.disableFontFace||h.a.hasFontIssue(),PDFJS.disableRange="en-US"!==n.locale&&i<26214400,PDFJS.disableRange=PDFJS.disableRange||r&&r.is_watermarked,PDFJS.disableTextLayer=!Object(E.e)(t,y._6)||!!this.getViewerOption("disableTextLayer"),PDFJS.maxCanvasPixels=this.isMobile?2949120:PDFJS.maxCanvasPixels,PDFJS.disableCreateObjectURL=!1}},{key:"initPrint",value:function(){this.printPopup=new v.a(this.rootEl);var e=document.createElement("div");e.className="bp-print-check "+y.K,e.innerHTML=_.r.trim();var t=document.createElement("div");t.classList.add(y.F),t.innerHTML="\n            <div></div>\n            <div></div>\n            <div></div>".trim(),this.printPopup.addContent(t,!0),this.printPopup.addContent(e,!0),this.printPopup.loadingIndicator=t,this.printPopup.printCheckmark=e}},{key:"setupPageIds",value:function(){var e=this.containerEl.querySelectorAll(".page");[].forEach.call(e,function(e){var t=e.dataset.pageNumber;t&&(e.id="bp-page-"+t)})}},{key:"fetchPrintBlob",value:function(e){var t=this;return u.a.get(e,{type:"blob"}).then(function(e){t.printBlob=e})}},{key:"browserPrint",value:function(){if("function"==typeof window.navigator.msSaveOrOpenBlob){window.navigator.msSaveOrOpenBlob(this.printBlob,"print.pdf")?this.emit("printsuccess"):this.emit("printerror")}else{this.printURL||(this.printURL=URL.createObjectURL(this.printBlob));var e=window.open(this.printURL);if(e&&"function"==typeof e.print){var t=h.a.getName();"Chrome"===t?e.addEventListener("load",function(){e.print()}):"Safari"===t&&setTimeout(function(){e.print()},1e3)}!e||e.closed||void 0===e.closed?this.emit("printerror"):this.emit("printsuccess")}}},{key:"loadUI",value:function(){this.controls=new d.a(this.containerEl),this.pageControls=new p.a(this.controls,this.docEl),this.pageControls.addListener("pagechange",this.setPage),this.bindControlListeners()}},{key:"bindDOMListeners",value:function(){this.docEl.addEventListener("pagesinit",this.pagesinitHandler),this.docEl.addEventListener("pagerendered",this.pagerenderedHandler),this.docEl.addEventListener("pagechange",this.pagechangeHandler),this.docEl.addEventListener("scroll",this.throttledScrollHandler),this.hasTouch&&(this.docEl.addEventListener("touchstart",this.pinchToZoomStartHandler),this.docEl.addEventListener("touchmove",this.pinchToZoomChangeHandler),this.docEl.addEventListener("touchend",this.pinchToZoomEndHandler))}},{key:"unbindDOMListeners",value:function(){this.docEl&&(this.docEl.removeEventListener("pagesinit",this.pagesinitHandler),this.docEl.removeEventListener("pagerendered",this.pagerenderedHandler),this.docEl.removeEventListener("pagechange",this.pagechangeHandler),this.docEl.removeEventListener("scroll",this.throttledScrollHandler),this.hasTouch&&(this.docEl.removeEventListener("touchstart",this.pinchToZoomStartHandler),this.docEl.removeEventListener("touchmove",this.pinchToZoomChangeHandler),this.docEl.removeEventListener("touchend",this.pinchToZoomEndHandler)))}},{key:"bindControlListeners",value:function(){this.options.enableThumbnailsSidebar&&this.controls.add("Toggle thumbnails",this.toggleThumbnails,"bp-toggle-thumbnails-icon",_.u),this.controls.add("Zoom out",this.zoomOut,"bp-doc-zoom-out-icon",_.w),this.controls.add("Zoom in",this.zoomIn,"bp-doc-zoom-in-icon",_.v),this.pageControls.add(this.pdfViewer.currentPageNumber,this.pdfViewer.pagesCount),this.controls.add("Enter fullscreen",this.toggleFullscreen,"bp-enter-fullscreen-icon",_.l),this.controls.add("Exit fullscreen",this.toggleFullscreen,"bp-exit-fullscreen-icon",_.m)}},{key:"pagesinitHandler",value:function(){this.pdfViewer.currentScaleValue="auto",this.loadUI();var e=this.pdfViewer,t=e.pagesCount,n=e.currentScale,i=this.startPageNum||this.getCachedPage();this.setPage(i),this.docEl.classList.add(y.N),this.loaded||(this.loaded=!0,this.emit(k.l.load,{encoding:this.encoding,numPages:t,endProgress:!1,scale:n}),this.setupPageIds())}},{key:"initThumbnails",value:function(){this.thumbnailsSidebar=new g.a(this.thumbnailsSidebarEl,this.pdfViewer),this.thumbnailsSidebar.init({currentPage:this.pdfViewer.currentPageNumber,isOpen:this.shouldThumbnailsBeToggled(),onSelect:this.onThumbnailSelectHandler})}},{key:"onThumbnailSelectHandler",value:function(e){this.emitMetric({name:k.k.NAVIGATE,data:e}),this.setPage(e)}},{key:"pagerenderedHandler",value:function(e){var t=e.detail?e.detail.pageNumber:void 0;t&&(this.emit("pagerender",t),this.emit("scale",{scale:this.pdfViewer.currentScale,pageNum:t}),this.somePageRendered||(this.hidePreload(),this.emit(k.l.progressEnd),this.somePageRendered=!0,this.options.enableThumbnailsSidebar&&(this.initThumbnails(),this.resize())))}},{key:"pagechangeHandler",value:function(e){var t=e.pageNumber;this.pageControls.updateCurrentPage(t),this.thumbnailsSidebar&&this.thumbnailsSidebar.setCurrentPage(t),this.loaded&&this.cachePage(t),this.emit("pagefocus",t)}},{key:"handleFullscreenEnter",value:function(){this.pdfViewer.currentScaleValue="page-fit",x(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleFullscreenEnter",this).call(this)}},{key:"handleFullscreenExit",value:function(){this.pdfViewer.currentScaleValue="auto",x(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleFullscreenExit",this).call(this)}},{key:"getScrollHandler",value:function(){var e=this;return l()(function(){e.scrollTimer&&clearTimeout(e.scrollTimer),e.scrollStarted||(e.emit("scrollstart",{scrollTop:e.docEl.scrollTop,scrollLeft:e.docEl.scrollLeft}),e.scrollStarted=!0),e.scrollTimer=setTimeout(function(){e.emit("scrollend",{scrollTop:e.docEl.scrollTop,scrollLeft:e.docEl.scrollLeft}),e.scrollStarted=!1},C)},200)}},{key:"pinchToZoomStartHandler",value:function(e){if(!(e.touches.length<2)){e.preventDefault(),e.stopPropagation(),this.isPinching=!0;var t=e.pageX&&e.pageY?[e.pageX,e.pageY]:Object(w.q)(e.touches[0].pageX,e.touches[0].pageY,e.touches[1].pageX,e.touches[1].pageY),n=this.pdfViewer._getVisiblePages();this.pinchPage=Object(w.n)(this.docEl.scrollLeft+t[0],this.docEl.scrollTop+t[1],n),this.scaledXOffset=this.docEl.scrollLeft-this.pinchPage.offsetLeft+t[0],this.scaledYOffset=this.docEl.scrollTop-this.pinchPage.offsetTop+t[1]+15,this.pinchPage.style["transform-origin"]=this.scaledXOffset+"px "+this.scaledYOffset+"px",this.originalXOffset=t[0],this.originalYOffset=t[1],this.originalDistance=Object(w.o)(e.touches[0].pageX,e.touches[0].pageY,e.touches[1].pageX,e.touches[1].pageY)}}},{key:"pinchToZoomChangeHandler",value:function(e){if(this.isPinching){var t=e.scale?e.scale:Object(w.o)(e.touches[0].pageX,e.touches[0].pageY,e.touches[1].pageX,e.touches[1].pageY)/this.originalDistance,n=this.pdfViewer.currentScale*t;1===t||Math.abs(this.pinchScale-t)<.01||n>=10||n<=.1||t>3||t<.25||(this.pinchScale=t,this.pinchPage.classList.add("pinch-page"),this.docEl.firstChild.classList.add("pinching"),this.pinchPage.style.transform="scale("+this.pinchScale+")")}}},{key:"pinchToZoomEndHandler",value:function(){this.pinchPage&&this.isPinching&&1!==this.pinchScale&&(this.pdfViewer.currentScaleValue=this.pdfViewer.currentScale*this.pinchScale,this.pinchPage.style.transform=null,this.pinchPage.style["transform-origin"]=null,this.pinchPage.classList.remove("pinch-page"),this.docEl.firstChild.classList.remove("pinching"),this.docEl.scroll(this.scaledXOffset*this.pinchScale-this.originalXOffset,this.scaledYOffset*this.pinchScale-this.originalYOffset+this.pinchPage.offsetTop),this.isPinching=!1,this.originalDistance=0,this.pinchScale=1,this.pinchPage=null)}},{key:"toggleThumbnails",value:function(){var e=this;if(this.thumbnailsSidebar){this.thumbnailsSidebar.toggle();var t=this.pdfViewer.pagesCount;this.cacheThumbnailsToggledState(this.thumbnailsSidebar.isOpen);var n=void 0,i=void 0;this.thumbnailsSidebar.isOpen?(this.rootEl.classList.remove(y.z),this.rootEl.classList.add(y.C),this.rootEl.classList.add(y.D),n=k.k.OPEN,i=k.l.thumbnailsOpen):(this.rootEl.classList.remove(y.C),this.rootEl.classList.add(y.z),this.rootEl.classList.add(y.A),n=k.k.CLOSE,i=k.l.thumbnailsClose),this.emitMetric({name:n,data:t}),this.emit(i),setTimeout(function(){e.resize(),e.rootEl.classList.remove(y.A),e.rootEl.classList.remove(y.D)},301)}}},{key:"getMetricsWhitelist",value:function(){return j}},{key:"handleAnnotatorEvents",value:function(e){if(x(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleAnnotatorEvents",this).call(this,e),this.thumbnailsSidebarEl)switch(e.event){case y.a.modeEnter:this.thumbnailsSidebarEl.classList.add("bp-thumbnails-container--dark");break;case y.a.modeExit:this.thumbnailsSidebarEl.classList.remove("bp-thumbnails-container--dark")}}},{key:"getCachedThumbnailsToggledState",value:function(){return(this.cache.get("doc-thumbnails-toggled-map")||{})[this.options.file.id]}},{key:"cacheThumbnailsToggledState",value:function(e){var t=this.cache.get("doc-thumbnails-toggled-map")||{},n=S({},t,i({},this.options.file.id,!!e));this.cache.set("doc-thumbnails-toggled-map",n,!0)}},{key:"shouldThumbnailsBeToggled",value:function(){if(!this.options.enableThumbnailsSidebar)return!1;var e=this.getCachedThumbnailsToggledState(),t=this.pdfViewer&&this.pdfViewer.pdfDocument,n=t.numPages,i=void 0===n?0:n,r=e;return!1!==r&&(r=!0),r&&i>1}}]),t}(c.a);t.a=T},function(e,t,n){function i(e){return"number"==typeof e&&o(e)}var r=n(11),o=r.isFinite;e.exports=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(1),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){i(this,e),this.cache={}}return o(e,[{key:"set",value:function(e,t,n){this.cache[e]=t,n&&this.isLocalStorageAvailable()&&localStorage.setItem(this.generateKey(e),JSON.stringify(t))}},{key:"unset",value:function(e){this.isLocalStorageAvailable()&&localStorage.removeItem(this.generateKey(e)),delete this.cache[e]}},{key:"has",value:function(e){return this.inCache(e)||this.inLocalStorage(e)}},{key:"get",value:function(e){if(this.inCache(e))return this.cache[e];if(this.inLocalStorage(e)){var t=localStorage.getItem(this.generateKey(e));if(t)return t=JSON.parse(t),this.cache[e]=t,t}}},{key:"inCache",value:function(e){return{}.hasOwnProperty.call(this.cache,e)}},{key:"inLocalStorage",value:function(e){return!!this.isLocalStorageAvailable()&&!!localStorage.getItem(this.generateKey(e))}},{key:"isLocalStorageAvailable",value:function(){return void 0===this.available&&(this.available=Object(r.u)()),this.available}},{key:"generateKey",value:function(e){return"bp-"+e}}]),e}();t.a=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(7),s=n.n(a),l=n(0),u=n(1),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=/pdfWidth:([0-9.]+)pts,pdfHeight:([0-9.]+)pts,numPages:([0-9]+)/,d=2,p=500,f='<div class="'+l.t+'"></div>',v=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.maxZoomScale=l._4,n.cleanupPreload=function(){n.wrapperEl&&(n.wrapperEl.parentNode.removeChild(n.wrapperEl),n.wrapperEl=void 0),n.preloadEl=void 0,n.imageEl=void 0,n.srcUrl&&URL.revokeObjectURL(n.srcUrl)},n.loadHandler=function(){return n.preloadEl&&n.imageEl?n.readEXIF(n.imageEl).then(function(e){n.pdfData=e;var t=n.getScaledWidthAndHeight(e),i=t.scaledWidth,r=t.scaledHeight;n.scaleAndShowPreload(i,r,Math.min(e.numPages,p))}).catch(function(){var e=n.imageEl,t=e.naturalWidth,i=e.naturalHeight,r=n.getScaledDimensions(t,i),o=r.scaledWidth,a=r.scaledHeight;n.scaleAndShowPreload(o,a,d)}):Promise.resolve()},n.previewUI=e,n.wrapperClassName=l.u,n}return o(t,e),c(t,[{key:"showPreload",value:function(e,t){var n=this;return this.containerEl=t,Object(u.l)(e).then(function(e){n.checkDocumentLoaded()||(n.srcUrl=URL.createObjectURL(e),n.wrapperEl=document.createElement("div"),n.wrapperEl.className=n.wrapperClassName,n.wrapperEl.innerHTML=('\n                <div class="'+l.q+" "+l.L+'">\n                    <img class="'+l.r+'" src="'+n.srcUrl+'" />\n                    <div class="'+l.r+" "+l.s+'">\n                        '+f+"\n                    </div>\n                </div>\n            ").trim(),n.containerEl.appendChild(n.wrapperEl),n.preloadEl=n.wrapperEl.querySelector("."+l.q),n.imageEl=n.preloadEl.querySelector("img."+l.r),n.overlayEl=n.preloadEl.querySelector("."+l.s),n.bindDOMListeners())})}},{key:"scaleAndShowPreload",value:function(e,t,n){if(!this.checkDocumentLoaded()){Object(u.F)(this.imageEl,e,t),Object(u.F)(this.overlayEl,e,t);for(var i=0;i<n-1;i++){var r=document.createElement("div");r.className=l.r,r.innerHTML=f,Object(u.F)(r,e,t),this.preloadEl.appendChild(r)}this.previewUI.hideLoadingIndicator(),this.preloadEl.classList.remove(l.L),this.emit("preload")}}},{key:"hidePreload",value:function(){this.wrapperEl&&(this.unbindDOMListeners(),this.restoreScrollPosition(),this.wrapperEl.classList.add(l.P),this.wrapperEl.addEventListener("transitionend",this.cleanupPreload),this.wrapperEl.addEventListener("scroll",this.cleanupPreload))}},{key:"bindDOMListeners",value:function(){this.imageEl.addEventListener("load",this.loadHandler)}},{key:"unbindDOMListeners",value:function(){this.imageEl.removeEventListener("load",this.loadHandler)}},{key:"restoreScrollPosition",value:function(){var e=this.wrapperEl.scrollTop,t=this.wrapperEl.parentNode.querySelector(".bp-doc");t&&e>0&&(t.scrollTop=e)}},{key:"getScaledWidthAndHeight",value:function(e){var t=e.pdfWidth,n=e.pdfHeight,i=this.getScaledDimensions(t,n);return{scaledWidth:i.scaledWidth,scaledHeight:i.scaledHeight}}},{key:"resize",value:function(){if(this.preloadEl&&(this.pdfData||this.imageEl)){var e=void 0;if(this.pdfData)e=this.getScaledWidthAndHeight(this.pdfData);else{var t=this.imageEl,n=t.naturalWidth,i=t.naturalHeight;e=this.getScaledDimensions(n,i)}for(var r=e,o=r.scaledWidth,a=r.scaledHeight,s=this.preloadEl.getElementsByClassName(l.r),c=0;c<s.length;c++)Object(u.F)(s[c],o,a)}}},{key:"getScaledDimensions",value:function(e,t){var n=this.wrapperEl,i=n.clientWidth,r=n.clientHeight,o=(i-l._5)/e,a=(r-l._3)/t,s=e>t,u=s?Math.min(a,o):o;return this.maxZoomScale&&(u=Math.min(this.maxZoomScale,u)),{scaledWidth:Math.floor(u*e),scaledHeight:Math.floor(u*t)}}},{key:"readEXIF",value:function(e){return new Promise(function(t,n){try{EXIF.getData(e,function(){var i=EXIF.getTag(e,"UserComment"),r=i.map(function(e){return String.fromCharCode(e)}).join(""),o=h.exec(r);if(!o||4!==o.length)return void n(new Error("No valid EXIF data found"));var a=parseInt(o[1],10)*l._2,s=parseInt(o[2],10)*l._2,u=parseInt(o[3],10);if(u<=0)return void n(new Error("EXIF num pages data is invalid"));var c=a/s,d=e.naturalWidth/e.naturalHeight;if(Math.abs(c-d)>.025){var p=s/a;if(Math.abs(p-d)>.025)return void n(new Error("EXIF PDF width and height are invalid"));var f=a;a=s,s=f}t({pdfWidth:a,pdfHeight:s,numPages:u})})}catch(e){n(new Error("Error reading EXIF data"))}})}},{key:"checkDocumentLoaded",value:function(){return!!this.previewUI.contentContainer.classList.contains(l.T)&&(this.hidePreload(),!0)}}]),t}(s.a);t.a=v},,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(147)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(148),l=(n.n(s),n(7)),u=n.n(l),c=n(86),h=n.n(c),d=n(26),p=n.n(d),f=n(9),v=n(5),b=n(240),m=n(241),g=n(125),y=n(8),E=n(358),w=n(360),_=n(363),O=n(44),k=n(65),P=n(1),S=n(15),L=n(0),x=n(2),C=n(364),j=n(365),T=(n.n(j),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},A=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),I=["Office"],M=["INPUT","SELECT","TEXTAREA"],R=Object(P.m)(L._9,document.currentScript),V=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.open=!1,e.count={success:0,error:0,navigation:0},e.file={},e.previewOptions={},e.options={},e.disabledViewers={},e.token="",e.collection=[],e.loaders=m.a,e.retryCount=0,e.logRetryCount=0,I.forEach(function(t){e.disabledViewers[t]=1}),e.location=R,e.cache=new g.a,e.ui=new w.a,e.browserInfo=v.a.getBrowserInfo(),e.download=e.download.bind(e),e.print=e.print.bind(e),e.handleTokenResponse=e.handleTokenResponse.bind(e),e.handleFileInfoResponse=e.handleFileInfoResponse.bind(e),e.handleFetchError=e.handleFetchError.bind(e),e.handleViewerEvents=e.handleViewerEvents.bind(e),e.handleViewerMetrics=e.handleViewerMetrics.bind(e),e.triggerError=e.triggerError.bind(e),e.throttledMousemoveHandler=e.getGlobalMousemoveHandler().bind(e),e.navigateLeft=e.navigateLeft.bind(e),e.navigateRight=e.navigateRight.bind(e),e.keydownHandler=e.keydownHandler.bind(e),e}return a(t,e),A(t,[{key:"destroy",value:function(){if(this.emitLoadMetrics(),this.viewer&&"function"==typeof this.viewer.destroy){if(this.file&&this.file.id){var e=O.a.createTag(this.file.id,x.b),t=O.a.get(e);O.a.stop(e);var n=H({event_name:x.g,value:{duration:t?t.elapsed:null,viewer_status:this.viewer.getLoadStatus()}},this.createLogEvent());O.a.reset(e),this.emit(x.i,n)}this.viewer.destroy()}this.viewer=void 0}},{key:"show",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==t&&"object"===(void 0===t?"undefined":T(t)))throw new Error("Bad access token!");this.previewOptions=Object.assign({},n,{token:t}),this.updateCollection(n.collection),this.parseOptions(this.previewOptions),this.load(e)}},{key:"hide",value:function(){this.open=!1,this.destroy(),this.ui.cleanup(),this.file=void 0}},{key:"reload",value:function(e){if(void 0===e&&(e=this.options.skipServerUpdate),e){if(!Object(S.d)(this.file))return;this.destroy(),this.setupUI(),this.loadViewer()}else{if(!this.file.id)return;this.load(this.file.id)}}},{key:"updateCollection",value:function(e){var t=Array.isArray(e)?e:[],n=[],i=[];t.forEach(function(e){if(e&&Object(P.v)(e))i.push(e.toString());else{if(!e||"object"!==(void 0===e?"undefined":T(e))||!Object(P.v)(e.id))throw new Error("Bad collection provided!");var t=Object.assign({},e,{id:e.id.toString()});i.push(t.id),n.push(t)}}),this.updateFileCache(n),this.collection=i,this.file&&this.ui.showNavigation(this.file.id,this.collection)}},{key:"updateFileCache",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=t;Array.isArray(n)||(n=[t]),n.forEach(function(t){if(!t.watermark_info||!t.watermark_info.is_watermarked)if(Object(S.d)(t))Object(S.a)(e.cache,t);else{var n="[Preview SDK] Tried to cache invalid file",i=new y.a(x.c.INVALID_CACHE_ATTEMPT,n,{file:t});e.emitPreviewError(i)}})}},{key:"getCurrentViewer",value:function(){return this.viewer}},{key:"getCurrentFile",value:function(){return this.file}},{key:"getCurrentCollection",value:function(){return this.collection}},{key:"getViewers",value:function(){var e=[];return this.loaders.forEach(function(t){e=e.concat(t.getViewers())}),e}},{key:"disableViewers",value:function(e){var t=this;Array.isArray(e)?e.forEach(function(e){t.disabledViewers[e]=1}):e&&(this.disabledViewers[e]=1)}},{key:"enableViewers",value:function(e){var t=this;Array.isArray(e)?e.forEach(function(e){delete t.disabledViewers[e]}):e&&delete this.disabledViewers[e]}},{key:"disableHotkeys",value:function(){this.options.useHotkeys=!1}},{key:"enableHotkeys",value:function(){this.options.useHotkeys=!0}},{key:"resize",value:function(){this.viewer&&"function"==typeof this.viewer.resize&&this.viewer.resize()}},{key:"print",value:function(){Object(S.b)(this.file,this.options)&&Object(S.c)(this.viewer,"print")&&this.viewer.print()}},{key:"download",value:function(){if(!Object(S.b)(this.file,this.options))return void this.ui.showNotification("Sorry! You can't download this file.");var e=this.options,t=e.apiHost,n=e.queryParams;if(Object(S.m)(this.file,this.options)){var i=Object(P.r)(this.viewer.getRepresentation(),"content.url_template");if(!i)return void this.ui.showNotification("Sorry! You can't download this file.");var r=Object.assign({response_content_disposition_type:"attachment"},n),o=Object(P.e)(this.viewer.createContentUrlWithAuthParams(i,this.viewer.getAssetPath()),r);k.a.downloadWithReachabilityCheck(o)}else{var a=Object(P.e)(Object(S.g)(this.file.id,t),n);f.a.get(a,{headers:this.getRequestHeaders()}).then(function(e){var t=Object(P.e)(e.download_url,n);k.a.downloadWithReachabilityCheck(t)})}var s=H({event_name:x.f,value:this.viewer?this.viewer.getLoadStatus():null},this.createLogEvent());this.emit(x.i,s)}},{key:"updateToken",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.previewOptions.token=e,t&&this.reload(!1)}},{key:"prefetch",value:function(e){var t=e.fileId,n=e.fileVersionId,i=e.token,r=e.sharedLink,o=void 0===r?"":r,a=e.sharedLinkPassword,s=void 0===a?"":a,l=e.preload,u=void 0!==l&&l,c=void 0,h=void 0,d=void 0;try{if(c=Object(S.f)(this.cache,{fileId:t,fileVersionId:n}),h=c?this.getLoader(c):null,!(d=h?h.determineViewer(c):null))return}catch(e){var p="Error prefetching file ID "+t+" - "+e,f=new y.a(x.c.PREFETCH_FILE,p,{},e.message);return void this.emitPreviewError(f)}var v={viewer:d,file:c,token:i,representation:h.determineRepresentation(c,d)};u&&(v.sharedLink=o,v.sharedLinkPassword=s);var b=new d.CONSTRUCTOR(this.createViewerOptions(v));"function"==typeof b.prefetch&&b.prefetch({assets:!0,preload:u||!!b.getViewerOption("preload"),content:!u})}},{key:"prefetchViewers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.getViewers().filter(function(e){return-1!==t.indexOf(e.NAME)}).forEach(function(t){var n=new t.CONSTRUCTOR(e.createViewerOptions({viewer:t}));"function"==typeof n.prefetch&&n.prefetch({assets:!0,preload:!1,content:!1})})}},{key:"load",value:function(e){this.destroy(),this.open=!0,this.logger=new b.a(this.location.locale,this.browserInfo),clearTimeout(this.retryTimeout);var t=this.file?this.file.id:void 0,n=this.file&&this.file.file_version?this.file.file_version.id:void 0,i=this.getFileOption(e,L.W)||"";if("string"==typeof e||"number"==typeof e){var r=e.toString(),o=i?{fileVersionId:i}:{fileId:r},a={id:r};i&&(a.file_version={id:i}),this.file=Object(S.f)(this.cache,o)||a}else if(Object(S.d)(e))this.file=e;else{if(!e||"string"!=typeof e.id)throw new y.a(x.c.BAD_INPUT,"We're sorry, the preview didn't load.",{},"File is not a well-formed Box File object. See FILE_FIELDS in file.js for a list of required fields.");var s=e.id,l=e.file_version;this.file={id:s},l&&(this.file.file_version={id:l.id})}var u=O.a.createTag(this.file.id,x.d.previewLoadTime);O.a.start(u),i?i===n?this.retryCount+=1:this.retryCount=0:this.file.id===t?this.retryCount+=1:this.retryCount=0,"object"===(void 0===e?"undefined":T(e))&&this.options.skipServerUpdate?this.handleTokenResponse({}):Object(_.a)(this.file.id,this.previewOptions.token).then(this.handleTokenResponse).catch(this.handleFetchError)}},{key:"handleTokenResponse",value:function(e){this.options.token=e[this.file.id],this.ui.isSetup()&&this.retryCount>0||this.setupUI(),Object(S.d)(this.file)?(Object(S.a)(this.cache,this.file),this.loadFromCache()):this.loadFromServer()}},{key:"setupUI",value:function(){this.container=this.ui.setup(this.options,this.keydownHandler,this.navigateLeft,this.navigateRight,this.throttledMousemoveHandler),this.ui.setupNotification(),this.ui.showNavigation(this.file.id,this.collection),this.ui.showLoadingIndicator(),this.ui.startProgressBar();var e=O.a.createTag(this.file.id,x.b);O.a.start(e)}},{key:"parseOptions",value:function(e){var t=this,n=Object.assign({},e);this.options={},this.options.container=n.container,this.options.sharedLink=n.sharedLink,this.options.sharedLinkPassword=n.sharedLinkPassword,this.options.apiHost=n.apiHost?n.apiHost.replace(/\/$/,""):L.b,this.options.appHost=n.appHost?n.appHost.replace(/\/$/,""):L.c,this.options.header=n.header||"light",this.options.headerElement=n.headerElement,this.options.logoUrl=n.logoUrl||"",this.options.autoFocus=!1!==n.autoFocus,this.options.showDownload=!!n.showDownload,this.options.showAnnotations=!!n.showAnnotations,this.options.useHotkeys=!1!==n.useHotkeys,this.options.box3dApplication=n.box3dApplication,this.options.boxAnnotations=n.boxAnnotations,this.options.viewers=n.viewers||{},this.options.skipServerUpdate=!!n.skipServerUpdate,this.options.queryParams=n.queryParams||{},this.options.fixDependencies=!!n.fixDependencies||!!n.pauseRequireJS,this.options.disableEventLog=!!n.disableEventLog,this.options.previewWMPref=n.previewWMPref||"any",this.options.downloadWM=!!n.downloadWM,this.options.fileOptions=n.fileOptions||{},this.options.enableThumbnailsSidebar=!!n.enableThumbnailsSidebar,this.loaders=(n.loaders||[]).concat(m.a),Object.keys(this.options.viewers).forEach(function(e){var n=t.options.viewers[e].disabled;!0===n?t.disableViewers(e):!1===n&&t.enableViewers(e)})}},{key:"createViewerOptions",value:function(e){return h()(Object.assign({},this.options,e,{location:this.location,cache:this.cache,ui:this.ui}))}},{key:"loadFromCache",value:function(){this.logger.setCached(),this.loadViewer(),this.options.skipServerUpdate||this.loadFromServer()}},{key:"loadFromServer",value:function(){var e=this.options,t=e.apiHost,n=e.previewWMPref,i=e.queryParams,r=Object.assign({watermark_preference:Object(P.f)(n)},i),o=this.getFileOption(this.file.id,L.W)||"",a=O.a.createTag(this.file.id,x.d.fileInfoTime);O.a.start(a);var s=Object(P.e)(Object(S.i)(this.file.id,o,t),r);f.a.get(s,{headers:this.getRequestHeaders()}).then(this.handleFileInfoResponse).catch(this.handleFetchError)}},{key:"handleFileInfoResponse",value:function(e){var t=e,n=O.a.createTag(this.file.id,x.d.fileInfoTime);O.a.stop(n),this.getFileOption(this.file.id,L.W)&&(t=Object(S.l)(e,this.file.id));var i=t.file_version.id;if(!(!this.open||this.file&&this.file.file_version&&this.file.file_version.id!==i))try{this.file=t,this.logger.setFile(t);var r=Object(S.f)(this.cache,{fileVersionId:i}),o=Object(S.k)(t);o?Object(S.n)(this.cache,t):Object(S.a)(this.cache,t),r&&Object(S.d)(r)?(r.file_version.sha1!==t.file_version.sha1||o)&&(this.logger.setCacheStale(),this.reload(!0)):this.loadViewer()}catch(e){var a=e instanceof y.a?e:new y.a(x.c.LOAD_VIEWER,"We're sorry, the preview didn't load. Please refresh the page.",{},e.message);this.triggerError(a)}}},{key:"loadViewer",value:function(){var e=this;if(this.open){if(!1===this.file.is_download_available){var t=Object(P.t)()?{linkText:"Contact Us",linkUrl:"https://support.box.com"}:{};throw new y.a(x.c.NOT_DOWNLOADABLE,"Oops! It looks like something is wrong with this file. We apologize for the inconvenience and recommend that you upload a new version of this file or roll back to a previous version. Please contact us for more details.",t)}if(!Object(S.e)(this.file,L._7))throw new y.a(x.c.PERMISSIONS_PREVIEW,"We're sorry, you don't have permission to preview this file.");Object(S.b)(this.file,this.options)&&this.ui.showLoadingDownloadButton(this.download);var n=this.getLoader(this.file);if(!n){var i=this.getViewers().find(function(t){return t.EXT.indexOf(e.file.extension)>-1}),r=void 0,o=void 0;throw i?(r=x.c.ACCOUNT,o="We're sorry, your account is unable to preview this file type."):(r=x.c.UNSUPPORTED_FILE_TYPE,o="We're sorry, we can't preview this file type in your web browser. To view this content please download and open it on your device."),new y.a(r,o)}var a=n.determineViewer(this.file,Object.keys(this.disabledViewers));this.logger.setType(a.NAME);var s=n.determineRepresentation(this.file,a),l=this.createViewerOptions({viewer:a,representation:s,container:this.container,file:this.file});l.logger=this.logger,this.viewer=new a.CONSTRUCTOR(l),this.attachViewerListeners(),this.viewer.setup(),this.viewer.load(),this.emit("viewer",this.viewer),this.retryCount=0}}},{key:"attachViewerListeners",value:function(){this.viewer.addListener("error",this.triggerError),this.viewer.addListener(x.l.default,this.handleViewerEvents),this.viewer.addListener(x.l.metric,this.handleViewerMetrics)}},{key:"handleViewerEvents",value:function(e){switch(e.event){case x.l.download:this.download();break;case x.l.reload:this.reload();break;case x.l.load:this.finishLoading(e.data);break;case x.l.progressStart:this.ui.startProgressBar();break;case x.l.progressEnd:this.ui.finishProgressBar();break;case x.l.mediaEndAutoplay:this.navigateRight();break;case x.l.error:break;default:this.emit(e.event,e.data),this.emit(x.l.default,e)}}},{key:"handleViewerMetrics",value:function(e){var t=H({event_name:e.event,value:e.data},this.createLogEvent());this.emit(x.i,t)}},{key:"finishLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.file&&this.file.id){var t=O.a.createTag(this.file.id,x.d.contentLoadTime);O.a.stop(t);var n=O.a.createTag(this.file.id,x.d.previewLoadTime);O.a.stop(n)}this.emitLoadMetrics(e),Object(S.b)(this.file,this.options)&&(this.ui.showDownloadButton(this.download),Object(S.c)(this.viewer,"print")&&this.ui.showPrintButton(this.print));var i=e.error;i?(this.count.error+=1,this.emit(x.l.load,{error:i,metrics:this.logger.done(this.count),file:this.file}),this.handleViewerMetrics({event:"failure"}),"function"==typeof window.callPhantom&&window.callPhantom(0)):(this.count.success+=1,this.emit(x.l.load,{viewer:this.viewer,metrics:this.logger.done(this.count),file:this.file}),this.handleViewerMetrics({event:"success"}),this.options.disableEventLog||this.logPreviewEvent(this.file.id,this.options),"function"==typeof window.callPhantom&&window.callPhantom(1)),!1!==e.endProgress&&this.ui.finishProgressBar(),this.options.autoFocus&&this.viewer&&this.viewer.containerEl&&this.viewer.containerEl.focus(),this.ui.hideLoadingIndicator(),this.prefetchNextFiles()}},{key:"logPreviewEvent",value:function(e,t){var n=this;this.logRetryCount=this.logRetryCount||0;var i=t.apiHost,r=t.token,o=t.sharedLink,a=t.sharedLinkPassword,s={event_type:"preview",source:{type:"file",id:e}},l=Object(P.p)({},r,o,a);f.a.post(i+"/2.0/events",s,{headers:l}).then(function(){n.logRetryCount=0}).catch(function(){if(n.logRetryCount+=1,n.logRetryCount>3)return void(n.logRetryCount=0);clearTimeout(n.logRetryTimeout),n.logRetryTimeout=setTimeout(function(){n.logPreviewEvent(e,t)},500*n.logRetryCount)})}},{key:"handleFetchError",value:function(e){var t=this;if(this.open){if(Object(S.n)(this.cache,this.file),this.retryCount>3){var n=x.c.EXCEEDED_RETRY_LIMIT,i="We're sorry, the preview didn't load. Please refresh the page.";e.response&&429===e.response.status&&(n=x.c.RATE_LIMIT,i="We're sorry, the preview didn't load because your request was rate limited. Please wait a few minutes and try again.");var r=new y.a(n,i,{fileId:this.file.id});return void this.triggerError(r)}clearTimeout(this.retryTimeout);var o=Math.random()*(1e3*Math.pow(2,this.retryCount));if(e.headers){var a=parseInt(e.headers.get("Retry-After"),10);Number.isNaN(a)||(o=1e3*a)}this.retryTimeout=setTimeout(function(){t.load(t.file.id)},o)}}},{key:"getErrorViewer",value:function(){return new E.a(this.createViewerOptions({viewer:{NAME:"Error"},container:this.container,file:this.file}))}},{key:"triggerError",value:function(e){this.emitPreviewError(e);var t=Object(P.r)(e,"details.silent",!1);this.open&&!t&&(this.open=!1,Object(S.n)(this.cache,this.file),this.destroy(),this.setupUI(),this.viewer=this.getErrorViewer(),this.viewer.setup(),this.attachViewerListeners(),this.viewer.load(e))}},{key:"createLogEvent",value:function(){var e=this.file||{};return H({timestamp:Object(C.b)(),file_id:Object(P.r)(e,"id",""),file_version_id:Object(P.r)(e,"file_version.id",""),content_type:Object(P.r)(this.viewer,"options.viewer.NAME",""),extension:e.extension||"",locale:Object(P.r)(this.location,"locale",""),rep_type:Object(P.r)(this.viewer,"options.representation.representation","").toLowerCase()},Object(C.a)())}},{key:"emitPreviewError",value:function(e){var t=e;t.code=e.code||x.c.BROWSER_GENERIC;var n=t.displayMessage,i=t.message;t.displayMessage=Object(P.G)(n),t.message=Object(P.G)(i);var r=H({error:t},this.createLogEvent());this.emit(x.h,r)}},{key:"emitLoadMetrics",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.encoding;if(this.file&&this.file.id){var r=this.file.id,o=O.a.createTag(r,x.d.fileInfoTime),a=O.a.createTag(r,x.d.convertTime),s=O.a.createTag(r,x.d.downloadResponseTime),l=O.a.createTag(r,x.d.contentLoadTime),u=O.a.createTag(r,x.d.previewLoadTime),c=O.a.get(o)||{},h=O.a.get(a)||{},d=O.a.get(s)||{},p=O.a.get(l)||{},f=O.a.get(u)||{},v=H((e={encoding:n,event_name:x.d.previewLoadEvent,value:f.elapsed||0},i(e,x.d.fileInfoTime,c.elapsed||0),i(e,x.d.convertTime,h.elapsed||0),i(e,x.d.downloadResponseTime,d.elapsed||0),i(e,x.d.contentLoadTime,p.elapsed||0),e),this.createLogEvent());this.emit(x.i,v),O.a.reset([o,a,s,l,u])}}},{key:"getRequestHeaders",value:function(e){var t=v.a.canPlayDash()&&!this.disabledViewers.Dash?L._37:L._38,n={"X-Rep-Hints":""+L._34+L._35+L._36+t};return Object(P.p)(n,e||this.options.token,this.options.sharedLink,this.options.sharedLinkPassword)}},{key:"prefetchNextFiles",value:function(){var e=this,t=this.options,n=t.apiHost,i=t.previewWMPref,r=t.queryParams,o=t.skipServerUpdate,a=Object.assign({watermark_preference:Object(P.f)(i)},r);if(!(this.collection.length<2||o)){this.prefetchedCollection=this.prefetchedCollection||[];var s=this.collection.indexOf(this.file.id),l=this.collection.slice(s+1,s+4+1).filter(function(t){return-1===e.prefetchedCollection.indexOf(t)});0!==l.length&&Object(_.a)(l,this.previewOptions.token).then(function(t){l.forEach(function(i){var r=t[i],o=e.getFileOption(i,L.W)||"",s=Object(P.e)(Object(S.i)(i,o,n),a);f.a.get(s,{headers:e.getRequestHeaders(r)}).then(function(t){Object(S.a)(e.cache,t),e.prefetchedCollection.push(t.id),e.prefetch({fileId:t.id,token:r})}).catch(function(t){var n="Error prefetching file ID "+i+" - "+t,r=new y.a(x.c.PREFETCH_FILE,n,{fileId:i},t.message);e.emitPreviewError(r)})})}).catch(function(t){var n="Error prefetching files - "+t,i=new y.a(x.c.PREFETCH_FILE,n,{fileIds:l},t.message);e.emitPreviewError(i)})}}},{key:"getGlobalMousemoveHandler",value:function(){var e=this;return p()(function(){if(clearTimeout(e.timeoutHandler),e.container){var t=!!e.viewer;e.container.classList.remove(L.S),t&&!e.viewer.allowNavigationArrows()||e.container.classList.add(L.S),e.timeoutHandler=setTimeout(function(){e.container&&e.container.classList.remove(L.S)},1500)}},1e3,!0)}},{key:"navigateToIndex",value:function(e){if(Array.isArray(this.collection)&&!(this.collection.length<2)){var t=this.collection[e];this.emit("navigate",t),this.count.navigation+=1,this.load(t)}}},{key:"navigateLeft",value:function(){var e=this.collection.indexOf(this.file.id),t=0===e?0:e-1;t!==e&&this.navigateToIndex(t)}},{key:"navigateRight",value:function(){var e=this.collection.indexOf(this.file.id),t=e===this.collection.length-1?this.collection.length-1:e+1;t!==e&&this.navigateToIndex(t)}},{key:"getLoader",value:function(e){var t=this;return this.loaders.find(function(n){return n.canLoad(e,Object.keys(t.disabledViewers))})}},{key:"keydownHandler",value:function(e){var t=e.target;if(this.options.useHotkeys&&!(!t||M.indexOf(t.nodeName)>-1||"DIV"===t.nodeName&&t.getAttribute("contenteditable"))){var n=!1,i=Object(P.k)(e);if(i){if(this.viewer&&"function"==typeof this.viewer.onKeydown&&(n=!!this.viewer.onKeydown(i,e)),!n)switch(i){case"ArrowLeft":this.navigateLeft(),n=!0;break;case"ArrowRight":this.navigateRight(),n=!0}n&&(e.preventDefault(),e.stopPropagation())}}}},{key:"getFileOption",value:function(e,t){var n="string"==typeof e?e:e.id;return Object(P.r)(this.previewOptions,"fileOptions."+n+"."+t)}}]),t}(u.a);e.Box=e.Box||{},e.Box.Preview=V,t.default=V}.call(t,n(16))},function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var e={};if(!Object.setPrototypeOf&&!e.__proto__){var t=Object.getPrototypeOf;Object.getPrototypeOf=function(e){return e.__proto__?e.__proto__:t.call(Object,e)}}}(),"function"!=typeof Object.assign&&function(){Object.assign=function(e){"use strict";if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}}(),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,enumerable:!1,writable:!0,value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var o=t[r];if(e.call(i,o,r,t))return o;r++}}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{configurable:!0,enumerable:!1,writable:!0,value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var o=t[r];if(e.call(i,o,r,t))return r;r++}return-1}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,enumerable:!1,writable:!0,value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var r=0|t,o=Math.max(r>=0?r:i-Math.abs(r),0);o<i;){if(function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}(n[o],e))return!0;o++}return!1}}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{configurable:!0,enumerable:!1,writable:!0,value:function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var i=n.indexOf(e,t);return-1!==i&&i===t}}),Number.isNaN=Number.isNaN||function(e){return e!==e},function(){function e(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}function t(e){return"object"===(void 0===e?"undefined":n(e))?null!==e:"function"==typeof e}function i(e){if(!t(e))throw TypeError(e+" is not an object!");return e}function r(e){try{return!!e()}catch(e){return!0}}function o(n,r){e(n),i(r);var o=arguments.length<3?n:e(arguments[2]);if(l&&!s)return a(n,r,o);if(n==o){switch(r.length){case 0:return new n;case 1:return new n(r[0]);case 2:return new n(r[0],r[1]);case 3:return new n(r[0],r[1],r[2]);case 4:return new n(r[0],r[1],r[2],r[3])}var u=[null];return u.push.apply(u,r),new(Function.bind.apply(n,u))}var c=o.prototype,h=Object.create(t(c)?c:Object.prototype),d=Function.apply.call(n,h,r);return t(d)?d:h}var a=("undefined"!=typeof Reflect?Reflect:{}).construct,s=r(function(){function e(){}return!(a(function(){},[],e)instanceof e)}),l=!r(function(){a(function(){})});"undefined"!=typeof Reflect?Reflect.construct=o:Reflect={construct:o}}(),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},i=Math.pow(2,53)-1,r=function(e){var t=n(e);return Math.min(Math.max(t,0),i)};return function(e){var n=this,i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,a=arguments.length>1?arguments[1]:void 0;if(void 0!==a){if(!t(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}for(var s,l=r(i.length),u=t(n)?Object(new n(l)):new Array(l),c=0;c<l;)s=i[c],u[c]=a?void 0===o?a(s,c):a.call(o,s,c):s,c+=1;return u.length=l,u}}()),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach)},function(e,t,n){function i(e,t,n,A,I,M){var R,V=t&P,D=t&S,B=t&L;if(n&&(R=I?n(e,A,I,M):n(e)),void 0!==R)return R;if(!_(e))return e;var F=y(e);if(F){if(R=b(e),!V)return c(e,R)}else{var z=v(e),N=z==C||z==j;if(E(e))return u(e,V);if(z==T||z==x||N&&!I){if(R=D||N?{}:g(e),!V)return D?d(e,l(R,e)):h(e,s(R,e))}else{if(!H[z])return I?e:{};R=m(e,z,V)}}M||(M=new r);var U=M.get(e);if(U)return U;if(M.set(e,R),O(e))return e.forEach(function(r){R.add(i(r,t,n,r,e,M))}),R;if(w(e))return e.forEach(function(r,o){R.set(o,i(r,t,n,o,e,M))}),R;var W=B?D?f:p:D?keysIn:k,q=F?void 0:W(e);return o(q||e,function(r,o){q&&(o=r,r=e[o]),a(R,o,i(r,t,n,o,e,M))}),R}var r=n(150),o=n(180),a=n(90),s=n(182),l=n(192),u=n(195),c=n(196),h=n(197),d=n(199),p=n(200),f=n(201),v=n(62),b=n(206),m=n(207),g=n(213),y=n(56),E=n(93),w=n(215),_=n(17),O=n(217),k=n(55),P=1,S=2,L=4,x="[object Arguments]",C="[object Function]",j="[object GeneratorFunction]",T="[object Object]",H={};H[x]=H["[object Array]"]=H["[object ArrayBuffer]"]=H["[object DataView]"]=H["[object Boolean]"]=H["[object Date]"]=H["[object Float32Array]"]=H["[object Float64Array]"]=H["[object Int8Array]"]=H["[object Int16Array]"]=H["[object Int32Array]"]=H["[object Map]"]=H["[object Number]"]=H[T]=H["[object RegExp]"]=H["[object Set]"]=H["[object String]"]=H["[object Symbol]"]=H["[object Uint8Array]"]=H["[object Uint8ClampedArray]"]=H["[object Uint16Array]"]=H["[object Uint32Array]"]=!0,H["[object Error]"]=H[C]=H["[object WeakMap]"]=!1,e.exports=i},function(e,t,n){function i(e){var t=this.__data__=new r(e);this.size=t.size}var r=n(38),o=n(156),a=n(157),s=n(158),l=n(159),u=n(160);i.prototype.clear=o,i.prototype.delete=a,i.prototype.get=s,i.prototype.has=l,i.prototype.set=u,e.exports=i},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function i(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}var r=n(39),o=Array.prototype,a=o.splice;e.exports=i},function(e,t,n){function i(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}var r=n(39);e.exports=i},function(e,t,n){function i(e){return r(this.__data__,e)>-1}var r=n(39);e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}var r=n(39);e.exports=i},function(e,t,n){function i(){this.__data__=new r,this.size=0}var r=n(38);e.exports=i},function(e,t){function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function i(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!o||i.length<s-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(i)}return n.set(e,t),this.size=n.size,this}var r=n(38),o=n(52),a=n(167),s=200;e.exports=i},function(e,t,n){function i(e){return!(!a(e)||o(e))&&(r(e)?f:u).test(s(e))}var r=n(53),o=n(164),a=n(17),s=n(89),l=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,c=Function.prototype,h=Object.prototype,d=c.toString,p=h.hasOwnProperty,f=RegExp("^"+d.call(p).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t,n){function i(e){var t=a.call(e,l),n=e[l];try{e[l]=void 0;var i=!0}catch(e){}var r=s.call(e);return i&&(t?e[l]=n:delete e[l]),r}var r=n(54),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,l=r?r.toStringTag:void 0;e.exports=i},function(e,t){function n(e){return r.call(e)}var i=Object.prototype,r=i.toString;e.exports=n},function(e,t,n){function i(e){return!!o&&o in e}var r=n(165),o=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=i},function(e,t,n){var i=n(11),r=i["__core-js_shared__"];e.exports=r},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var r=n(168),o=n(175),a=n(177),s=n(178),l=n(179);i.prototype.clear=r,i.prototype.delete=o,i.prototype.get=a,i.prototype.has=s,i.prototype.set=l,e.exports=i},function(e,t,n){function i(){this.size=0,this.__data__={hash:new r,map:new(a||o),string:new r}}var r=n(169),o=n(38),a=n(52);e.exports=i},function(e,t,n){function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var r=n(170),o=n(171),a=n(172),s=n(173),l=n(174);i.prototype.clear=r,i.prototype.delete=o,i.prototype.get=a,i.prototype.has=s,i.prototype.set=l,e.exports=i},function(e,t,n){function i(){this.__data__=r?r(null):{},this.size=0}var r=n(40);e.exports=i},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function i(e){var t=this.__data__;if(r){var n=t[e];return n===o?void 0:n}return s.call(t,e)?t[e]:void 0}var r=n(40),o="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}var r=n(40),o=Object.prototype,a=o.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?o:t,this}var r=n(40),o="__lodash_hash_undefined__";e.exports=i},function(e,t,n){function i(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}var r=n(41);e.exports=i},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function i(e){return r(this,e).get(e)}var r=n(41);e.exports=i},function(e,t,n){function i(e){return r(this,e).has(e)}var r=n(41);e.exports=i},function(e,t,n){function i(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}var r=n(41);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}e.exports=n},function(e,t,n){var i=n(19),r=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=r},function(e,t,n){function i(e,t){return e&&r(t,o(t),e)}var r=n(42),o=n(55);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}e.exports=n},function(e,t,n){var i=n(185),r=n(25),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(e){return r(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,t,n){function i(e){return o(e)&&r(e)==a}var r=n(33),o=n(25),a="[object Arguments]";e.exports=i},function(e,t){function n(){return!1}e.exports=n},function(e,t){function n(e,t){var n=typeof e;return!!(t=null==t?i:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}var i=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){var i=n(189),r=n(58),o=n(59),a=o&&o.isTypedArray,s=a?r(a):i;e.exports=s},function(e,t,n){function i(e){return a(e)&&o(e.length)&&!!s[r(e)]}var r=n(33),o=n(94),a=n(25),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=i},function(e,t,n){function i(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}var r=n(60),o=n(191),a=Object.prototype,s=a.hasOwnProperty;e.exports=i},function(e,t,n){var i=n(95),r=i(Object.keys,Object);e.exports=r},function(e,t,n){function i(e,t){return e&&r(t,o(t),e)}var r=n(42),o=n(97);e.exports=i},function(e,t,n){function i(e){if(!r(e))return a(e);var t=o(e),n=[];for(var i in e)("constructor"!=i||!t&&l.call(e,i))&&n.push(i);return n}var r=n(17),o=n(60),a=n(194),s=Object.prototype,l=s.hasOwnProperty;e.exports=i},function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}e.exports=n},function(e,t,n){(function(e){function i(e,t){if(t)return e.slice();var n=e.length,i=u?u(n):new e.constructor(n);return e.copy(i),i}var r=n(11),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o,l=s?r.Buffer:void 0,u=l?l.allocUnsafe:void 0;e.exports=i}).call(t,n(57)(e))},function(e,t){function n(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}e.exports=n},function(e,t,n){function i(e,t){return r(e,o(e),t)}var r=n(42),o=n(61);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[r++]=a)}return o}e.exports=n},function(e,t,n){function i(e,t){return r(e,o(e),t)}var r=n(42),o=n(99);e.exports=i},function(e,t,n){function i(e){return r(e,a,o)}var r=n(102),o=n(61),a=n(55);e.exports=i},function(e,t,n){function i(e){return r(e,a,o)}var r=n(102),o=n(99),a=n(97);e.exports=i},function(e,t,n){var i=n(19),r=n(11),o=i(r,"DataView");e.exports=o},function(e,t,n){var i=n(19),r=n(11),o=i(r,"Promise");e.exports=o},function(e,t,n){var i=n(19),r=n(11),o=i(r,"Set");e.exports=o},function(e,t,n){var i=n(19),r=n(11),o=i(r,"WeakMap");e.exports=o},function(e,t){function n(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var i=Object.prototype,r=i.hasOwnProperty;e.exports=n},function(e,t,n){function i(e,t,n){var i=e.constructor;switch(t){case m:return r(e);case u:case c:return new i(+e);case g:return o(e,n);case y:case E:case w:case _:case O:case k:case P:case S:case L:return l(e,n);case h:return new i;case d:case v:return new i(e);case p:return a(e);case f:return new i;case b:return s(e)}}var r=n(63),o=n(209),a=n(210),s=n(211),l=n(212),u="[object Boolean]",c="[object Date]",h="[object Map]",d="[object Number]",p="[object RegExp]",f="[object Set]",v="[object String]",b="[object Symbol]",m="[object ArrayBuffer]",g="[object DataView]",y="[object Float32Array]",E="[object Float64Array]",w="[object Int8Array]",_="[object Int16Array]",O="[object Int32Array]",k="[object Uint8Array]",P="[object Uint8ClampedArray]",S="[object Uint16Array]",L="[object Uint32Array]";e.exports=i},function(e,t,n){var i=n(11),r=i.Uint8Array;e.exports=r},function(e,t,n){function i(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var r=n(63);e.exports=i},function(e,t){function n(e){var t=new e.constructor(e.source,i.exec(e));return t.lastIndex=e.lastIndex,t}var i=/\w*$/;e.exports=n},function(e,t,n){function i(e){return a?Object(a.call(e)):{}}var r=n(54),o=r?r.prototype:void 0,a=o?o.valueOf:void 0;e.exports=i},function(e,t,n){function i(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var r=n(63);e.exports=i},function(e,t,n){function i(e){return"function"!=typeof e.constructor||a(e)?{}:r(o(e))}var r=n(214),o=n(101),a=n(60);e.exports=i},function(e,t,n){var i=n(17),r=Object.create,o=function(){function e(){}return function(t){if(!i(t))return{};if(r)return r(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},function(e,t,n){var i=n(216),r=n(58),o=n(59),a=o&&o.isMap,s=a?r(a):i;e.exports=s},function(e,t,n){function i(e){return o(e)&&r(e)==a}var r=n(62),o=n(25),a="[object Map]";e.exports=i},function(e,t,n){var i=n(218),r=n(58),o=n(59),a=o&&o.isSet,s=a?r(a):i;e.exports=s},function(e,t,n){function i(e){return o(e)&&r(e)==a}var r=n(62),o=n(25),a="[object Set]";e.exports=i},function(e,t,n){var i=n(11),r=function(){return i.Date.now()};e.exports=r},function(e,t,n){function i(e){if("number"==typeof e)return e;if(o(e))return a;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=u.test(e);return n||c.test(e)?h(e.slice(2),n?2:8):l.test(e)?a:+e}var r=n(17),o=n(221),a=NaN,s=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,h=parseInt;e.exports=i},function(e,t,n){function i(e){return"symbol"==typeof e||o(e)&&r(e)==a}var r=n(33),o=n(25),a="[object Symbol]";e.exports=i},function(e,t,n){e.exports=n(223)},function(e,t,n){"use strict";function i(e){var t=new a(e),n=o(a.prototype.request,t);return r.extend(n,a.prototype,t),r.extend(n,t),n}var r=n(10),o=n(103),a=n(225),s=n(109),l=n(106),u=i(l);u.Axios=a,u.create=function(e){return i(s(u.defaults,e))},u.Cancel=n(110),u.CancelToken=n(238),u.isCancel=n(105),u.all=function(e){return Promise.all(e)},u.spread=n(239),e.exports=u,e.exports.default=u},function(e,t){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,n){"use strict";function i(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var r=n(10),o=n(104),a=n(226),s=n(227),l=n(109);i.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=l(this.defaults,e),e.method=e.method?e.method.toLowerCase():"get";var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},i.prototype.getUri=function(e){return e=l(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],function(e){i.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}}),r.forEach(["post","put","patch"],function(e){i.prototype[e]=function(t,n,i){return this.request(r.merge(i||{},{method:e,url:t,data:n}))}}),e.exports=i},function(e,t,n){"use strict";function i(){this.handlers=[]}var r=n(10);i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=i},function(e,t,n){"use strict";function i(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var r=n(10),o=n(228),a=n(105),s=n(106),l=n(236),u=n(237);e.exports=function(e){return i(e),e.baseURL&&!l(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return i(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(i(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var i=n(10);e.exports=function(e,t,n){return i.forEach(n,function(n){e=n(e,t)}),e}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function a(){v&&p&&(v=!1,p.length?f=p.concat(f):b=-1,f.length&&s())}function s(){if(!v){var e=r(a);v=!0;for(var t=f.length;t;){for(p=f,f=[];++b<t;)p&&p[b].run();b=-1,t=f.length}p=null,v=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,h,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var p,f=[],v=!1,b=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new l(e,t)),1!==f.length||v||r(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";var i=n(10);e.exports=function(e,t){i.forEach(e,function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])})}},function(e,t,n){"use strict";var i=n(108);e.exports=function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(i("Request failed with status code "+n.status,n.config,null,n.request,n))}},function(e,t,n){"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var i=n(10),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(i.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=i.trim(e.substr(0,o)).toLowerCase(),n=i.trim(e.substr(o+1)),t){if(a[t]&&r.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}}),a):a}},function(e,t,n){"use strict";var i=n(10);e.exports=i.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(r.setAttribute("href",t),t=r.href),r.setAttribute("href",t),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");return t=e(window.location.href),function(n){var r=i.isString(n)?e(n):n;return r.protocol===t.protocol&&r.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";var i=n(10);e.exports=i.isStandardBrowserEnv()?function(){return{write:function(e,t,n,r,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),i.isString(r)&&s.push("path="+r),i.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}var r=n(110);i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o="box-content-preview",a="2.12.0",s=function(){function e(t,n){i(this,e),this.start=Date.now(),this.log={locale:t,event:"preview",browser:n,client:{name:o,version:a},converted:!0,cache:{hit:!1,stale:!1},time:{conversion:0,rendering:0,total:0}}}return r(e,[{key:"setCached",value:function(){this.log.cache.hit=!0}},{key:"setCacheStale",value:function(){this.log.cache.stale=!0}},{key:"setUnConverted",value:function(){this.log.converted=!1,this.log.time.conversion=Date.now()-this.start}},{key:"setPreloaded",value:function(){this.log.time.preload=Date.now()-this.start}},{key:"setFile",value:function(e){this.log.file=e}},{key:"setType",value:function(e){this.log.type=e}},{key:"done",value:function(e){return this.log.count=e,this.log.time.total=Date.now()-this.start,this.log.time.rendering=this.log.time.total-this.log.time.conversion,this.log}}]),e}();t.a=s},function(e,t,n){"use strict";var i=n(242),r=n(299),o=n(306),a=n(308),s=n(314),l=n(326),u=n(332),c=n(345),h=n(354),d=n(356);t.a=[a.a,d.a,u.a,o.a,l.a,s.a,r.a,i.a,c.a,h.a]},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(13),s=n(243),l=n(297),u=n(0),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=[{NAME:"Image",CONSTRUCTOR:s.a,REP:u._1,EXT:["svg","gif"]},{NAME:"MultiImage",CONSTRUCTOR:l.a,REP:"png",EXT:["tif","tiff"],ASSET:"{page}.png"},{NAME:"Image",CONSTRUCTOR:s.a,REP:"jpg",EXT:["jpeg","jpg"],ASSET:"1.jpg"},{NAME:"Image",CONSTRUCTOR:s.a,REP:"png",EXT:["ai","bmp","dcm","eps","gif","heic","png","ps","psd","svs","tga","tif","tiff"],ASSET:"1.png"}],d=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=h,e}return o(t,e),c(t,[{key:"determineRepresentation",value:function(e,t){return e.representations.entries.find(function(e){return(!e.properties||"false"!==e.properties.paged)&&t.REP===e.representation})}}]),t}(a.a);t.a=new d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=n(111),l=n(6),u=n(0),c=n(1),h=n(296),d=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.rotateLeft=n.rotateLeft.bind(n),n.updatePannability=n.updatePannability.bind(n),n.handleImageDownloadError=n.handleImageDownloadError.bind(n),n.handleAssetAndRepLoad=n.handleAssetAndRepLoad.bind(n),n.isMobile&&(n.handleOrientationChange=n.handleOrientationChange.bind(n)),n}return o(t,e),d(t,[{key:"setup",value:function(){this.isSetup||(p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.wrapperEl=this.createViewer(document.createElement("div")),this.wrapperEl.classList.add("bp-image"),this.imageEl=this.wrapperEl.appendChild(document.createElement("img")),this.imageEl.setAttribute("data-page-number",1),this.imageEl.classList.add(u.L),this.currentRotationAngle=0)}},{key:"load",value:function(){var e=this;p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this);var n=this.options,i=n.representation,r=n.viewer,o=i.content.url_template,a=this.createContentUrlWithAuthParams(o,r.ASSET);return this.bindDOMListeners(),this.getRepStatus().getPromise().then(function(){return e.handleAssetAndRepLoad(a)}).catch(this.handleAssetError)}},{key:"handleAssetAndRepLoad",value:function(e){this.startLoadTimer(),this.imageEl.src=e,p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleAssetAndRepLoad",this).call(this)}},{key:"prefetch",value:function(e){var t=e.content,n=void 0===t||t,i=this.options,r=i.file,o=i.representation,a=i.viewer,s=r&&r.watermark_info&&r.watermark_info.is_watermarked;if(n&&!s&&this.isRepresentationReady(o)){var l=o.content.url_template;document.createElement("img").src=this.createContentUrlWithAuthParams(l,a.ASSET)}}},{key:"updatePannability",value:function(){this.imageEl&&(this.isRotated()?this.isPannable=this.imageEl.height>this.wrapperEl.clientWidth||this.imageEl.width>this.wrapperEl.clientHeight:this.isPannable=this.imageEl.width>this.wrapperEl.clientWidth||this.imageEl.height>this.wrapperEl.clientHeight,this.didPan=!1,this.updateCursor())}},{key:"rotateLeft",value:function(){this.currentRotationAngle=(this.currentRotationAngle-90)%3600%360,this.imageEl.setAttribute("data-rotation-angle",this.currentRotationAngle),this.imageEl.style.transform="rotate("+this.currentRotationAngle+"deg)",this.emit("rotate"),this.handleOrientationChange(),this.setScale(this.imageEl.offsetwidth,this.imageEl.offsetHeight)}},{key:"getTransformWidthAndHeight",value:function(e,t,n){return n?{width:t,height:e}:{width:e,height:t}}},{key:"zoom",value:function(e){var t=void 0,n=void 0,i=void 0,r=void 0,o=this.isRotated();if("in"===e||"out"===e){var a=this.getTransformWidthAndHeight(this.imageEl.offsetWidth,this.imageEl.offsetHeight,o);r=a.width,i=a.height,t="in"===e?1.2*r:r/1.2}else{var s=parseInt(this.imageEl.getAttribute("originalHeight"),10),l=parseInt(this.imageEl.getAttribute("originalWidth"),10),u=this.getTransformWidthAndHeight(l,s,o);r=u.width,i=u.height;var c=r>=i,h={width:this.wrapperEl.clientWidth-30,height:this.wrapperEl.clientHeight-30};if(r>h.width||i>h.height){var d=Math.min(h.width/r,h.height/i);c?t=r*d:n=i*d}else c?t=Math.min(h.width,l):n=Math.min(h.height,s)}if(o){var p=t;t=n,n=p}this.imageEl.style.width=t?t+"px":"",this.imageEl.style.height=n?n+"px":"",this.adjustImageZoomPadding(),setTimeout(this.updatePannability,50),this.setScale(t,n),this.emit("zoom",{newScale:[t||r,n||i],canZoomIn:!0,canZoomOut:!0})}},{key:"setScale",value:function(e,t){this.scale=e?e/this.imageEl.getAttribute("originalWidth"):t/this.imageEl.getAttribute("originalHeight"),this.rotationAngle=this.currentRotationAngle%3600%360,this.emit("scale",{scale:this.scale,rotationAngle:this.rotationAngle})}},{key:"loadUI",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadUI",this).call(this),this.controls.add("Rotate left",this.rotateLeft,"bp-image-rotate-left-icon",l.s),this.controls.add("Enter fullscreen",this.toggleFullscreen,"bp-enter-fullscreen-icon",l.l),this.controls.add("Exit fullscreen",this.toggleFullscreen,"bp-exit-fullscreen-icon",l.m)}},{key:"print",value:function(){this.printframe=c.y(this.imageEl.outerHTML),this.printframe.contentWindow.focus(),this.printImage=this.printframe.contentDocument.querySelector("img"),this.printImage.style.display="block",this.printImage.style.margin="0 auto","Explorer"===a.a.getName()||"Edge"===a.a.getName()?this.printframe.contentWindow.document.execCommand("print",!1,null):this.printframe.contentWindow.print(),this.emit("printsuccess")}},{key:"isRotated",value:function(){return Math.abs(this.currentRotationAngle)%180==90}},{key:"adjustImageZoomPadding",value:function(){var e=0,t=0,n=0,i=0,r=this.wrapperEl.getBoundingClientRect(),o={width:this.wrapperEl.clientWidth-15,height:this.wrapperEl.clientHeight-15};this.isRotated()?(n=r.width>this.imageEl.clientHeight?r.width:this.imageEl.clientHeight,i=r.height>this.imageEl.clientWidth?r.height:this.imageEl.clientWidth):(n=r.width>this.imageEl.clientWidth?r.width:this.imageEl.clientWidth,i=r.height>this.imageEl.clientHeight?r.height:this.imageEl.clientHeight),e=(n-this.imageEl.clientWidth)/2,t=(i-this.imageEl.clientHeight)/2,this.imageEl.style.left=e+"px",this.imageEl.style.top=t+"px",this.wrapperEl.scrollLeft=(this.wrapperEl.scrollWidth-o.width)/2,this.wrapperEl.scrollTop=(this.wrapperEl.scrollHeight-o.height)/2}},{key:"handleImageDownloadError",value:function(e){this.handleDownloadError(e,this.imageEl.src)}},{key:"bindDOMListeners",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bindDOMListeners",this).call(this),this.imageEl.addEventListener("load",this.finishLoading),this.imageEl.addEventListener("error",this.handleImageDownloadError),this.isMobile&&this.imageEl.addEventListener("orientationchange",this.handleOrientationChange)}},{key:"unbindDOMListeners",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unbindDOMListeners",this).call(this),this.imageEl&&(this.imageEl.removeEventListener("load",this.finishLoading),this.imageEl.removeEventListener("error",this.handleImageDownloadError)),this.isMobile&&this.imageEl.removeEventListener("orientationchange",this.handleOrientationChange)}},{key:"handleOrientationChange",value:function(){this.adjustImageZoomPadding(),this.scale=this.imageEl.clientWidth/this.imageEl.getAttribute("originalWidth"),this.rotationAngle=this.currentRotationAngle%3600%360,this.emit("scale",{scale:this.scale,rotationAngle:this.rotationAngle})}}]),t}(s.a);t.a=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},r=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],o=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],a=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],s="undefined"!=typeof window&&void 0!==window.document?window.document:{},l="fullscreenEnabled"in s&&Object.keys(i)||r[0]in s&&r||o[0]in s&&o||a[0]in s&&a||[];t.default={requestFullscreen:function(e){return e[l[i.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[l[i.requestFullscreen]]},get exitFullscreen(){return s[l[i.exitFullscreen]].bind(s)},addEventListener:function(e,t,n){return s.addEventListener(l[i[e]],t,n)},removeEventListener:function(e,t,n){return s.removeEventListener(l[i[e]],t,n)},get fullscreenEnabled(){return Boolean(s[l[i.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return s[l[i.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return s[("on"+l[i.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return s[("on"+l[i.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return s[("on"+l[i.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return s[("on"+l[i.fullscreenerror]).toLowerCase()]=e}}},function(e,t,n){var i;!function(r){function o(e){return e&&(e=e.toString().replace(u.pluses,"%20"),e=decodeURIComponent(e)),e}function a(e){var t=u.uri_parser,n=["source","protocol","authority","userInfo","user","password","host","port","isColonUri","relative","path","directory","file","query","anchor"],i=t.exec(e||""),r={};return n.forEach(function(e,t){r[e]=i[t]||""}),r}function s(e){var t,n,i,r,a,s,l,c=[];if(void 0===e||null===e||""===e)return c;for(0===e.indexOf("?")&&(e=e.substring(1)),n=e.toString().split(u.query_separator),t=0,l=n.length;t<l;t++)i=n[t],0!==(r=i.indexOf("="))&&(a=o(i.substring(0,r)),s=o(i.substring(r+1)),c.push(-1===r?[i,null]:[a,s]));return c}function l(e){this.uriParts=a(e),this.queryPairs=s(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}var u={starts_with_slashes:/^\/+/,ends_with_slashes:/\/+$/,pluses:/\+/g,query_separator:/[&;]/,uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?(:)?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,i;if(null==this)throw new TypeError(" this is null or not defined");var r=Object(this),o=r.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),i=0;i<o;){var a;i in r&&(a=r[i],e.call(n,a,i,r)),i++}}),["protocol","userInfo","host","port","path","anchor"].forEach(function(e){l.prototype[e]=function(t){return void 0!==t&&(this.uriParts[e]=t),this.uriParts[e]}}),l.prototype.hasAuthorityPrefix=function(e){return void 0!==e&&(this.hasAuthorityPrefixUserPref=e),null===this.hasAuthorityPrefixUserPref?-1!==this.uriParts.source.indexOf("//"):this.hasAuthorityPrefixUserPref},l.prototype.isColonUri=function(e){if(void 0===e)return!!this.uriParts.isColonUri;this.uriParts.isColonUri=!!e},l.prototype.query=function(e){var t,n,i,r="";for(void 0!==e&&(this.queryPairs=s(e)),t=0,i=this.queryPairs.length;t<i;t++)n=this.queryPairs[t],r.length>0&&(r+="&"),null===n[1]?r+=n[0]:(r+=n[0],r+="=",void 0!==n[1]&&(r+=encodeURIComponent(n[1])));return r.length>0?"?"+r:r},l.prototype.getQueryParamValue=function(e){var t,n,i;for(n=0,i=this.queryPairs.length;n<i;n++)if(t=this.queryPairs[n],e===t[0])return t[1]},l.prototype.getQueryParamValues=function(e){var t,n,i,r=[];for(t=0,i=this.queryPairs.length;t<i;t++)n=this.queryPairs[t],e===n[0]&&r.push(n[1]);return r},l.prototype.deleteQueryParam=function(e,t){var n,i,r,a,s,l=[];for(n=0,s=this.queryPairs.length;n<s;n++)i=this.queryPairs[n],r=o(i[0])===o(e),a=i[1]===t,(1!==arguments.length||r)&&(2!==arguments.length||r&&a)||l.push(i);return this.queryPairs=l,this},l.prototype.addQueryParam=function(e,t,n){return 3===arguments.length&&-1!==n?(n=Math.min(n,this.queryPairs.length),this.queryPairs.splice(n,0,[e,t])):arguments.length>0&&this.queryPairs.push([e,t]),this},l.prototype.hasQueryParam=function(e){var t,n=this.queryPairs.length;for(t=0;t<n;t++)if(this.queryPairs[t][0]==e)return!0;return!1},l.prototype.replaceQueryParam=function(e,t,n){var i,r,a=-1,s=this.queryPairs.length;if(3===arguments.length){for(i=0;i<s;i++)if(r=this.queryPairs[i],o(r[0])===o(e)&&decodeURIComponent(r[1])===o(n)){a=i;break}a>=0&&this.deleteQueryParam(e,o(n)).addQueryParam(e,t,a)}else{for(i=0;i<s;i++)if(r=this.queryPairs[i],o(r[0])===o(e)){a=i;break}this.deleteQueryParam(e),this.addQueryParam(e,t,a)}return this},["protocol","hasAuthorityPrefix","isColonUri","userInfo","host","port","path","query","anchor"].forEach(function(e){var t="set"+e.charAt(0).toUpperCase()+e.slice(1);l.prototype[t]=function(t){return this[e](t),this}}),l.prototype.scheme=function(){var e="";return this.protocol()?(e+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(e+=":"),e+="//"):this.hasAuthorityPrefix()&&this.host()&&(e+="//"),e},l.prototype.origin=function(){var e=this.scheme();return this.userInfo()&&this.host()&&(e+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(e+="@")),this.host()&&(e+=this.host(),(this.port()||this.path()&&this.path().substr(0,1).match(/[0-9]/))&&(e+=":"+this.port())),e},l.prototype.addTrailingSlash=function(){var e=this.path()||"";return"/"!==e.substr(-1)&&this.path(e+"/"),this},l.prototype.toString=function(){var e,t=this.origin();return this.isColonUri()?this.path()&&(t+=":"+this.path()):this.path()?(e=this.path(),u.ends_with_slashes.test(t)||u.starts_with_slashes.test(e)?(t&&t.replace(u.ends_with_slashes,"/"),e=e.replace(u.starts_with_slashes,"/")):t+="/",t+=e):this.host()&&(this.query().toString()||this.anchor())&&(t+="/"),this.query().toString()&&(t+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(t+="#"),t+=this.anchor()),t},l.prototype.clone=function(){return new l(this.toString())},void 0!==(i=function(){return l}.call(t,n,t,e))&&(e.exports=i)}()},function(e,t,n){"use strict";function i(e){var t="",n=e.keyIdentifier,i=e.key||n||"";return e.ctrlKey?t="Control":e.shiftKey?t="Shift":e.metaKey&&(t="Meta"),i===t&&(i=""),0===i.indexOf("U+")&&(i="U+001B"===i?"Escape":String.fromCharCode(Number(i.replace("U+","0x")))),i?(" "===i&&(i="Space"),"Esc"===i&&(i="Escape"),"Right"!==i&&"Left"!==i&&"Down"!==i&&"Up"!==i||(i="Arrow"+i),t&&(t+="+"),t+i):""}n.d(t,"a",function(){return i})},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){e.exports='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M7 10l5 5 5-5z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M7 14l5-5 5 5z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#000" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n'},function(e,t){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" focusable="false">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3h-6zM3 3v6l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm11.41 12.83l2.89 2.87L15 21h6v-6l-2.3 2.3-2.87-2.89-1.42 1.42zM5.3 17.3L3 15v6h6l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3z" fill="#fff" />\n        <path d="M0 0h24v24H0z" />\n    </g>\n</svg>\n\n'},function(e,t){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" focusable="false">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z" />\n        <path d="M19.58 3l-2.87 2.89-2.3-2.3v6h6l-2.3-2.3L21 4.42 19.58 3zM4.42 3L3 4.42l2.89 2.87-2.3 2.3h6v-6l-2.3 2.3L4.42 3zm9.99 11.41v6l2.3-2.3L19.58 21 21 19.58l-2.89-2.87 2.3-2.3h-6zm-10.82 0l2.3 2.3L3 19.58 4.42 21l2.87-2.89 2.3 2.3v-6h-6z" fill="#fff" />\n    </g>\n</svg>\n'},function(e,t){e.exports='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#999EA4" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/>\n    <path d="M0-.5h24v24H0z" fill="none"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#999EA4" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/>\n    <path d="M0-.25h24v24H0z" fill="none"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#22A7F0" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/>\n</svg>\n'},function(e,t){e.exports='<svg version="1.1" width="24" height="24" viewBox="0 0 24 24" enable-background="new 0 0 24 24" focusable="false">\n    <path fill="#fff" d="M19.4,13c0-0.3,0.1-0.6,0.1-1s0-0.7-0.1-1l2.1-1.6c0.2-0.1,0.2-0.4,0.1-0.6l-2-3.5c-0.1-0.2-0.4-0.3-0.6-0.2l-2.5,1 c-0.5-0.4-1.1-0.7-1.7-1l-0.4-2.7C14.5,2.2,14.2,2,14,2h-4C9.8,2,9.5,2.2,9.5,2.4L9.1,5.1C8.5,5.3,8,5.7,7.4,6.1l-2.5-1 C4.7,5,4.5,5.1,4.3,5.3l-2,3.5C2.2,8.9,2.3,9.2,2.5,9.4L4.6,11c0,0.3-0.1,0.6-0.1,1s0,0.7,0.1,1l-2.1,1.6c-0.2,0.1-0.2,0.4-0.1,0.6 l2,3.5C4.5,18.9,4.7,19,5,18.9l2.5-1c0.5,0.4,1.1,0.7,1.7,1l0.4,2.6c0,0.2,0.2,0.4,0.5,0.4h4c0.2,0,0.5-0.2,0.5-0.4l0.4-2.6 c0.6-0.2,1.2-0.6,1.7-1l2.5,1c0.2,0.1,0.5,0,0.6-0.2l2-3.5c0.1-0.2,0.1-0.5-0.1-0.6L19.4,13z M12,15.5c-1.9,0-3.5-1.6-3.5-3.5 s1.6-3.5,3.5-3.5s3.5,1.6,3.5,3.5S13.9,15.5,12,15.5z"></path>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#955ca5" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="#955ca5" d="M19 20.1V17h-6v4.5a1.5 1.5 0 1 1-1.5-1.5.9.9 0 0 1 .5.1V13h8v8.5a1.5 1.5 0 1 1-1.5-1.5.9.9 0 0 1 .5.1zM13 16h6v-2h-6z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="160"><path d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z" fill="#0696d7"></path><path d="M18 17v-2h-2v-4h-1v4h-2v2H9v1h4v2h2v4h1v-4h2v-2h4v-1zm-1 2h-3v-3h3z" fill="#0696d7"></path></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#0061d5" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#980de0" d="M18.85 14.5H10.1a.75.75 0 0 0 0 1.5h7.7z"/><path fill="#0061d5" d="M16.7 17.5h-6.6a.76.76 0 0 0 0 1.52h5.59z"/><path fill="#00c9c1" d="M14.7 20.5h-4.6a.75.75 0 0 0 0 1.5H14l.05-.25c.05-.15.05-.4.15-.5z"/><path fill="#000123" d="M19.7 14.95a2.57 2.57 0 0 0 .6.6 2.17 2.17 0 0 0 .75.35l-4.6 6.45-.3.3-1.55 1.15c-.1.1-.2 0-.15-.1l.45-1.9a1.5 1.5 0 0 1 .2-.4zm1-1.5a1 1 0 0 1 1.25.9 6.38 6.38 0 0 1-.5.85 4.86 4.86 0 0 1-.75-.3 1.7 1.7 0 0 1-.65-.65z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#e33d55" d="M20 19h1v1h-1zM20 13h-3v1h2v3h1v-4M19 23h-2v1h3v-4h-1v3M21 18h1v1h-1zM20 17h1v1h-1zM11 24h3v-1h-2v-3h-1v4M10 19h1v1h-1zM10 17h1v1h-1zM9 18h1v1H9zM12 14h2v-1h-3v4h1v-3"/><path fill="#e33d55" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 .88 1H25a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 .88 1H25z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#d0011b" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#d0011b" d="M10 19h11v1H10zM10 21h11v1H10zM15 23h6v1h-6zM16.55 12.44V10h-2.1V12.44H12v2.12h2.45V17h2.1v-2.44H19v-2.12h-2.45"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#737f8b" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#2a62b9" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#2a62b9" d="M10 20h8v1h-8zm0-3h11v1H10zm0-3h11v1H10z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#207245;}</style><path d="M25 27H7V5h13l5 5z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M10 13h3v2h-3zm4 0h3v2h-3zm4 0h3v2h-3zm-8 3h3v2h-3zm4 0h3v2h-3zm4 0h3v2h-3zm-8 3h3v2h-3zm4 0h3v2h-3zm4 0h3v2h-3zm-8 3h3v2h-3zm4 0h3v2h-3zm4 0h3v2h-3z" class="st1"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#4083F7;}</style><path d="M25 27H7V5h13l5 5v17z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M10 15h11v1H10v-1zm0 2h11v1H10v-1zm0 2h11v1H10v-1zm0 2h8v1h-8v-1z" class="st1"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5z"/><path fill="#21a464" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="#21a464" d="M20 13h-9a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-8a1 1 0 0 0-1-1zm-5 9h-4v-2h4zm0-3h-4v-2h4zm0-3h-4v-2h4zm5 6h-4v-2h4zm0-3h-4v-2h4zm0-3h-4v-2h4z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#F7BA00;}</style><path d="M25 27H7V5h13l5 5z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M10 14v9c0 .6.4 1 1 1h9c.6 0 1-.4 1-1v-9c0-.6-.4-1-1-1h-9c-.6 0-1 .4-1 1zm10 7h-9v-5h9v5z" class="st1"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#f7931d" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#f7931d" d="M14 14.85L12.89 18h2.25zm2.16 6l-.68-2h-2.83l-.71 2H11l2.61-7.1h.88l2.61 7.1zM18.99 13.7h.89v7.1h-.89z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#3fb87f" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#3fb87f" d="M18 17a2 2 0 1 1 2-2 2 2 0 0 1-2 2zm-.6 4.09l-3.12-3.71a.41.41 0 0 0-.58-.06l-.06.06L9 23h13l-2.72-3.6a.35.35 0 0 0-.6 0z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#157ef8" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="#157ef8" d="M21.19 18.24a.44.44 0 0 1-.09.12l-.12.09H10a.44.44 0 0 1-.12-.09.51.51 0 0 1-.09-.12.51.51 0 0 1 0-.14v-.6h11.5v.6a.48.48 0 0 1-.1.14zM10 17s.14-2.51.18-3.36v-.4a1.44 1.44 0 0 1 0-.2.65.65 0 0 1 .06-.19.66.66 0 0 1 .12-.16.63.63 0 0 1 .16-.11.65.65 0 0 1 .19-.06h.77v-.56a1.9 1.9 0 0 1 0-.26.83.83 0 0 1 .25-.49.72.72 0 0 1 .2-.13.94.94 0 0 1 .29-.09h1.48a.15.15 0 0 0 .13 0l.16-.22a.48.48 0 0 1 .12-.1l.16-.05h1.38l.16.05a.56.56 0 0 1 .14.1.52.52 0 0 1 .1.14.59.59 0 0 1 .06.16.71.71 0 0 1 0 .16 1 1 0 0 1 0 .23.58.58 0 0 1-.06.16.57.57 0 0 1-.24.24l-.16.06h-1.38a.63.63 0 0 1-.16-.05l-.1-.07-.16-.17a.17.17 0 0 0-.12-.07h-1.55a.35.35 0 0 0-.14.14.32.32 0 0 0 0 .1 1.06 1.06 0 0 0 0 .18v.57h8.27a.65.65 0 0 1 .19.06.65.65 0 0 1 .16.11.62.62 0 0 1 .12.16.65.65 0 0 1 .06.19 1.18 1.18 0 0 1 0 .2v.32c0 .65.18 3.43.18 3.43H10zm3 6.5h2V19h1v4.5h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#22a7f0" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#22a7f0" d="M12.43 21.8c-.24.13-.43 0-.43-.27v-8c0-.28.2-.4.43-.27l7.14 4a.25.25 0 0 1 0 .48z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#2ABB80;}</style><path d="M25 27H7V5h13l5 5z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M21.5 23.5h-12c-.3 0-.5-.2-.5-.5s.2-.5.5-.5h12c.3 0 .5.2.5.5s-.2.5-.5.5zm0-2H20c-.3 0-.5-.2-.5-.5v-6c0-.3.2-.5.5-.5h1.5c.3 0 .5.2.5.5v6c0 .3-.2.5-.5.5zm-3.5 0h-1.5c-.3 0-.5-.2-.5-.5v-8.5c0-.3.2-.4.5-.4H18c.3 0 .5.1.5.4V21c0 .3-.2.5-.5.5zm-3.5 0H13c-.3 0-.5-.2-.5-.5v-4.5c0-.3.2-.5.5-.5h1.5c.3 0 .5.2.5.5V21c0 .3-.2.5-.5.5zm-3.5 0H9.5c-.3 0-.5-.2-.5-.5v-1.5c0-.3.2-.5.5-.5H11c.3 0 .5.2.5.5V21c0 .3-.2.5-.5.5z" class="st1"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#f7931d" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="none" d="M12 15.2a.84.84 0 0 1 .4-.7l3.6-1.9a1.39 1.39 0 0 1 .9 0l3.6 1.9a.75.75 0 0 1 .4.7v4.9a.84.84 0 0 1-.4.7l-3.6 1.9a1.39 1.39 0 0 1-.9 0l-3.6-1.9a.84.84 0 0 1-.4-.7z"/><path fill="#f7931d" d="M19.5 14.4l-3.6-1.9a1.39 1.39 0 0 0-.9 0l-3.5 1.9a1 1 0 0 0-.5.8v4.9a.84.84 0 0 0 .4.7l3.6 1.9a1.39 1.39 0 0 0 .9 0l3.6-1.9a1.16 1.16 0 0 0 .5-.7v-4.9a1.37 1.37 0 0 0-.5-.8zM12 20v-4.7l3.4-1.8 3.5 1.8-3.5 2.1v4.4z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#f49d31" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="#f49d31" d="M25 24H10.5a.5.5 0 0 1 0-1H25zm-4.35-10.45a.47.47 0 0 1 .06.63c-.14.24-1.65 1.76-2.57 2.68l-.07.07c-.45.45-.4.56-.39.6s.08.2 0 .29a.18.18 0 0 1-.24 0 .5.5 0 0 1 0-.54 2.15 2.15 0 0 1 .41-.52A31.57 31.57 0 0 0 20.37 14v-.17l-.27-.27c-.94 1-2.16 2.25-3.53 3.56L15.47 16c1.44-1.42 2.85-2.76 4-3.77a.76.76 0 0 1 1-.11.72.72 0 0 1-.1 1l-.08.09.29.28zM13 20.42a8.94 8.94 0 0 1-1.09.83l-.67-.65a8.84 8.84 0 0 1 .86-1.06c.59-.67 1.8-1.91 3-3.09l1.1 1.06c-1.28 1.16-2.56 2.33-3.2 2.91zm-2.7 1.75a.11.11 0 0 1-.14 0 .1.1 0 0 1 0-.14c.24-.35.46-.6.69-.93l.5.48c-.35.21-.69.36-1.05.59z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#e33d55" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#e33d55" d="M21.53 20.17a2 2 0 0 0-1.76-.93 10 10 0 0 0-1.54.11 4.77 4.77 0 0 0 3.13.81 1 1 0 0 1-.84.86 2.4 2.4 0 0 1-1.52-.21 17.59 17.59 0 0 1-1.73-1 .55.55 0 0 0-.54-.09l-2.58.93a.85.85 0 0 0-.37.3c-1.29 1.95-2.44 3-2.93 3.06s-1.13-.18-.86-1.37 1.23-1.49 2.29-1.74c-1.08.8-1.5 1.42-1.41 2.1a.83.83 0 0 0 .13-.14 24.24 24.24 0 0 0 3.8-5.45.4.4 0 0 0 0-.41 6.94 6.94 0 0 1-.9-3.66c.26-2.53 2.55-1.55 2 .38a1.87 1.87 0 0 0-.51-1.1c-.29-.22-.54-.12-.59.23a5.77 5.77 0 0 0 .51 3.35 5.46 5.46 0 0 0 .46-2.2.9.9 0 0 1 .52.62 2.8 2.8 0 0 1-.08 1.62c-.08.28-.2.56-.28.84a.34.34 0 0 0 0 .27c.37.42.75.82 1.15 1.22a.36.36 0 0 0 .3 0 7.22 7.22 0 0 1 2.11-.44 1.82 1.82 0 0 1 2 1.62zm-6-2.12l-1 1.84 1.9-.88z"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#B84729;}</style><path d="M25 27H7V5h13l5 5z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M10 20h11v1H10zm0 2h11v1H10zm5-9c-1.7 0-3 1.3-3 3s1.3 3 3 3 3-1.3 3-3h-3v-3z" class="st1"/><path d="M16 12v3h3c0-1.7-1.3-3-3-3z" class="st1"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#f7931d" d="M20 4H7a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1V9.89zm5 23H7V5h13v4a1 1 0 0 0 1 1h4z"/><path fill="#f7931d" d="M10.35 22.41l-.7-.71 4.88-4.86 2.49 2.47 4.63-4.61.7.71-5.33 5.32-2.49-2.48-4.18 4.16"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160px" viewBox="0 0 32 32"><title>SPREADSHEET</title><polygon points="25 27 7 27 7 5 20 5 25 10 25 27" style="fill:#fff"/><path d="M20,4H7A1,1,0,0,0,6,5V27a1,1,0,0,0,1,1H25a1,1,0,0,0,1-1V9.89Zm5,23H7V5H20V9a1,1,0,0,0,1,1h4Z" style="fill:#3fb87f"/><path d="M21,13H11a1,1,0,0,0-1,1v8a1,1,0,0,0,1,1H21a1,1,0,0,0,1-1V14A1,1,0,0,0,21,13ZM11,14h3v2H11Zm0,3h3v2H11Zm0,5V20h3v2Zm10,0H15V20h6Zm0-3H15V17h6Zm-6-3V14h6v2Z" style="fill:#3fb87f"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="160" viewBox="0 0 32 32"><style>.st0{fill:#FFFFFF;} .st1{fill:#2A5696;}</style><path d="M25 27H7V5h13l5 5z" class="st0"/><path d="M20 4H7c-.6 0-1 .4-1 1v22c0 .6.4 1 1 1h18c.6 0 1-.4 1-1V9.9L20 4zm5 23H7V5h13v4c0 .6.4 1 1 1h4v17z" class="st1"/><path d="M10 13h11v1H10zm0 2h11v1H10zm0 2h11v1H10zm0 2h11v1H10zm0 2h11v1H10z" class="st1"/></svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="160" viewBox="0 0 32 32"><path fill="#fff" d="M25 27H7V5h13l5 5v17"/><path fill="#737f8b" d="M11 25h1v1h-1zM11 23h1v1h-1zM11 21h1v1h-1zM11 19h1v1h-1zM11 17h1v1h-1zM11 15h1v1h-1zM11 13h1v1h-1zM11 11h1v1h-1zM11 9h1v1h-1zM11 7h1v1h-1zM11 5h1v1h-1zM12 24h1v1h-1zM12 22h1v1h-1zM12 20h1v1h-1zM12 18h1v1h-1zM12 16h1v1h-1zM12 14h1v1h-1zM12 12h1v1h-1zM12 10h1v1h-1zM12 8h1v1h-1zM12 6h1v1h-1z"/><path fill="#737f8b" d="M20 4H7a.94.94 0 0 0-1 1v22a.94.94 0 0 0 1 1h18a.94.94 0 0 0 1-1V9.9zm5 23H7V5h13v4a.94.94 0 0 0 1 1h4z"/><path fill="#737f8b" d="M12 26h1v1h-1z"/></svg>\n'},function(e,t){e.exports='<svg width="24" height="22" viewBox="0 0 24 22" focusable="false">\n  <g fill="none" fill-rule="evenodd">\n    <path d="M0-1h24v24H0"/>\n    <path d="M18.49 4.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z" fill="#FFF"/>\n    <path d="M3 7h6M5 3h6M1 11h6" stroke="#FFF" stroke-width="2" stroke-linecap="square"/>\n  </g>\n</svg>\n'},function(e,t){e.exports='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M8 5v14l11-7z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#fff" height="48" viewBox="0 0 24 24" width="48" focusable="false">\n    <path d="M8 5v14l11-7z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>\n'},function(e,t){e.exports='<svg fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" focusable="false">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0V0z" />\n        <path d="M2.045 17.25c1.114 1.296 5.66 1.487 7.033.268 1.374-1.22 1.367-1.733 2.972-1.733 1.692 0 1.436-.02 3.122 1.732 1.687 1.752 5.973.84 6.9-.268.927-1.11 1.507-7.72 0-10.038-1.507-2.317-18.38-2.25-20.027 0-1.647 2.252-1.114 8.74 0 10.037z" stroke="#FFF" stroke-width="2" />\n    </g>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="-11 13 24 24" focusable="false">\n  <path class="icon" fill="#494949" d="M-4 23l5 5 5-5H-4z"/>\n  <path fill="none" d="M-11 13h24v24h-24V13z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="-11 13 24 24" focusable="false">\n  <path class="icon" fill="#494949" d="M-4 27l5-5 5 5H-4z"/>\n  <path fill="none" d="M-11 13h24v24h-24V13z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="-11 13 24 24" focusable="false">\n  <path class="icon" fill="#494949" d="M6 21l-1-1-4 4-4-4-1 1 4 4-4 4 1 1 4-4 4 4 1-1-4-4 4-4z"/>\n  <path fill="none" d="M-11 13h24v24h-24V13z"/>\n</svg>\n'},function(e,t){e.exports='<svg viewBox="-11 13 24 24" focusable="false">\n  <path class="icon" fill="#494949" d="M3.3 26.3h-.5l-.2-.2c.7-.8 1.1-1.8 1.1-2.9 0-2.5-2-4.5-4.5-4.5s-4.5 2-4.5 4.5 2 4.5 4.5 4.5c1.1 0 2.1-.4 2.9-1.1l.2.2v.5l3.4 3.4 1-1-3.4-3.4zm-4.1 0c-1.7 0-3.1-1.4-3.1-3.1s1.4-3.1 3.1-3.1 3.1 1.4 3.1 3.1-1.4 3.1-3.1 3.1z"/>\n  <path fill="none" d="M-11 13h24v24h-24V13z"/>\n</svg>\n'},function(e,t){e.exports='<svg width="16" height="16" viewBox="0 0 16 16" focusable="false">\n  <path d="M4.187 6.48L3.067 7.6l3.6 3.6 8-8-1.12-1.12-6.88 6.88-2.48-2.48zM14.4 8c0 3.52-2.88 6.4-6.4 6.4-3.52 0-6.4-2.88-6.4-6.4 0-3.52 2.88-6.4 6.4-6.4.64 0 1.2.08 1.76.24L11.04.56C10.08.24 9.04 0 8 0 3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8h-1.6z" fill="#22A7F0" fill-rule="evenodd"/>\n</svg>\n'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path d="M15 18H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3zM3 2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z" fill="#fff"/><path d="M3 4h3v2H3zm0 4h3v2H3zm0 4h3v2H3z" fill="#fff"/></svg>\n'},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(111),s=n(113),l=n(298),u=(n.n(l),n(6)),c=n(0),h=n(1),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.singleImageEls=[],n.setPage=n.setPage.bind(n),n.scrollHandler=n.scrollHandler.bind(n),n.handlePageChangeFromScroll=n.handlePageChangeFromScroll.bind(n),n.handleMultiImageDownloadError=n.handleMultiImageDownloadError.bind(n),n.handleAssetAndRepLoad=n.handleAssetAndRepLoad.bind(n),n}return o(t,e),d(t,[{key:"setup",value:function(){this.isSetup||(p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.wrapperEl=this.createViewer(document.createElement("div")),this.wrapperEl.className="bp-images-wrapper "+c.N,this.wrapperEl.tabIndex="0",this.imageEl=this.wrapperEl.appendChild(document.createElement("div")),this.imageEl.classList.add("bp-images"),this.singleImageEls.push(this.imageEl.appendChild(document.createElement("img"))),this.loadTimeout=6e4,this.currentPageNumber=1,this.previousScrollTop=0)}},{key:"destroy",value:function(){var e=this;this.singleImageEls&&this.singleImageEls.length>0&&this.singleImageEls.forEach(function(t,n){e.unbindImageListeners(n)}),this.pageControls&&this.pageControls.removeListener("pagechange",this.setPage),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"load",value:function(){return p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this),this.imageEl.classList.add(c.L),this.bindImageListeners(0),this.bindDOMListeners(),this.getRepStatus().getPromise().then(this.handleAssetAndRepLoad).catch(this.handleAssetError)}},{key:"handleAssetAndRepLoad",value:function(){var e=this,n=this.options.representation.content.url_template;this.imageUrls=this.constructImageUrls(n),this.startLoadTimer(),this.imageUrls.forEach(function(t,n){return e.setupImageEls(t,n)}),this.wrapperEl.addEventListener("scroll",this.scrollHandler,!0),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleAssetAndRepLoad",this).call(this)}},{key:"constructImageUrls",value:function(e){var t=this.options,n=t.viewer,i=t.representation,r=i.metadata,o=n.ASSET;this.pagesCount=r.pages;for(var a=this.createContentUrlWithAuthParams(e,o),s=[],l=1;l<=this.pagesCount;l++)s.push(a.replace("{page}",l));return s}},{key:"setupImageEls",value:function(e,t){0!==t&&(this.singleImageEls[t]=this.imageEl.appendChild(document.createElement("img")),this.bindImageListeners(t)),this.singleImageEls[t].setAttribute("data-page-number",t+1),this.singleImageEls[t].classList.add(c.R),this.singleImageEls[t].src=e}},{key:"setOriginalImageSize",value:function(){var e=this,n=[];return this.singleImageEls.forEach(function(i){n.push(p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setOriginalImageSize",e).call(e,i))}),Promise.all(n)}},{key:"updatePannability",value:function(){this.wrapperEl&&(this.isPannable=this.imageEl.clientWidth>this.wrapperEl.clientWidth,this.didPan=!1,this.updateCursor())}},{key:"zoom",value:function(e){var t=void 0,n=this.imageEl.parentNode.clientWidth,i=this.imageEl.clientWidth;switch(e){case"in":t=i+100;break;case"out":t=i-100;break;default:t=n}this.imageEl.style.width=t+"px",this.imageEl.parentNode.scrollLeft=(this.imageEl.parentNode.scrollWidth-n)/2,this.setScale(this.imageEl.offsetWidth,this.imageEl.offsetHeight),this.emit("zoom"),setTimeout(this.updatePannability,50),this.setPage(this.currentPageNumber)}},{key:"setScale",value:function(e,t){var n=this.singleImageEls[0];this.scale=e?e/n.naturalWidth:t/n.naturalHeight,this.emit("scale",{scale:this.scale})}},{key:"loadUI",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadUI",this).call(this),this.pageControls=new s.a(this.controls,this.wrapperEl),this.bindPageControlListeners()}},{key:"bindPageControlListeners",value:function(){this.pageControls.add(this.currentPageNumber,this.pagesCount),this.pageControls.addListener("pagechange",this.setPage),this.controls.add("Enter fullscreen",this.toggleFullscreen,"bp-enter-fullscreen-icon",u.l),this.controls.add("Exit fullscreen",this.toggleFullscreen,"bp-exit-fullscreen-icon",u.m)}},{key:"handleMultiImageDownloadError",value:function(e){var t=this;this.singleImageEls.forEach(function(e,n){t.unbindImageListeners(n)});var n=this.singleImageEls[0].src;this.singleImageEls=[],this.handleDownloadError(e,n)}},{key:"bindImageListeners",value:function(e){0===e&&this.singleImageEls[e].addEventListener("load",this.finishLoading),this.singleImageEls[e].addEventListener("error",this.handleMultiImageDownloadError)}},{key:"unbindImageListeners",value:function(e){0===e&&this.singleImageEls[e].removeEventListener("load",this.finishLoading),this.singleImageEls[e].removeEventListener("error",this.handleMultiImageDownloadError)}},{key:"previousPage",value:function(){this.setPage(this.currentPageNumber-1)}},{key:"nextPage",value:function(){this.setPage(this.currentPageNumber+1)}},{key:"setPage",value:function(e){this.isValidPageChange(e)&&(this.singleImageEls[e-1].scrollIntoView(),this.updateCurrentPage(e))}},{key:"updateCurrentPage",value:function(e){this.isValidPageChange(e)&&(this.currentPageNumber=e,this.pageControls.updateCurrentPage(e),this.emit("pagefocus",{pageNumber:e}))}},{key:"isValidPageChange",value:function(e){return e>=1&&e<=this.pagesCount&&e!==this.currentPageNumber}},{key:"scrollHandler",value:function(){if(!this.scrollCheckHandler){var e=this.handlePageChangeFromScroll;this.scrollCheckHandler=window.requestAnimationFrame(e)}}},{key:"handlePageChangeFromScroll",value:function(){var e=Object(h.A)(this.currentPageNumber,this.previousScrollTop,this.singleImageEls[this.currentPageNumber-1],this.wrapperEl);this.updateCurrentPage(e),this.scrollCheckHandler=null,this.previousScrollTop=this.wrapperEl.scrollTop}}]),t}(a.a);t.a=f},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(114),s=n(5),l=n(8),u=n(2),c=n(1),h=n(300),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f=[{NAME:"Image360",CONSTRUCTOR:h.a,REP:"3d",EXT:["jpg","jpeg","png","ai","bmp","dcm","eps","gif","heic","ps","psd","svg","svs","tga","tif","tiff"]}],v=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=f,e}return o(t,e),d(t,[{key:"determineViewer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"determineViewer",this).call(this,e,n);if(i&&!s.a.hasWebGL()){var r=Object(c.D)("We're sorry, your browser doesn't support preview for {1}.",["360-degree images"]);throw new l.a(u.c.BROWSER_UNSUPPORTED,r,{file:e})}return i}}]),t}(a.a);t.a=new v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(301),s=(n.n(a),n(115)),l=n(66),u=n(304),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},d=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"setup",value:function(){this.isSetup||(h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.wrapperEl.classList.add("bp-image-360"),this.loadTimeout=12e4)}},{key:"createSubModules",value:function(){this.controls=new l.a(this.wrapperEl),this.renderer=new u.a(this.wrapperEl,this.boxSdk)}}]),t}(s.a);t.a=d},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(45),s=n(305),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},c=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"destroy",value:function(){this.cleanupTexture(),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"cleanupTexture",value:function(){this.imageAsset&&(this.imageAsset.destroy(),this.imageAsset=null),this.textureAsset&&(this.textureAsset.destroy(),this.textureAsset=null),this.skybox&&(this.getSkyboxComponent().setAttribute("skyboxTexture",null),this.skybox=null)}},{key:"getSkyboxComponent",value:function(){return this.skybox||(this.skybox=this.getScene().getComponentByScriptId("skybox_renderer")),this.skybox}},{key:"load",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n;return i.sceneEntities=i.sceneEntities||s.a,u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e,i).then(this.loadPanoramaFile.bind(this,e)).then(this.onSceneLoad.bind(this))}},{key:"loadPanoramaFile",value:function(e){var t=this;return this.box3d.importEntitiesFromUrl(e).then(function(){return t.imageAsset=t.box3d.getAssetByClass(Box3D.ImageAsset),t.textureAsset=t.box3d.createTexture2d(),t.textureAsset.setProperties({imageId:t.imageAsset.id,wrapModeV:"clampToEdge",wrapModeU:"clampToEdge"}),new Promise(function(e){t.textureAsset.load(function(){t.skybox=t.getSkyboxComponent(),t.skybox.enable(),t.skybox.setAttribute("skyboxTexture",t.textureAsset.id),e()})})},function(){return t.onUnsupportedRepresentation()})}},{key:"enableVr",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enableVr",this).call(this),this.getSkyboxComponent().setAttribute("stereoEnabled",!0)}},{key:"disableVr",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disableVr",this).call(this),this.getSkyboxComponent().setAttribute("stereoEnabled",!1)}}]),t}(a.a);t.a=c},function(e,t,n){"use strict";var i=n(5);t.a=[{id:"CAMERA_ID",type:"camera",parentId:"SCENE_ID",properties:{near:.05,far:200,fov:70},components:[{name:"Render View",enabled:!0,scriptId:"vr_render_view"},{name:"Orbit Camera",attributes:{panEnabled:!1,zoomEnabled:!0,inertialDamping:.2,lookSpeed:.5},enabled:!0,scriptId:"orbit_camera"},{name:"VR Camera Controller",enabled:!0,scriptId:"vr_camera_controller"}]},{id:"SCENE_ID",type:"scene",children:["CAMERA_ID"],components:[{name:"Skybox",attributes:{size:100},scriptId:"skybox_renderer",enabled:!1}]},{id:"APP_ASSET_ID",type:"application",properties:{startupSceneId:"SCENE_ID"},components:[{name:"Renderer",attributes:{antialias:!i.a.isMobile(),maxTextureSize2d:8192,renderOnDemand:!0},scriptId:"box3d_renderer",isBuiltIn:!0,enabled:!0},{name:"Debug Performance",scriptId:"debug_performance",enabled:!1},{name:"Input",scriptId:"input",isBuiltIn:!0,enabled:!0,attributes:{mouseEvents:{enable:!0,scroll:!0,preventScrollDefault:!0,move:!0,down:!0,preventDownDefault:!1,up:!0,doubleClick:!0,leave:!0,contextMenu:!0,preventContextMenuDefault:!0,dragBufferDistance:12,eventHandler:!0},touchEvents:{enable:!0,start:!0,preventStartDefault:!1,end:!0,doubleTap:!0,cancel:!0,leave:!0,move:!0,preventMoveDefault:!0,dragBufferDistance:12,eventHandler:!0},keyEvents:{enable:!0,down:!0,up:!0,preventDefault:!1,eventHandler:!0}}},{name:"VR Presenter",scriptId:"vr_presenter"}]}]},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(13),s=n(307),l=n(0),u=n(2),c=n(5),h=n(8),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f=[{NAME:"SWF",CONSTRUCTOR:s.a,REP:l._1,EXT:["swf"]}],v=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=f,e}return o(t,e),d(t,[{key:"determineViewer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"determineViewer",this).call(this,e,n);if(i&&!c.a.hasFlash())throw new h.a(u.c.FLASH_NOT_ENABLED,"We're sorry, the preview didn't load because Flash is not enabled on your browser. If possible, please enable Flash and refresh the page.");return i}}]),t}(a.a);t.a=new v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(14),s=n(0),l=n(2),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},h={allowfullscreen:"true",allowFullScreen:"true",allownetworking:"none",allowNetworking:"none",allowscriptaccess:"never",allowScriptAccess:"never",wmode:"transparent"},d=["third-party/swf/"+s._32+"/swfobject.js"],p=function(e){function t(){var e,n,o,a;i(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),o.postLoad=function(){var e=o.options.representation.content.url_template;o.startLoadTimer(),swfobject.embedSWF(o.createContentUrlWithAuthParams(e),o.playerEl.id,"100%","100%","9",null,null,h,null,function(){o.isDestroyed()||(o.loaded=!0,o.emit(l.l.load))})},a=n,r(o,a)}return o(t,e),u(t,[{key:"setup",value:function(){this.isSetup||(c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.playerEl=this.createViewer(document.createElement("div")),this.playerEl.id="flash-player")}},{key:"load",value:function(){return c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this),this.loadAssets(d).then(this.postLoad).catch(this.handleAssetError)}},{key:"prefetch",value:function(e){var t=e.assets;(void 0===t||t)&&this.prefetchAssets(d)}}]),t}(a.a);t.a=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(13),s=n(118),l=n(310),u=n(312),c=n(15),h=n(0),d=n(69),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},v=[{NAME:"CSV",CONSTRUCTOR:u.a,REP:"text",EXT:["csv","tsv"]},{NAME:"Markdown",CONSTRUCTOR:l.a,REP:"text",EXT:["md"]},{NAME:"Text",CONSTRUCTOR:s.a,REP:h._1,EXT:d.c},{NAME:"Text",CONSTRUCTOR:s.a,REP:"text",EXT:d.d}],b=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=v,e}return o(t,e),p(t,[{key:"determineViewer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"determineViewer",this).call(this,e,n);if(!i||!Object(c.j)(e))return i}}]),t}(a.a);t.a=new b},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(34),s=n(118),l=n(0),u=n(6),c=n(311),h=(n.n(c),n(2)),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f="third-party/text/"+l._33+"/",v=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),d(t,[{key:"setup",value:function(){this.isSetup||(p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.codeEl.parentNode.removeChild(this.codeEl),this.codeEl=null,this.markdownEl=this.textEl.appendChild(document.createElement("article")),this.markdownEl.classList.add("markdown-body"))}},{key:"getJS",value:function(){return p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJS",this).call(this).concat(f+"remarkable.min.js")}},{key:"getCSS",value:function(){return p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getCSS",this).call(this).concat(f+"github-markdown.min.css")}},{key:"print",value:function(){var e=this;if(!this.printReady)return this.preparePrint(this.getCSS().concat("preview.css")),this.printPopup.show("Preparing to print...","Print",function(){e.printPopup.hide(),e.printIframe()}),void this.printPopup.disableButton();this.printIframe()}},{key:"finishLoading",value:function(e){var t=this.initRemarkable();this.markdownEl.innerHTML=t.render(e),this.loadUI(),this.textEl.classList.remove(l.K),this.loaded=!0,this.emit(h.l.load),this.truncated&&this.showTruncatedDownloadButton()}},{key:"loadUI",value:function(){this.controls=new a.a(this.containerEl),this.controls.add("Enter fullscreen",this.toggleFullscreen,"bp-enter-fullscreen-icon",u.l),this.controls.add("Exit fullscreen",this.toggleFullscreen,"bp-exit-fullscreen-icon",u.m)}},{key:"initRemarkable",value:function(){var e=new Remarkable({breaks:!0,linkify:!0,linkTarget:"_blank",typographer:!0,highlight:function(e,t){if(t&&hljs.getLanguage(t))try{return hljs.highlight(t,e).value}catch(e){}try{return hljs.highlightAuto(e).value}catch(e){}return""}}),t=e.renderer.rules.link_open;return e.renderer.rules.link_open=function(e,n,i){return t(e,n,i).slice(0,-1)+' rel="noopener noreferrer">'},e}}]),t}(s.a);t.a=v},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(9),s=n(119),l=n(1),u=n(0),c=n(313),h=(n.n(c),n(2)),d=n(8),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},v=["third-party/text/"+u._33+"/papaparse.min.js","csv.js"],b=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),p(t,[{key:"setup",value:function(){this.isSetup||(f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.csvEl=this.createViewer(document.createElement("div")),this.csvEl.className="bp-text bp-text-csv")}},{key:"destroy",value:function(){this.csvComponent&&this.csvComponent.destroy(),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"load",value:function(){var e=this;f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this);var n=this.options,i=n.representation,r=n.location,o=i.content.url_template,s=Object(l.g)(r),u=s(v[0]);return Promise.all([this.loadAssets(v),this.getRepStatus().getPromise()]).then(function(){a.a.get(u,{type:"blob"}).then(function(t){var n=URL.createObjectURL(t);Papa.SCRIPT_PATH=n,e.startLoadTimer();var i=e.createContentUrlWithAuthParams(o);Papa.parse(i,{download:!0,error:function(t,n,r,o){var a=new d.a(h.c.LOAD_CSV,"We're sorry, the preview didn't load. Please refresh the page.",{reason:o});e.handleDownloadError(a,i)},complete:function(t){!e.isDestroyed()&&t&&(e.data=t.data,e.finishLoading(),URL.revokeObjectURL(n))}})})}).catch(this.handleAssetError)}},{key:"prefetch",value:function(e){var t=e.assets,n=void 0===t||t,i=e.content,r=void 0===i||i;n&&this.prefetchAssets(v);var o=this.options.representation;if(r&&this.isRepresentationReady(o)){var s=o.content.url_template;a.a.get(this.createContentUrlWithAuthParams(s),{type:"document"})}}},{key:"resize",value:function(){this.csvComponent&&this.csvComponent.renderCSV(),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this)}},{key:"finishLoading",value:function(){this.csvComponent=new BoxCSV(this.csvEl,this.data),this.csvComponent.renderCSV(),this.loadUI(),this.loaded=!0,this.emit(h.l.load)}}]),t}(s.a);t.a=b},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(13),s=n(1),l=n(315),u=n(322),c=n(122),h=n(8),d=n(0),p=n(2),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},b=["3g2","3gp","avi","flv","m2v","m2ts","m4v","mkv","mov","mp4","mpeg","mpg","mts","ogg","qt","ts","wmv"],m=[{NAME:"MP3",CONSTRUCTOR:l.a,REP:d._1,EXT:["mp3"]},{NAME:"Dash",CONSTRUCTOR:c.a,REP:"dash",EXT:b},{NAME:"MP4",CONSTRUCTOR:u.a,REP:"mp4",EXT:b},{NAME:"MP3",CONSTRUCTOR:l.a,REP:"mp3",EXT:["aac","aif","aifc","aiff","amr","au","flac","m4a","mp3","ra","wav","wma"]}],g=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=m,e}return o(t,e),f(t,[{key:"determineViewer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"determineViewer",this).call(this,e,n);if(i&&Object(s.E)(e)){var r=Object(s.D)("We're sorry, your browser doesn't support preview for {1}.",["360-degree videos"]);throw new h.a(p.c.BROWSER_UNSUPPORTED,r,{file:e})}return i}}]),t}(a.a);t.a=new g},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(120),s=n(321),l=(n.n(s),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),u=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},c=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"setup",value:function(){this.isSetup||(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.wrapperEl.classList.add("bp-media-mp3"),this.mediaEl=this.mediaContainerEl.appendChild(document.createElement("audio")),this.mediaEl.setAttribute("preload","auto"))}},{key:"loadUI",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadUI",this).call(this),this.mediaControls.show(),this.mediaControls.resizeTimeScrubber()}}]),t}(a.a);t.a=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(7),s=n.n(a),l=n(317),u=n.n(l),c=n(318),h=n(320),d=n(35),p=n(1),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=["bp-media-volume-icon-is-mute","bp-media-volume-icon-is-low","bp-media-volume-icon-is-medium","bp-media-volume-icon-is-high"],b=function(e){function t(e,n,o){i(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.containerEl=e,a.mediaEl=n,a.cache=o,Object(p.s)(a.containerEl,u.a),a.wrapperEl=a.containerEl.querySelector(".bp-media-controls-wrapper"),a.timeScrubberEl=a.wrapperEl.querySelector(".bp-media-time-scrubber-container"),a.volScrubberEl=a.wrapperEl.querySelector(".bp-media-volume-scrubber-container"),a.volScrubberWrapperEl=a.wrapperEl.querySelector(".bp-media-volume-scrubber-container-wrapper"),a.playButtonEl=a.wrapperEl.querySelector(".bp-media-playpause-icon"),a.setLabel(a.playButtonEl,"Play"),a.volButtonEl=a.wrapperEl.querySelector(".bp-media-volume-icon"),a.setLabel(a.volButtonEl,"Mute"),a.timecodeEl=a.wrapperEl.querySelector(".bp-media-controls-timecode"),a.durationEl=a.wrapperEl.querySelector(".bp-media-controls-duration"),a.fullscreenButtonEl=a.wrapperEl.querySelector(".bp-media-fullscreen-icon"),a.setLabel(a.fullscreenButtonEl,"Enter fullscreen"),a.settingsButtonEl=a.wrapperEl.querySelector(".bp-media-gear-icon"),a.setLabel(a.settingsButtonEl,"Settings"),a.subtitlesButtonEl=a.wrapperEl.querySelector(".bp-media-cc-icon"),a.setLabel(a.subtitlesButtonEl,"Subtitles/Closed Captions"),a.mouseenterHandler=a.mouseenterHandler.bind(a),a.mouseleaveHandler=a.mouseleaveHandler.bind(a),a.scrubberExpand=a.scrubberExpand.bind(a),a.scrubberHide=a.scrubberHide.bind(a),a.scrubberMouseDownHandler=a.scrubberMouseDownHandler.bind(a),a.scrubberMouseUpHandler=a.scrubberMouseUpHandler.bind(a),a.togglePlay=a.togglePlay.bind(a),a.toggleMute=a.toggleMute.bind(a),a.toggleFullscreen=a.toggleFullscreen.bind(a),a.toggleSettings=a.toggleSettings.bind(a),a.toggleSubtitles=a.toggleSubtitles.bind(a),a.setFilmstrip=a.setFilmstrip.bind(a),a.filmstripShowHandler=a.filmstripShowHandler.bind(a),a.filmstripHideHandler=a.filmstripHideHandler.bind(a),a.timeScrubbingStopHandler=a.timeScrubbingStopHandler.bind(a),a.handleRate=a.handleRate.bind(a),a.handleQuality=a.handleQuality.bind(a),a.handleAutoplay=a.handleAutoplay.bind(a),a.handleSubtitle=a.handleSubtitle.bind(a),a.handleAudioTrack=a.handleAudioTrack.bind(a),a.handleFullscreenEnter=a.handleFullscreenEnter.bind(a),a.handleFullscreenExit=a.handleFullscreenExit.bind(a),a.timeScrubberHandler=a.timeScrubberHandler.bind(a),a.setDuration(a.mediaEl.duration),a.setupSettings(),a.setupScrubbers(),a.attachEventHandlers(),a}return o(t,e),f(t,[{key:"destroy",value:function(){this.removeAllListeners(),document.removeEventListener("mouseup",this.timeScrubbingStopHandler),document.removeEventListener("mousemove",this.filmstripShowHandler),this.volButtonEl&&this.volScrubberWrapperEl&&this.removeVolumeScrubberWrapperExpansionHandlers(),this.timeScrubberEl&&(this.timeScrubberEl.removeEventListener("mousemove",this.timeScrubberElShowHandler),this.timeScrubberEl.removeEventListener("mouseleave",this.filmstripHideHandler)),this.timeScrubber&&(this.timeScrubber.getHandleEl().removeEventListener("mousedown",this.timeScrubbingStartHandler),this.timeScrubber.destroy(),this.timeScrubber=void 0),this.volScrubber&&(this.volScrubber.destroy(),this.volScrubber=void 0),this.settings&&(this.settings.removeListener("quality",this.handleQuality),this.settings.removeListener("speed",this.handleRate),this.settings.removeListener("subtitles",this.handleSubtitle),this.settings.removeListener("autoplay",this.handleAutoplay),this.settings.destroy(),this.settings=void 0),this.playButtonEl&&Object(p.C)(this.playButtonEl,this.togglePlayHandler),this.volButtonEl&&Object(p.C)(this.volButtonEl,this.toggleMuteHandler),this.fullscreenButtonEl&&Object(p.C)(this.fullscreenButtonEl,this.toggleFullscreenHandler),this.settingsButtonEl&&Object(p.C)(this.settingsButtonEl,this.toggleSettingsHandler),this.subtitlesButtonEl&&Object(p.C)(this.subtitlesButtonEl,this.toggleSubtitlesHandler),this.wrapperEl&&(this.wrapperEl.removeEventListener("mouseenter",this.mouseenterHandler),this.wrapperEl.removeEventListener("mouseleave",this.mouseleaveHandler)),d.a&&d.a.removeAllListeners(),this.wrapperEl=void 0,this.timeScrubberEl=void 0,this.volScrubberEl=void 0,this.playButtonEl=void 0,this.volButtonEl=void 0,this.timecodeEl=void 0,this.durationEl=void 0,this.fullscreenButtonEl=void 0,this.settingsButtonEl=void 0,this.filmstripContainerEl=void 0,this.filmstripEl=void 0,this.filmstripTimeEl=void 0,this.timeScrubberElShowHandler=void 0}},{key:"handleRate",value:function(){this.emit("ratechange")}},{key:"handleQuality",value:function(){this.emit("qualitychange")}},{key:"handleSubtitle",value:function(){this.emit("subtitlechange")}},{key:"handleAudioTrack",value:function(){this.emit("audiochange")}},{key:"handleAutoplay",value:function(){this.emit("autoplaychange")}},{key:"handleFullscreenEnter",value:function(){this.setLabel(this.fullscreenButtonEl,"Exit fullscreen"),this.containerEl.classList.add("bp-is-fullscreen")}},{key:"handleFullscreenExit",value:function(){this.setLabel(this.fullscreenButtonEl,"Enter fullscreen"),this.containerEl.classList.remove("bp-is-fullscreen")}},{key:"setupSettings",value:function(){this.settings=new h.a(this.containerEl,this.cache),this.settings.addListener("quality",this.handleQuality),this.settings.addListener("speed",this.handleRate),this.settings.addListener("autoplay",this.handleAutoplay)}},{key:"getTimeFromScrubber",value:function(){return this.timeScrubber.getValue()*this.mediaEl.duration}},{key:"setupScrubbers",value:function(){var e=this;this.timeScrubber=new c.a(this.timeScrubberEl,"Media Slider",0,Math.floor(this.mediaEl.duration),0,0,1),this.setTimeCode(this.mediaEl.currentTime||0),this.timeScrubber.on("valuechange",function(){e.emit("timeupdate",e.getTimeFromScrubber())}),this.volScrubber=new c.a(this.volScrubberEl,"Volume Slider",0,100,1,1,1),this.volScrubber.setAriaValues(100,"100% Volume"),this.volScrubber.on("valuechange",function(){e.emit("volumeupdate",e.volScrubber.getValue())})}},{key:"formatTime",value:function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%3600%60),r=t>0?t.toString()+":":"",o=i<10?"0"+i.toString():i.toString(),a=n.toString();return t>0&&n<10&&(a="0"+a),""+r+a+":"+o}},{key:"setDuration",value:function(e){this.durationEl.textContent=this.formatTime(e||0)}},{key:"setTimeCode",value:function(e){var t=this.mediaEl.duration;this.timeScrubber.setValue(t?(e||0)/t:0),this.timecodeEl.textContent=this.formatTime(e||0),this.timeScrubber.setAriaValues(Math.floor(e),this.timecodeEl.textContent+" of "+this.durationEl.textContent)}},{key:"updateProgress",value:function(){var e=this.mediaEl.buffered,t=this.mediaEl.duration||1,n=e.length,i=n?e.end(n-1):0;this.timeScrubber.setBufferedValue(i/t)}},{key:"toggleMute",value:function(){this.show(),this.emit("togglemute")}},{key:"togglePlay",value:function(){this.show(),this.emit("toggleplayback")}},{key:"toggleFullscreen",value:function(){this.show(),this.emit("togglefullscreen")}},{key:"toggleSettings",value:function(){this.show(),this.isSettingsVisible()?this.settings.hide():this.settings.show()}},{key:"toggleSubtitles",value:function(){this.show(),this.settings.toggleSubtitles(),this.emit("togglesubtitles")}},{key:"setLabel",value:function(e,t){e.setAttribute("aria-label",t),e.setAttribute("title",t)}},{key:"isSettingsVisible",value:function(){return!!this.settings&&this.settings.isVisible()}},{key:"showPauseIcon",value:function(){this.wrapperEl.classList.add("bp-media-is-playing"),this.setLabel(this.playButtonEl,"Pause")}},{key:"showPlayIcon",value:function(){this.wrapperEl.classList.remove("bp-media-is-playing"),this.setLabel(this.playButtonEl,"Play")}},{key:"updateVolumeIcon",value:function(e){var t=this;v.forEach(function(e){t.volButtonEl.classList.remove(e)}),this.volButtonEl.classList.add(v[Math.ceil(3*e)]),this.volScrubber.setValue(e);var n=Math.floor(100*e);this.volScrubber.setAriaValues(n,n+"% Volume");var i=0===Math.ceil(3*e)?"Unmute":"Mute";this.setLabel(this.volButtonEl,i)}},{key:"increaseSpeed",value:function(){this.settings.increaseSpeed()}},{key:"decreaseSpeed",value:function(){this.settings.decreaseSpeed()}},{key:"scrubberMouseUpHandler",value:function(){this.volScrubbing=!1,this.volScrubberWrapperEl.classList.remove("bp-media-controls-volume-scrubber-expand"),document.removeEventListener("mouseup",this.scrubberMouseUpHandler),document.removeEventListener("mouseleave",this.scrubberMouseUpHandler)}},{key:"scrubberMouseDownHandler",value:function(){this.volScrubbing=!0,document.addEventListener("mouseup",this.scrubberMouseUpHandler),document.addEventListener("mouseleave",this.scrubberMouseUpHandler)}},{key:"scrubberExpand",value:function(){this.volScrubberWrapperEl.classList.add("bp-media-controls-volume-scrubber-expand")}},{key:"scrubberHide",value:function(){this.volScrubbing||this.volScrubberWrapperEl.classList.remove("bp-media-controls-volume-scrubber-expand")}},{key:"attachVolumeScrubberWrapperExpansionHandlers",value:function(){this.volScrubbing=!1,this.volButtonEl.addEventListener("mouseenter",this.scrubberExpand),this.volButtonEl.addEventListener("mouseleave",this.scrubberHide),this.volScrubberEl.addEventListener("mouseenter",this.scrubberExpand),this.volScrubberEl.addEventListener("mouseleave",this.scrubberHide),this.volScrubberEl.addEventListener("mousedown",this.scrubberMouseDownHandler),this.volScrubberEl.addEventListener("mouseup",this.scrubberMouseUpHandler),this.volScrubberEl.addEventListener("focus",this.scrubberExpand),this.volScrubberEl.addEventListener("blur",this.scrubberHide)}},{key:"removeVolumeScrubberWrapperExpansionHandlers",value:function(){this.volButtonEl.removeEventListener("mouseenter",this.scrubberExpand),this.volButtonEl.removeEventListener("mouseleave",this.scrubberHide),this.volScrubberEl.removeEventListener("mouseenter",this.scrubberExpand),this.volScrubberEl.removeEventListener("mouseleave",this.scrubberHide),this.volScrubberEl.removeEventListener("mousedown",this.scrubberMouseDownHandler),this.volScrubberEl.removeEventListener("mouseup",this.scrubberMouseUpHandler),this.volScrubberEl.removeEventListener("focus",this.scrubberExpand),this.volScrubberEl.removeEventListener("blur",this.scrubberHide)}},{key:"attachEventHandlers",value:function(){this.wrapperEl.addEventListener("mouseenter",this.mouseenterHandler),this.wrapperEl.addEventListener("mouseleave",this.mouseleaveHandler),this.attachVolumeScrubberWrapperExpansionHandlers(),this.togglePlayHandler=Object(p.b)(this.togglePlay),this.toggleMuteHandler=Object(p.b)(this.toggleMute),this.toggleFullscreenHandler=Object(p.b)(this.toggleFullscreen),this.toggleSettingsHandler=Object(p.b)(this.toggleSettings),this.toggleSubtitlesHandler=Object(p.b)(this.toggleSubtitles),Object(p.c)(this.playButtonEl,this.togglePlayHandler),Object(p.c)(this.volButtonEl,this.toggleMuteHandler),Object(p.c)(this.fullscreenButtonEl,this.toggleFullscreenHandler),Object(p.c)(this.settingsButtonEl,this.toggleSettingsHandler),Object(p.c)(this.subtitlesButtonEl,this.toggleSubtitlesHandler),d.a.addListener("enter",this.handleFullscreenEnter),d.a.addListener("exit",this.handleFullscreenExit)}},{key:"mouseenterHandler",value:function(){this.preventHiding=!0,this.show()}},{key:"mouseleaveHandler",value:function(){this.preventHiding=!1,this.show()}},{key:"show",value:function(){var e=this;this.wrapperEl&&this.wrapperEl.parentNode&&(this.wrapperEl.parentNode.classList.add("bp-media-controls-is-visible"),clearTimeout(this.autoHideTimeout),this.autoHideTimeout=setTimeout(function(){e.hide()},2e3))}},{key:"hide",value:function(){if(this.preventHiding||this.isSettingsVisible())return void this.show();this.wrapperEl&&this.wrapperEl.parentNode&&(this.wrapperEl.parentNode.classList.remove("bp-media-controls-is-visible"),this.filmstripHideHandler())}},{key:"toggle",value:function(){this.isVisible()?(this.preventHiding=!1,this.settings.hide(),this.hide()):this.show()}},{key:"isVisible",value:function(){return this.wrapperEl.parentNode.classList.contains("bp-media-controls-is-visible")}},{key:"resizeTimeScrubber",value:function(){this.timeScrubber&&this.timeScrubber.resize(32)}},{key:"setFilmstrip",value:function(){this.filmstripEl&&(this.filmstripEl.src=this.filmstripUrl)}},{key:"initFilmstrip",value:function(e,t,n,i){var r=this;this.filmstripUrl=e,this.filmstripInterval=i,this.timeScrubberElShowHandler=this.timeScrubberHandler(this.filmstripShowHandler),this.filmstripContainerEl=this.containerEl.appendChild(document.createElement("div")),this.filmstripContainerEl.className="bp-media-filmstrip-container",this.filmstripContainerEl.innerHTML='<div class="bp-media-crawler-wrapper"><div class="bp-crawler"><div></div><div></div><div></div></div></div>',this.filmstripEl=this.filmstripContainerEl.appendChild(document.createElement("img")),this.filmstripEl.className="bp-media-filmstrip",this.filmstripTimeEl=this.filmstripContainerEl.appendChild(document.createElement("div")),this.filmstripTimeEl.className="bp-media-filmstrip-timecode";var o=90*n;this.timeScrubber.getHandleEl().addEventListener("mousedown",this.timeScrubbingStartHandler),this.hasTouch&&this.timeScrubberEl.addEventListener("touchstart",this.timeScrubbingStartHandler),this.timeScrubberEl.addEventListener("mousemove",this.timeScrubberElShowHandler),this.timeScrubberEl.addEventListener("mouseleave",this.filmstripHideHandler),this.filmstripEl.onload=function(){r.filmstripContainerEl&&(r.filmstripContainerEl.style.width=o+2+"px",r.filmstripContainerEl.querySelector(".bp-media-crawler-wrapper").style.display="none")},t.getPromise().then(this.setFilmstrip)}},{key:"timeScrubberHandler",value:function(e){var t=this;return function(n){var i=n.target,r=t.timeScrubber,o=r.playedEl;i!==r.convertedEl&&i!==o||e(n)}}},{key:"timeScrubbingStartHandler",value:function(){this.isScrubbing=!0,this.preventHiding=!0,document.addEventListener("mouseup",this.timeScrubbingStopHandler),this.hasTouch&&document.addEventListener("touchend",this.timeScrubbingStopHandler),document.addEventListener("mousemove",this.filmstripShowHandler),this.hasTouch&&document.addEventListener("touchmove",this.show)}},{key:"timeScrubbingStopHandler",value:function(e){this.isScrubbing=!1,this.preventHiding=!1,document.removeEventListener("mouseup",this.timeScrubbingStopHandler),document.removeEventListener("mousemove",this.filmstripShowHandler),document.removeEventListener("touchend",this.timeScrubbingStopHandler),document.removeEventListener("touchmove",this.show),this.timeScrubberEl.contains(e.target)||(this.filmstripContainerEl.style.display="none")}},{key:"computeFilmstripPositions",value:function(e,t,n,i){var r=this.timeScrubber.computeScrubberPosition(e)*this.mediaEl.duration,o=Math.floor(r/this.filmstripInterval),a=i/100,s=o%100*-1*a,l=-90*Math.floor(o/100);i||(s=0,l=0,a=160);var u=Math.max(0,e-t-a/2);return{time:r,left:s,top:l,containerLeft:Math.min(u,n-a)}}},{key:"filmstripShowHandler",value:function(e){if(!this.isSettingsVisible()){var t=this.containerEl.getBoundingClientRect(),n=e.pageX,i=this.computeFilmstripPositions(n,t.left,t.width,this.filmstripEl.naturalWidth);this.filmstripEl.style.left=i.left+"px",this.filmstripEl.style.top=i.top+"px",this.filmstripContainerEl.style.display="block",this.filmstripContainerEl.style.left=i.containerLeft+"px",this.filmstripTimeEl.textContent=this.formatTime(i.time)}}},{key:"filmstripHideHandler",value:function(){!this.isScrubbing&&this.filmstripEl&&(this.filmstripContainerEl.style.display="none")}},{key:"isTimeScrubberFocused",value:function(){return document.activeElement===this.timeScrubberEl}},{key:"isVolumeScrubberFocused",value:function(){return document.activeElement===this.volScrubberEl}},{key:"initSubtitles",value:function(e,t){this.settings.addListener("subtitles",this.handleSubtitle),this.settings.loadSubtitles(e,t)}},{key:"initAlternateAudio",value:function(e){this.settings.addListener("audiotracks",this.handleAudioTrack),this.settings.loadAlternateAudio(e)}},{key:"enableHDSettings",value:function(){this.settings.enableHD()}}]),t}(s.a);t.a=b},function(e,t){e.exports='<div class="bp-media-controls-wrapper" data-testid="media-controls-wrapper">\n    <div class="bp-media-time-scrubber-container" tabindex="0"></div>\n    <div class="bp-media-controls-container">\n        <button class="bp-media-controls-btn bp-media-playpause-icon" type="button">\n            <svg class="bp-media-play-icon" fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n                <path d="M8 5v14l11-7z"/>\n                <path d="M0 0h24v24H0z" fill="none"/>\n            </svg>\n            <svg class="bp-media-pause-icon" fill="#fff" height="24" viewBox="0 0 24 24" width="24" focusable="false">\n                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>\n                <path d="M0 0h24v24H0z" fill="none"/>\n            </svg>\n        </button>\n        <button class="bp-media-controls-btn bp-media-volume-icon bp-media-volume-icon-is-high" type="button">\n            <svg viewBox="-3 5 24 24" width="24" height="24" focusable="false">\n                <path fill="#FFF" d="M0 14v6h4l5 5V9l-5 5H0z" />\n                <path fill="none" d="M-3 5h24v24H-3V5z" />\n            </svg>\n            <svg class="bp-media-volume-icon-mute" viewBox="-3 5 24 24" width="24" height="24" focusable="false">\n                <path fill="none" d="M-3 5h24v24H-3V5z" />\n                <path fill="#fff" d="M15.5 20.2l-2-2-2 2-1.2-1.2 2-2-2-2 1.2-1.2 2 2 2-2 1.2 1.2-2 2 2 2" />\n            </svg>\n            <svg class="bp-media-volume-icon-medium" viewBox="-3 5 24 24" width="24" height="24" focusable="false">\n                <path fill="#FFF" d="M13.5 17c0-1.8-1-3.3-2.5-4v8c1.5-.7 2.5-2.2 2.5-4z" />\n                <path fill="none" d="M-3 5h24v24H-3V5z" />\n            </svg>\n            <svg class="bp-media-volume-icon-high" viewBox="-3 5 24 24" width="24" height="24" focusable="false">\n                <path fill="#FFF" d="M13.5 17c0-1.8-1-3.3-2.5-4v8c1.5-.7 2.5-2.2 2.5-4zM11 8.2v2.1c2.9.9 5 3.5 5 6.7s-2.1 5.9-5 6.7v2.1c4-.9 7-4.5 7-8.8s-3-7.9-7-8.8z" />\n                <path fill="none" d="M-3 5h24v24H-3V5z" />\n            </svg>\n        </button>\n        <div class="bp-media-volume-scrubber-container-wrapper">\n            <div class="bp-media-volume-scrubber-container" tabindex="0"></div>\n        </div>\n        <label class="bp-media-controls-label bp-media-controls-timecode">00:00</label>\n        <span class="bp-media-controls-label">&nbsp;&#47;&nbsp;</span>\n        <label class="bp-media-controls-label bp-media-controls-duration">00:00</label>\n        <button class="bp-media-controls-btn bp-media-cc-icon" aria-pressed="false" type="button">\n            <div class="bp-media-controls-cc-icon-text">CC</div>\n        </button>\n        <button class="bp-media-controls-btn bp-media-gear-icon" aria-haspopup="true" type="button">\n            <svg width="24" height="24" viewBox="0 0 24 24" focusable="false">\n                <path fill="#fff" d="M19.4 13c0-.3.1-.6.1-1s0-.7-.1-1l2.1-1.6c.2-.1.2-.4.1-.6l-2-3.5c-.1-.2-.4-.3-.6-.2l-2.5 1c-.5-.4-1.1-.7-1.7-1l-.4-2.7c.1-.2-.2-.4-.4-.4h-4c-.2 0-.5.2-.5.4l-.4 2.7c-.6.2-1.1.6-1.7 1l-2.5-1c-.2-.1-.4 0-.6.2l-2 3.5c-.1.1 0 .4.2.6L4.6 11c0 .3-.1.6-.1 1s0 .7.1 1l-2.1 1.6c-.2.1-.2.4-.1.6l2 3.5c.1.2.3.3.6.2l2.5-1c.5.4 1.1.7 1.7 1l.4 2.6c0 .2.2.4.5.4h4c.2 0 .5-.2.5-.4l.4-2.6c.6-.2 1.2-.6 1.7-1l2.5 1c.2.1.5 0 .6-.2l2-3.5c.1-.2.1-.5-.1-.6L19.4 13zM12 15.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5z"/>\n            </svg>\n            <span class="bp-media-controls-hd">HD</span>\n        </button>\n        <button class="bp-media-controls-btn bp-media-fullscreen-icon" type="button">\n            <svg class="bp-enter-fullscreen-icon" width="24" height="24" viewBox="0 0 24 24" focusable="false">\n                <g fill="none" fill-rule="evenodd">\n                    <path d="M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3h-6zM3 3v6l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm11.41 12.83l2.89 2.87L15 21h6v-6l-2.3 2.3-2.87-2.89-1.42 1.42zM5.3 17.3L3 15v6h6l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3z" fill="#fff" />\n                    <path d="M0 0h24v24H0z" />\n                </g>\n            </svg>\n            <svg class="bp-exit-fullscreen-icon" width="24" height="24" viewBox="0 0 24 24" focusable="false">\n                <g fill="none" fill-rule="evenodd">\n                    <path d="M0 0h24v24H0z" />\n                    <path d="M19.58 3l-2.87 2.89-2.3-2.3v6h6l-2.3-2.3L21 4.42 19.58 3zM4.42 3L3 4.42l2.89 2.87-2.3 2.3h6v-6l-2.3 2.3L4.42 3zm9.99 11.41v6l2.3-2.3L19.58 21 21 19.58l-2.89-2.87 2.3-2.3h-6zm-10.82 0l2.3 2.3L3 19.58 4.42 21l2.87-2.89 2.3 2.3v-6h-6z" fill="#fff" />\n                </g>\n            </svg>\n        </button>\n    </div>\n</div>\n'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(7),s=n.n(a),l=n(319),u=n.n(l),c=n(5),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=0,p=1,f="bp-media-scrubber-touch",v=function(e){function t(e,n,o,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:p,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:p;i(this,t);var v=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return v.containerEl=e,v.containerEl.setAttribute("role","slider"),v.containerEl.setAttribute("aria-label",n),v.containerEl.setAttribute("title",n),v.containerEl.setAttribute("aria-valuemin",o),v.containerEl.setAttribute("aria-valuemax",a),v.containerEl.setAttribute("aria-valuenow",s),v.containerEl.innerHTML=u.a.replace(/>\s*</g,"><"),v.scrubberContainerEl=v.containerEl.querySelector(".bp-media-scrubber-container"),v.scrubberWrapperEl=v.containerEl.querySelector(".bp-media-scrubber-wrapper"),v.scrubberEl=v.containerEl.querySelector(".bp-media-scrubber"),v.bufferedEl=v.scrubberEl.querySelector(".bp-media-scrubber-buffered"),v.convertedEl=v.scrubberEl.querySelector(".bp-media-scrubber-converted"),v.playedEl=v.scrubberEl.querySelector(".bp-media-scrubber-played"),v.handleEl=v.scrubberEl.querySelector(".bp-media-scrubber-handle"),v.hasTouch=c.a.hasTouch(),v.setConvertedValue(h),v.setBufferedValue(l),v.setValue(s),v.pointerUpHandler=v.pointerUpHandler.bind(v),v.scrubbingHandler=v.scrubbingHandler.bind(v),v.pointerDownHandler=v.pointerDownHandler.bind(v),v.playedEl.addEventListener("mousedown",v.pointerDownHandler),v.convertedEl.addEventListener("mousedown",v.pointerDownHandler),v.handleEl.addEventListener("mousedown",v.pointerDownHandler),v.hasTouch&&(v.scrubberContainerEl.addEventListener("touchstart",v.pointerDownHandler),v.scrubberWrapperEl.classList.add(f)),v}return o(t,e),h(t,[{key:"destroy",value:function(){this.removeAllListeners(),this.destroyDocumentHandlers(),this.playedEl.removeEventListener("mousedown",this.pointerDownHandler),this.convertedEl.removeEventListener("mousedown",this.pointerDownHandler),this.handleEl.removeEventListener("mousedown",this.pointerDownHandler),this.scrubberContainerEl.removeEventListener("touchstart",this.pointerDownHandler),this.scrubberContainerEl=void 0,this.scrubberWrapperEl=void 0,this.scrubberEl=void 0,this.bufferedEl=void 0,this.convertedEl=void 0,this.playedEl=void 0,this.handleEl=void 0,this.containerEl.innerHTML=""}},{key:"resize",value:function(e){this.scrubberWrapperEl.style.width=this.containerEl.clientWidth-e+"px"}},{key:"setAriaValues",value:function(e,t){this.containerEl.setAttribute("aria-valuenow",e),this.containerEl.setAttribute("aria-valuetext",t)}},{key:"setValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;e!==this.value&&(this.value=Math.max(Math.min(e,this.convertedValue),d),this.playedEl.style.width=100*this.value+"%",this.handleEl.style.left=100*this.value+"%")}},{key:"setBufferedValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;e!==this.bufferedValue&&(this.bufferedValue=Math.max(Math.min(e,this.convertedValue),this.value||d),this.bufferedEl.style.width=100*this.bufferedValue+"%")}},{key:"setConvertedValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;e!==this.convertedValue&&(this.convertedValue=Math.max(Math.min(Math.max(e,this.convertedValue||d),p),d),this.convertedEl.style.width=100*this.convertedValue+"%")}},{key:"computeScrubberPosition",value:function(e){var t=this.scrubberEl.getBoundingClientRect(),n=(e-t.left)/t.width;return Math.max(Math.min(n,p),d)}},{key:"scrubbingHandler",value:function(e){e.preventDefault();var t=e.pageX;e.touches&&(t=e.touches[0].pageX);var n=this.computeScrubberPosition(t);this.setValue(n),this.emit("valuechange")}},{key:"pointerDownHandler",value:function(e){!("number"!=typeof e.button||e.button<2)||e.ctrlKey||e.metaKey||(this.scrubbingHandler(e),document.addEventListener("mouseup",this.pointerUpHandler),document.addEventListener("mouseleave",this.pointerUpHandler),document.addEventListener("mousemove",this.scrubbingHandler),this.hasTouch?(document.addEventListener("touchmove",this.scrubbingHandler),document.addEventListener("touchend",this.pointerUpHandler)):this.scrubberWrapperEl.classList.add("bp-media-scrubber-hover"),e.preventDefault())}},{key:"pointerUpHandler",value:function(){this.scrubberWrapperEl.classList.remove("bp-media-scrubber-hover"),this.destroyDocumentHandlers()}},{key:"destroyDocumentHandlers",value:function(){document.removeEventListener("mousemove",this.scrubbingHandler),document.removeEventListener("mouseup",this.pointerUpHandler),document.removeEventListener("mouseleave",this.pointerUpHandler),this.hasTouch&&(document.removeEventListener("touchmove",this.scrubbingHandler),document.removeEventListener("touchend",this.pointerUpHandler))}},{key:"getValue",value:function(){return this.value}},{key:"getHandleEl",value:function(){return this.handleEl}},{key:"getConvertedEl",value:function(){return this.convertedEl}}]),t}(s.a);t.a=v},function(e,t){e.exports='<div class="bp-media-scrubber-container">\n    <div class="bp-media-scrubber-wrapper">\n        <div class="bp-media-scrubber">\n            <div class="bp-media-scrubber-underlay"></div>\n            <div class="bp-media-scrubber-buffered"></div>\n            <div class="bp-media-scrubber-converted"></div>\n            <div class="bp-media-scrubber-played"></div>\n            <div class="bp-media-scrubber-handle"></div>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(7),s=n.n(a),l=n(1),u=n(6),c=n(0),h=n(5),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p="bp-media-settings-subtitles-unavailable",f="bp-media-settings-audiotracks-unavailable",v="bp-media-settings-hd-unavailable",b="bp-media-settings-autoplay-unavailable",m=["0.5","1.0","1.25","1.5","2.0"],g='<div class="bp-media-settings">\n    <div class="bp-media-settings-menu-main bp-media-settings-menu" role="menu">\n        <div class="bp-media-settings-item bp-media-settings-item-autoplay" data-type="autoplay" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-label" aria-label="Autoplay">Autoplay</div>\n            <div class="bp-media-settings-value">Disabled</div>\n            <div class="bp-media-settings-arrow">'+u.e+'</div>\n        </div>\n        <div class="bp-media-settings-item bp-media-settings-item-speed" data-type="speed" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-label" aria-label="Speed">Speed</div>\n            <div class="bp-media-settings-value">Normal</div>\n            <div class="bp-media-settings-arrow">'+u.e+'</div>\n        </div>\n        <div class="bp-media-settings-item bp-media-settings-item-quality" data-type="quality" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-label" aria-label="Quality">Quality</div>\n            <div class="bp-media-settings-value">Auto</div>\n            <div class="bp-media-settings-arrow">'+u.e+'</div>\n        </div>\n        <div class="bp-media-settings-item bp-media-settings-item-subtitles bp-media-settings-is-hidden" data-type="subtitles" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-label" aria-label="Subtitles/CC">Subtitles/CC</div>\n            <div class="bp-media-settings-value">Off</div>\n            <div class="bp-media-settings-arrow">'+u.e+'</div>\n        </div>\n        <div class="bp-media-settings-item bp-media-settings-item-audiotracks bp-media-settings-is-hidden" data-type="audiotracks" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-label" aria-label="Audio">Audio</div>\n            <div class="bp-media-settings-value"></div>\n            <div class="bp-media-settings-arrow">'+u.e+'</div>\n        </div>\n    </div>\n    <div class="bp-media-settings-menu-autoplay bp-media-settings-menu" role="menu">\n        <div class="bp-media-settings-sub-item bp-media-settings-sub-item-autoplay" data-type="menu" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-arrow">'+u.d+'</div>\n            <div class="bp-media-settings-label" aria-label="Autoplay">Autoplay</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="autoplay" data-value="Disabled" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">Disabled</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="autoplay" data-value="Enabled" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">Enabled</div>\n        </div>\n    </div>\n    <div class="bp-media-settings-menu-speed bp-media-settings-menu" role="menu">\n        <div class="bp-media-settings-sub-item bp-media-settings-sub-item-speed" data-type="menu" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-arrow">'+u.d+'</div>\n            <div class="bp-media-settings-label" aria-label="Speed">Speed</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="speed" data-value="0.5" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">0.5</div>\n        </div>\n        <div class="bp-media-settings-sub-item bp-media-settings-selected" data-type="speed" data-value="1.0" tabindex="0" role="menuitemradio" aria-checked="true">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">Normal</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="speed" data-value="1.25" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">1.25</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="speed" data-value="1.5" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">1.5</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="speed" data-value="2.0" tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">2.0</div>\n        </div>\n    </div>\n    <div class="bp-media-settings-menu-quality bp-media-settings-menu bp-media-settings-is-hidden" data-disabled="true" role="menu">\n        <div class="bp-media-settings-sub-item bp-media-settings-sub-item-quality" data-type="menu" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-arrow">'+u.d+'</div>\n            <div class="bp-media-settings-label" aria-label="Quality">Quality</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="quality" data-value=sd tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">480p</div>\n        </div>\n        <div class="bp-media-settings-sub-item" data-type="quality" data-value=hd tabindex="0" role="menuitemradio">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">1080p</div>\n        </div>\n        <div class="bp-media-settings-sub-item bp-media-settings-selected" data-type="quality" data-value=auto tabindex="0" role="menuitemradio" aria-checked="true">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">Auto</div>\n        </div>\n    </div>\n    <div class="bp-media-settings-menu-subtitles bp-media-settings-menu bp-media-settings-is-hidden" role="menu">\n        <div class="bp-media-settings-sub-item bp-media-settings-sub-item-subtitles" data-type="menu" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-arrow">'+u.d+'</div>\n            <div class="bp-media-settings-label" aria-label="Subtitles/CC">Subtitles/CC</div>\n        </div>\n        <div class="bp-media-settings-sub-item bp-media-settings-selected" data-type="subtitles" data-value="-1" tabindex="0" role="menuitemradio" aria-checked="true">\n            <div class="bp-media-settings-icon">'+u.f+'</div>\n            <div class="bp-media-settings-value">Off</div>\n        </div>\n    </div>\n    <div class="bp-media-settings-menu-audiotracks bp-media-settings-menu bp-media-settings-is-hidden" role="menu">\n        <div class="bp-media-settings-sub-item bp-media-settings-sub-item-audiotracks" data-type="menu" tabindex="0" role="menuitem" aria-haspopup="true">\n            <div class="bp-media-settings-arrow">'+u.d+'</div>\n            <div class="bp-media-settings-label" aria-label="Audio">Audio</div>\n        </div>\n    </div>\n</div>',y='<div class="bp-media-settings-sub-item" data-type="{{dataType}}" data-value="{{dataValue}}" tabindex="0" role="menuitemradio">\n    <div class="bp-media-settings-icon">'+u.f+'</div>\n    <div class="bp-media-settings-value"></div>\n</div>',E=function(e){function t(e,n){i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.visible=!1,o.subtitles=[],o.language=void 0,o.toggleToSubtitle=void 0,o.containerEl=e,o.cache=n,o.handleTransitionEnd=o.handleTransitionEnd.bind(o),o.blurHandler=o.blurHandler.bind(o),o.menuEventHandler=o.menuEventHandler.bind(o),Object(l.s)(o.containerEl,g,e.querySelector(".bp-media-controls-wrapper")),o.settingsEl=o.containerEl.querySelector(".bp-media-settings"),o.firstMenuItem=o.settingsEl.querySelectorAll(".bp-media-settings-item")[0],o.settingsButtonEl=o.containerEl.querySelector(".bp-media-gear-icon"),o.ccButtonEl=o.containerEl.querySelector(".bp-media-cc-icon"),Object(l.c)(o.settingsEl,o.menuEventHandler),o.containerEl.classList.add(p),o.containerEl.classList.add(f),o.containerEl.classList.add(v),o.settingsEl.addEventListener("transitionend",o.handleTransitionEnd),h.a.isMobile()&&o.containerEl.classList.add(b),o.init(),o}return o(t,e),d(t,[{key:"init",value:function(){var e=this.cache.get("media-speed")||"1.0",t=this.cache.get("media-autoplay")||"Disabled";this.chooseOption("quality","sd",!1),this.chooseOption("speed",e),this.chooseOption("autoplay",t)}},{key:"destroy",value:function(){this.settingsEl&&(Object(l.C)(this.settingsEl,this.menuEventHandler),this.settingsEl.removeEventListener("transitionend",this.handleTransitionEnd)),document.removeEventListener("click",this.blurHandler)}},{key:"reset",value:function(){this.settingsEl.className="bp-media-settings";var e=this.settingsEl.querySelector(".bp-media-settings-menu-main");this.setMenuContainerDimensions(e)}},{key:"getMediaSpeeds",value:function(){return m}},{key:"increaseSpeed",value:function(){var e=parseFloat(this.cache.get("media-speed")||"1.0"),t=m.filter(function(t){return parseFloat(t)>e});t.length>0&&this.chooseOption("speed",t[0])}},{key:"decreaseSpeed",value:function(){var e=parseFloat(this.cache.get("media-speed")||"1.0"),t=m.filter(function(t){return parseFloat(t)<e});t.length>0&&this.chooseOption("speed",t[t.length-1])}},{key:"setMenuContainerDimensions",value:function(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height,r=i+18;this.settingsEl.style.height=r+"px";var o=r>=210?32:18;this.settingsEl.style.width=n+o+"px"}},{key:"findParentDataType",value:function(e){for(var t=e;t&&t!==this.settingsEl;){if("string"==typeof t.getAttribute("data-type"))return t;t=t.parentNode}return null}},{key:"showSubMenu",value:function(e){var t=this.settingsEl.querySelector(".bp-media-settings-menu-"+e);if(!t.getAttribute("data-disabled")){this.settingsEl.classList.add("bp-media-settings-show-"+e),this.setMenuContainerDimensions(t);this.settingsEl.querySelector('[data-type="'+e+'"].bp-media-settings-sub-item.bp-media-settings-selected').focus()}}},{key:"menuItemSelect",value:function(e){var t=e.getAttribute("data-type"),n=e.getAttribute("data-value");this.settingsEl.classList.add("bp-media-settings-in-transition"),"menu"===t?(this.reset(),this.firstMenuItem.focus()):t&&n?this.chooseOption(t,n):t&&this.showSubMenu(t)}},{key:"menuEventHandler",value:function(e){var t=this.findParentDataType(e.target);if(t){if("click"===e.type)this.menuItemSelect(t);else if("keydown"===e.type){var n=Object(l.k)(e).toLowerCase(),i=t.parentElement,r=[].filter.call(i.children,function(e){return null!==e.offsetParent}),o=[].findIndex.call(r,function(e){return e.contains(t)});switch(n){case"space":case"enter":this.containerEl.classList.add(c.H),this.menuItemSelect(t);break;case"arrowup":if(this.containerEl.classList.add(c.H),o>0){var a=r[o-1];a.focus()}break;case"arrowdown":if(this.containerEl.classList.add(c.H),o>=0&&o<r.length-1){var s=r[o+1];s.focus()}break;case"arrowleft":o>=0&&!r[o].classList.contains("bp-media-settings-item")&&(this.reset(),this.firstMenuItem.focus());break;case"arrowright":if(o>=0){var u=r[o],h=u.getAttribute("data-type");u.classList.contains("bp-media-settings-item")&&"menu"!==h&&this.showSubMenu(h)}break;case"escape":this.hide(),this.settingsButtonEl.focus();break;default:return}e.preventDefault(),e.stopPropagation()}"keydown"===e.type&&(e.preventDefault(),e.stopPropagation())}}},{key:"handleTransitionEnd",value:function(){this.settingsEl.classList.remove("bp-media-settings-in-transition")}},{key:"getSelectedOption",value:function(e){return this.settingsEl.querySelector('[data-type="'+e+'"].bp-media-settings-sub-item.bp-media-settings-selected')}},{key:"chooseOption",value:function(e,t){(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.cache.set("media-"+e,t,!0),this.emit(e);var n=this.settingsEl.querySelector('[data-type="'+e+'"][data-value="'+t+'"]'),i=n.querySelector(".bp-media-settings-value").textContent;this.settingsEl.querySelector('[data-type="'+e+'"] .bp-media-settings-value').textContent=i;var r=this.getSelectedOption(e);r&&(r.classList.remove("bp-media-settings-selected"),r.removeAttribute("aria-checked")),n.classList.add("bp-media-settings-selected"),n.setAttribute("aria-checked","true"),this.reset(),this.firstMenuItem.focus(),"subtitles"===e&&this.handleSubtitleSelection(r.getAttribute("data-value"),t)}},{key:"handleSubtitleSelection",value:function(e,t){"-1"===t?(e!==t&&(this.toggleToSubtitle=e),this.containerEl.classList.remove("bp-media-settings-subtitles-on"),this.ccButtonEl.setAttribute("aria-pressed","false")):(this.containerEl.classList.add("bp-media-settings-subtitles-on"),this.ccButtonEl.setAttribute("aria-pressed","true"))}},{key:"blurHandler",value:function(e){if(!this.settingsEl.contains(e.target)){var t=Object(l.k)(e);if("Escape"===t)return this.hide(),e.preventDefault(),void e.stopPropagation();this.settingsButtonEl.contains(e.target)||"click"!==e.type&&"Space"!==t&&"Enter"!==t||this.hide()}}},{key:"isVisible",value:function(){return this.visible}},{key:"show",value:function(){this.visible=!0,this.containerEl.classList.add("bp-media-settings-is-open"),this.firstMenuItem.focus(),document.addEventListener("click",this.blurHandler,!0),document.addEventListener("keydown",this.blurHandler,!0)}},{key:"hide",value:function(){this.reset(),this.containerEl.classList.remove("bp-media-settings-is-open"),this.visible=!1,document.removeEventListener("click",this.blurHandler,!0),document.removeEventListener("keydown",this.blurHandler,!0)}},{key:"areSubtitlesOn",value:function(){return"-1"!==this.getSelectedOption("subtitles").getAttribute("data-value")}},{key:"hasSubtitles",value:function(){return!!this.settingsEl.querySelector('[data-type="subtitles"][data-value="0"].bp-media-settings-sub-item')}},{key:"toggleSubtitles",value:function(){var e=this;if(this.areSubtitlesOn())this.chooseOption("subtitles","-1");else if(void 0!==this.toggleToSubtitle)this.chooseOption("subtitles",this.toggleToSubtitle.toString());else{var t=this.subtitles.findIndex(function(t){return t===e.language});-1===t&&-1===(t=this.subtitles.findIndex(function(e){return"English"===e}))&&(t=0),this.chooseOption("subtitles",t.toString())}}},{key:"loadSubtitles",value:function(e,t){var n=this.settingsEl.querySelector(".bp-media-settings-menu-subtitles");this.subtitles=e,this.language=t,this.subtitles.forEach(function(e,t){Object(l.s)(n,y.replace(/{{dataType}}/g,"subtitles").replace(/{{dataValue}}/g,t)),n.lastChild.querySelector(".bp-media-settings-value").textContent=e}),this.containerEl.classList.remove(p);var i=this.cache.get("media-subtitles");null!==i&&"-1"!==i&&this.toggleSubtitles(),this.reset()}},{key:"loadAlternateAudio",value:function(e){var t=this.settingsEl.querySelector(".bp-media-settings-menu-audiotracks");e.forEach(function(e,n){Object(l.s)(t,y.replace(/{{dataType}}/g,"audiotracks").replace(/{{dataValue}}/g,n));var i=t.lastChild.querySelector(".bp-media-settings-value"),r="Track "+(n+1);"und"!==e&&(r=r+" ("+e+")"),i.textContent=r}),this.chooseOption("audiotracks","0"),this.containerEl.classList.remove(f),this.reset()}},{key:"enableHD",value:function(){this.containerEl.classList.remove(v),this.containerEl.querySelector(".bp-media-settings-menu-quality").setAttribute("data-disabled","");var e=this.cache.get("media-quality")||"auto";this.chooseOption("quality",e)}}]),t}(s.a);t.a=E},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(121),s=n(323),l=(n.n(s),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),u=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},c=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"setup",value:function(){this.isSetup||(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.wrapperEl.classList.add("bp-media-mp4"))}}]),t}(a.a);t.a=c},function(e,t){},function(e,t,n){"use strict";function i(e){return r[e.toLowerCase()]}t.a=i;var r={af:"Afrikaans",afr:"Afrikaans",alb:"Albanian",sq:"Albanian",sqi:"Albanian",ar:"Arabic",ara:"Arabic",arm:"Armenian",hy:"Armenian",hye:"Armenian",be:"Belarusian",bel:"Belarusian",ben:"Bengali",bn:"Bengali",bos:"Bosnian",bs:"Bosnian",bg:"Bulgarian",bul:"Bulgarian",bur:"Burmese",my:"Burmese",mya:"Burmese",ca:"Catalan",cat:"Catalan",khm:"Central Khmer",km:"Central Khmer",chi:"Chinese",zh:"Chinese",zho:"Chinese",hr:"Croatian",hrv:"Croatian",ces:"Czech",cs:"Czech",cze:"Czech",da:"Danish",dan:"Danish",dut:"Dutch",nl:"Dutch",nld:"Dutch",en:"English",eng:"English",est:"Estonian",et:"Estonian",fil:"Filipino",fi:"Finnish",fin:"Finnish",fr:"French",fra:"French",fre:"French",gl:"Galician",glg:"Galician",lg:"Ganda",lug:"Ganda",geo:"Georgian",ka:"Georgian",kat:"Georgian",de:"German",deu:"German",ger:"German",hat:"Haitian Creole",ht:"Haitian Creole",he:"Hebrew",heb:"Hebrew",hi:"Hindi",hin:"Hindi",hmn:"Hmong",hu:"Hungarian",hun:"Hungarian",ice:"Icelandic",is:"Icelandic",isl:"Icelandic",id:"Indonesian",ind:"Indonesian",ga:"Irish",gle:"Irish",it:"Italian",ita:"Italian",ja:"Japanese",jpn:"Japanese",kaz:"Kazakh",kk:"Kazakh",ko:"Korean",kor:"Korean",ku:"Kurdish",kur:"Kurdish",lao:"Lao",lo:"Lao",lav:"Latvian",lv:"Latvian",lit:"Lithuanian",lt:"Lithuanian",lb:"Luxembourgish",ltz:"Luxembourgish",may:"Malay",ms:"Malay",msa:"Malay",el:"Greek",ell:"Greek",gre:"Greek",mn:"Mongolian",mon:"Mongolian",no:"Norwegian",nor:"Norwegian",fa:"Persian",fas:"Persian",per:"Persian",pl:"Polish",pol:"Polish",por:"Portuguese",pt:"Portuguese",ro:"Romanian",ron:"Romanian",rum:"Romanian",ru:"Russian",rus:"Russian",scc:"Serbian",sr:"Serbian",srp:"Serbian",ii:"Sichuan Yi",iii:"Sichuan Yi",scn:"Sicilian",sk:"Slovak",slk:"Slovak",slo:"Slovak",sl:"Slovenian",slv:"Slovenian",so:"Somali",som:"Somali",es:"Spanish",spa:"Spanish",sw:"Swahili",swa:"Swahili",sv:"Swedish",swe:"Swedish",gsw:"Swiss German",tgl:"Tagalog",tl:"Tagalog",te:"Telugu",tel:"Telugu",th:"Thai",tha:"Thai",bo:"Tibetan",bod:"Tibetan",tib:"Tibetan",tr:"Turkish",tur:"Turkish",uk:"Ukrainian",ukr:"Ukrainian",uz:"Uzbek",uzb:"Uzbek",vi:"Vietnamese",vie:"Vietnamese"}},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(114),s=n(5),l=n(8),u=n(1),c=n(2),h=n(327),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f=["3g2","3gp","avi","m2v","m2ts","m4v","mkv","mov","mp4","mpeg","mpg","mts","qt","wmv"],v=["Chrome","Edge","Firefox","Opera","Safari"],b=[{NAME:"Video360",CONSTRUCTOR:h.a,REP:"dash",EXT:f}],m=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=b,e}return o(t,e),d(t,[{key:"determineViewer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"determineViewer",this).call(this,e,n);if(i){var r=s.a.getName(),o=s.a.isIOS();if(!v.some(function(e){return e===r})||o||!s.a.hasWebGL()){var a=Object(u.D)("We're sorry, your browser doesn't support preview for {1}.",["360-degree videos"]);throw new l.a(c.c.BROWSER_UNSUPPORTED,a,{file:e})}}return i}}]),t}(a.a);t.a=new m},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(122),s=n(328),l=n(329),u=n(330),c=n(20),h=n(117),d=n(331),p=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),f=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},v={imageId:"VIDEO_ID",minFilter:"linear",magFilter:"linear",wrapModeV:"clampToEdge",wrapModeU:"clampToEdge"},b=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.create360Environment=n.create360Environment.bind(n),n.handleToggleVr=n.handleToggleVr.bind(n),n.handleShowVrButton=n.handleShowVrButton.bind(n),n.onCanvasMouseDown=n.onCanvasMouseDown.bind(n),n.onCanvasMouseUp=n.onCanvasMouseUp.bind(n),n}return o(t,e),p(t,[{key:"setup",value:function(){this.isSetup||(f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.destroyed=!1,this.mediaEl.style.display="none",this.mediaContainerEl.style.width="100%",this.mediaContainerEl.style.height="100%",this.wrapperEl.classList.add("bp-video-360"))}},{key:"destroy",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.skybox&&(this.skybox.setAttribute("skyboxTexture",null),this.skybox=null),this.textureAsset&&(this.textureAsset.destroy(),this.textureAsset=null),this.videoAsset&&(this.videoAsset.destroy(),this.videoAsset=null),this.controls&&(this.destroyControls(),this.controls=null),this.renderer&&(this.renderer.getBox3D().off("mouseDown",this.onCanvasMouseDown),this.renderer.getBox3D().off("mouseUp",this.onCanvasMouseUp),this.renderer.removeListener(c.h,this.handleShowVrButton),this.renderer.destroy(),this.renderer=null)}},{key:"getJSAssets",value:function(){return f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getJSAssets",this).call(this).concat(h.a)}},{key:"loadeddataHandler",value:function(){var e=this,n=this.options,i=n.token,r=n.apiHost;this.renderer=new l.a(this.mediaContainerEl,new BoxSDK({token:i,apiBase:r})),this.renderer.on(c.h,this.handleShowVrButton),this.renderer.staticBaseURI=this.options.location.staticBaseURI,this.options.sceneEntities=u.a,this.renderer.initBox3d(this.options).then(this.create360Environment).then(function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadeddataHandler",e).call(e),e.createControls(),e.renderer.initVr()})}},{key:"createControls",value:function(){if(this.controls=new s.a(this.mediaContainerEl),this.controls.on(c.j,this.handleToggleVr),this.renderer&&this.renderer.getBox3D()){var e=this.renderer.getBox3D(),t=e.canvas;t&&(t.addEventListener("mousemove",this.mousemoveHandler),this.hasTouch&&t.addEventListener("touchstart",this.pointerHandler))}}},{key:"destroyControls",value:function(){if(this.controls.removeListener(c.j,this.handleToggleVr),this.controls.destroy(),this.renderer&&this.renderer.getBox3D()){var e=this.renderer.getBox3D(),t=e.canvas;t&&(t.removeEventListener("mousemove",this.mousemoveHandler),t.removeEventListener("touchstart",this.pointerHandler))}}},{key:"resize",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resize",this).call(this),this.renderer&&this.renderer.resize()}},{key:"create360Environment",value:function(){var e=this;return this.skybox=this.renderer.getScene().getComponentByScriptId("skybox_renderer"),this.videoAsset=this.renderer.getBox3D().createVideo({loop:!1,generateMipmaps:!1,querySelector:"."+this.mediaContainerEl.className+" video",autoPlay:!1,muted:!1},"VIDEO_ID"),this.textureAsset=this.renderer.getBox3D().createTexture2d(v,"VIDEO_TEX_ID"),new Promise(function(t){e.textureAsset.load(function(){e.skybox.setAttribute("skyboxTexture",e.textureAsset.id),e.skybox.enable(),e.renderer.getBox3D().on("mouseDown",e.onCanvasMouseDown),t()})})}},{key:"handleToggleVr",value:function(){this.renderer.toggleVr(),this.renderer.vrEnabled?this.skybox.setAttribute("stereoEnabled",!1):(this.mediaEl.paused&&this.mediaEl.play(),this.skybox.setAttribute("stereoEnabled",!0))}},{key:"handleShowVrButton",value:function(){this.controls.showVrButton()}},{key:"onCanvasMouseDown",value:function(){this.renderer.getBox3D().once("mouseUp",this.onCanvasMouseUp)}},{key:"onCanvasMouseUp",value:function(){var e=this.renderer.getInputController();!e||e.getPreviousMouseDragState()||e.getPreviousTouchDragState()||this.togglePlay()}}]),t}(a.a);t.a=b},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(7),s=n.n(a),l=n(20),u=n(6),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.vrButtonEl=null,n.el=e,n.handleToggleVr=n.handleToggleVr.bind(n),n.addUi(),n.attachEventHandlers(),n}return o(t,e),c(t,[{key:"addUi",value:function(){var e=this.el.querySelector(".bp-media-controls-container");this.vrButtonEl=e.appendChild(document.createElement("button")),this.vrButtonEl.classList.add("bp-media-controls-btn"),this.vrButtonEl.setAttribute("aria-label","Toggle VR display"),this.vrButtonEl.setAttribute("title","Toggle VR display"),this.vrButtonEl.classList.add("bp-is-hidden"),this.vrButtonEl.appendChild(document.createElement("span")).innerHTML=u.b}},{key:"attachEventHandlers",value:function(){this.vrButtonEl&&this.vrButtonEl.addEventListener("click",this.handleToggleVr)}},{key:"detachEventHandlers",value:function(){this.vrButtonEl&&this.vrButtonEl.removeEventListener("click",this.handleToggleVr)}},{key:"handleToggleVr",value:function(){this.emit(l.j)}},{key:"showVrButton",value:function(){this.vrButtonEl&&this.vrButtonEl.classList.remove("bp-is-hidden")}},{key:"destroy",value:function(){this.removeAllListeners(),this.detachEventHandlers(),this.vrButtonEl&&this.vrButtonEl.parentElement&&this.vrButtonEl.parentElement.removeChild(this.vrButtonEl),this.vrButtonEl=null,this.el=null,this.handleToggleVr=null}}]),t}(s.a);t.a=h},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(45),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},u=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"getInputController",value:function(){if(!this.inputController){var e=this.box3d.getApplication();if(!e)return null;this.inputController=e.getComponentByScriptName("Input")}return this.inputController}},{key:"destroy",value:function(){this.inputController=null,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(a.a);t.a=u},function(e,t,n){"use strict";var i=n(5);t.a=[{id:"CAMERA_ID",type:"camera",parentId:"SCENE_ID",properties:{near:.05,far:200,fov:70},components:[{name:"Render View",enabled:!0,scriptId:"vr_render_view"},{name:"Orbit Camera",attributes:{panEnabled:!1,zoomEnabled:!0,inertialDamping:.2,lookSpeed:.5},enabled:!0,scriptId:"orbit_camera"},{name:"VR Camera Controller",enabled:!0,scriptId:"vr_camera_controller"}]},{id:"SCENE_ID",type:"scene",children:["CAMERA_ID"],components:[{name:"Skybox",attributes:{size:100},scriptId:"skybox_renderer",enabled:!1}]},{id:"APP_ASSET_ID",type:"application",properties:{startupSceneId:"SCENE_ID"},components:[{name:"Renderer",attributes:{antialias:!i.a.isMobile(),renderOnDemand:!0},scriptId:"box3d_renderer",isBuiltIn:!0,enabled:!0},{name:"Debug Performance",scriptId:"debug_performance",enabled:!1},{name:"Input",scriptId:"input",isBuiltIn:!0,enabled:!0,attributes:{mouseEvents:{enable:!0,scroll:!0,preventScrollDefault:!0,move:!0,down:!0,preventDownDefault:!1,up:!0,doubleClick:!0,leave:!0,contextMenu:!0,preventContextMenuDefault:!0,dragBufferDistance:12,eventHandler:!0},touchEvents:{enable:!0,start:!0,preventStartDefault:!1,end:!0,doubleTap:!0,cancel:!0,leave:!0,move:!0,preventMoveDefault:!0,dragBufferDistance:12,eventHandler:!0},keyEvents:{enable:!0,down:!0,up:!0,preventDefault:!1,eventHandler:!0}}},{name:"VR Presenter",scriptId:"vr_presenter"}]}]},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(13),s=n(15),l=n(333),u=n(70),c=n(341),h=n(344),d=n(64),p=n(0),f=n(69),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},m=[{NAME:"Presentation",CONSTRUCTOR:c.a,REP:"pdf",EXT:["gslide","gslides","odp","ppt","pptx","key"]},{NAME:"AutoCAD",CONSTRUCTOR:l.a,REP:"pdf",EXT:["dwg"]},{NAME:"Document",CONSTRUCTOR:u.a,REP:"pdf",EXT:f.a},{NAME:"Presentation",CONSTRUCTOR:c.a,REP:"pdf",EXT:f.a},{NAME:"SinglePage",CONSTRUCTOR:h.a,REP:"pdf",EXT:f.a},{NAME:"Document",CONSTRUCTOR:u.a,REP:p._1,EXT:["pdf","lcdpdf"]},{NAME:"Presentation",CONSTRUCTOR:c.a,REP:p._1,EXT:["pdf","lcdpdf"]},{NAME:"SinglePage",CONSTRUCTOR:h.a,REP:p._1,EXT:["pdf","lcdpdf"]}],g=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=m,e}return o(t,e),v(t,[{key:"determineRepresentation",value:function(e,n){var i=void 0,r=b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"determineRepresentation",this).call(this,e,n),o=d.a.getStatus(r);return"pdf"===e.extension&&"pdf"===r.representation&&o!==p._30&&(i=Object(s.h)(e,p._1)),i||r}}]),t}(a.a);t.a=new g},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(70),s=n(340),l=n(0),u=n(2),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},d=l.Z.FIELD_HASXREFS,p=l.Z.TEMPLATE_AUTOCAD,f=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"load",value:function(){h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this),this.checkForXrefs()}},{key:"checkForXrefs",value:function(){var e=this,t=this.options.file,n=t.extension,i=t.id;s.a.getXrefsMetadata(i,p,this.options).then(function(t){t[d]&&(e.options.ui.showNotification("This preview has links you cannot view, open in its native application to view",null,!0),e.emitMetric({name:u.e,data:n}))})}}]),t}(a.a);t.a=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(7),s=n.n(a),l=n(1),u=n(2),c=n(0),h=n(6),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(e){function t(e,n,o){i(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(a.opened=!1,a.bar=e,a.findController=n,a.currentMatch=0,a.canDownload=o,null===a.findController)throw new Error("DocFindBar cannot be used without a PDFFindController instance.");return a.onKeydown=a.onKeydown.bind(a),a.findFieldHandler=a.findFieldHandler.bind(a),a.barKeyDownHandler=a.barKeyDownHandler.bind(a),a.findNextHandler=a.findNextHandler.bind(a),a.findPreviousHandler=a.findPreviousHandler.bind(a),a.close=a.close.bind(a),a.findController.updateUIState=a.updateUIState.bind(a),a.findController.updateUIResultsCount=a.updateUIResultsCount.bind(a),a.bar.classList.add(c.K),a.createFindField(),a.createFindButtons(),a.findPreviousButtonEl=a.bar.querySelector(".bp-doc-find-prev"),a.findNextButtonEl=a.bar.querySelector(".bp-doc-find-next"),a.findCloseButtonEl=a.bar.querySelector(".bp-doc-find-close"),a.bindDOMListeners(),a}return o(t,e),d(t,[{key:"createFindField",value:function(){var e=document.createElement("span");e.classList.add("bp-doc-find-search"),e.innerHTML=h.t.trim(),this.bar.appendChild(e),this.findFieldEl=document.createElement("input"),this.findFieldEl.classList.add("bp-doc-find-field"),this.bar.appendChild(this.findFieldEl),this.findResultsCountEl=document.createElement("span"),this.findResultsCountEl.classList.add("bp-doc-find-results-count"),this.findResultsCountEl.classList.add(c.K),this.bar.appendChild(this.findResultsCountEl)}},{key:"createFindButtons",value:function(){var e=('<button class="bp-doc-find-prev" type="button">'+h.k+"</button>").trim(),t=('<button class="bp-doc-find-next" type="button">'+h.j+"</button>").trim(),n=('<button class="bp-doc-find-close" type="button">'+h.g+"</button>").trim();this.findButtonContainerEl=document.createElement("span"),this.findButtonContainerEl.classList.add("bp-doc-find-controls"),this.findButtonContainerEl.innerHTML=e+t+n,this.bar.appendChild(this.findButtonContainerEl)}},{key:"destroy",value:function(){this.currentMatch=0,this.unbindDOMListeners(),this.bar&&this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}},{key:"dispatchFindEvent",value:function(e,t){this.findController.executeCommand(e,{query:this.findFieldEl.value,phraseSearch:!0,highlightAll:!0,findPrevious:t})}},{key:"updateUIState",value:function(e){switch(this.status="",e){case 1:this.findFieldEl.classList.add("bp-find-match-not-found");break;case 3:this.status="pending";break;case 0:this.findFieldEl.classList.remove("bp-find-match-not-found")}this.findFieldEl.setAttribute("data-status",this.status),this.updateUIResultsCount()}},{key:"updateUIResultsCount",value:function(){if(this.findResultsCountEl){if(!this.findController.matchCount)return void this.findResultsCountEl.classList.add(c.K);var e=this.findResultsCountEl.getBoundingClientRect().width+13;this.findFieldEl.style.paddingRight=e+"px",this.findResultsCountEl.textContent=this.currentMatch+" of "+this.findController.matchCount,this.findResultsCountEl.classList.remove(c.K)}}},{key:"setFindFieldElValue",value:function(e){this.findFieldEl.value=e}},{key:"bindDOMListeners",value:function(){this.bar.addEventListener("keydown",this.barKeyDownHandler),this.findFieldEl.addEventListener("input",this.findFieldHandler),this.findPreviousButtonEl.addEventListener("click",this.findPreviousHandler),this.findNextButtonEl.addEventListener("click",this.findNextHandler),this.findCloseButtonEl.addEventListener("click",this.close)}},{key:"unbindDOMListeners",value:function(){this.bar.removeEventListener("keydown",this.barKeyDownHandler),this.findFieldEl.removeEventListener("input",this.findFieldHandler),this.findPreviousButtonEl.removeEventListener("click",this.findPreviousHandler),this.findNextButtonEl.removeEventListener("click",this.findNextHandler),this.findCloseButtonEl.removeEventListener("click",this.close)}},{key:"onKeydown",value:function(e){switch(Object(l.k)(e).toLowerCase()){case"meta+f":case"control+f":case"meta+g":case"control+g":case"f3":this.canDownload&&this.open(),e.preventDefault();break;default:return!1}return!0}},{key:"findFieldHandler",value:function(){this.dispatchFindEvent("find"),this.currentMatch=1}},{key:"barKeyDownHandler",value:function(e){switch(Object(l.k)(e).toLowerCase()){case"enter":this.findNextHandler(!1);break;case"shift+enter":this.findPreviousHandler(!1);break;case"escape":case"esc":if(!this.opened)return;this.close(),e.stopPropagation(),e.preventDefault();break;case"shift++":case"shift+_":case"[":case"]":e.stopPropagation()}}},{key:"findNextHandler",value:function(e){this.findFieldEl.value&&(e?(this.dispatchFindEvent("findagain",!1),this.currentMatch=this.currentMatch+1,this.currentMatch>this.findController.matchCount&&(this.currentMatch=1)):this.findNextButtonEl.focus(),this.emit(u.l.metric,{name:u.j.NEXT}))}},{key:"findPreviousHandler",value:function(e){this.findFieldEl.value&&(e?(this.dispatchFindEvent("findagain",!0),this.currentMatch=this.currentMatch-1,this.currentMatch<=0&&(this.currentMatch=this.findController.matchCount)):this.findPreviousButtonEl.focus(),this.emit(u.l.metric,{name:u.j.PREVIOUS}))}},{key:"open",value:function(){this.prevSearchQuery&&(this.setFindFieldElValue(this.prevSearchQuery),this.findFieldHandler()),this.opened||(this.opened=!0,this.bar.classList.remove(c.K),this.emit(u.l.metric,{name:u.j.OPEN})),this.findFieldEl.select(),this.findFieldEl.focus()}},{key:"close",value:function(){this.prevSearchQuery=this.findFieldEl.value,this.setFindFieldElValue(""),this.findFieldHandler(),this.opened&&(this.opened=!1,this.bar.classList.add(c.K),this.findController.active=!1)}}]),t}(s.a);t.a=p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(124),o=n.n(r),a=n(336),s=n(337),l=n(1),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(){function e(t,n){i(this,e),this.anchorEl=t,this.currentThumbnails=[],this.pdfViewer=n,this.thumbnailImageCache=new s.a,this.isOpen=!1,this.createImageEl=this.createImageEl.bind(this),this.createPlaceholderThumbnail=this.createPlaceholderThumbnail.bind(this),this.createThumbnailImage=this.createThumbnailImage.bind(this),this.generateThumbnailImages=this.generateThumbnailImages.bind(this),this.getThumbnailDataURL=this.getThumbnailDataURL.bind(this),this.renderNextThumbnailImage=this.renderNextThumbnailImage.bind(this),this.requestThumbnailImage=this.requestThumbnailImage.bind(this),this.thumbnailClickHandler=this.thumbnailClickHandler.bind(this),this.onKeydown=this.onKeydown.bind(this),this.anchorEl.addEventListener("click",this.thumbnailClickHandler),this.anchorEl.addEventListener("keydown",this.onKeydown)}return c(e,[{key:"thumbnailClickHandler",value:function(e){var t=e.target;if(t.classList.contains("bp-thumbnail-nav")){var n=t.parentNode,i=n.dataset.bpPageNum,r=parseInt(i,10);this.onThumbnailSelect&&this.onThumbnailSelect(r)}this.anchorEl.focus(),e.preventDefault(),e.stopImmediatePropagation()}},{key:"onKeydown",value:function(e){var t=Object(l.k)(e),n=!1,i=this.currentPage;"ArrowUp"===t?(i-=1,n=!0):"ArrowDown"===t&&(i+=1,n=!0),n&&(e.preventDefault(),e.stopImmediatePropagation()),this.onThumbnailSelect&&this.onThumbnailSelect(i)}},{key:"destroy",value:function(){this.virtualScroller&&(this.virtualScroller.destroy(),this.virtualScroller=null),this.thumbnailImageCache&&(this.thumbnailImageCache.destroy(),this.thumbnailImageCache=null),this.pdfViewer=null,this.currentThumbnails=[],this.currentPage=null,this.anchorEl.removeEventListener("click",this.thumbnailClickHandler)}},{key:"init",value:function(e){var t=this;this.virtualScroller=new a.a(this.anchorEl),e&&(this.onThumbnailSelect=e.onSelect,this.currentPage=e.currentPage||1,this.isOpen=!!e.isOpen),this.pdfViewer.pdfDocument.getPage(1).then(function(e){var n=e.getViewport(1),i=n.width,r=n.height;if(o()(i)&&i>0&&o()(r)&&r>0){t.scale=154/i,t.pageRatio=i/r;var a=e.getViewport(t.scale);t.thumbnailHeight=Math.ceil(a.height),t.virtualScroller.init({initialRowIndex:t.currentPage-1,totalItems:t.pdfViewer.pagesCount,itemHeight:t.thumbnailHeight+6,containerHeight:t.getContainerHeight(),margin:15,renderItemFn:t.createPlaceholderThumbnail,onScrollEnd:t.generateThumbnailImages,onInit:t.generateThumbnailImages})}})}},{key:"generateThumbnailImages",value:function(e){var t=e.items;this.currentThumbnails=t,this.renderNextThumbnailImage()}},{key:"renderNextThumbnailImage",value:function(){var e=this.virtualScroller.getVisibleItems(),t=e.concat(this.currentThumbnails).find(function(e){return!e.classList.contains("bp-thumbnail-image-loaded")});if(t){var n=parseInt(t.dataset.bpPageNum,10);this.requestThumbnailImage(n-1,t)}}},{key:"createPlaceholderThumbnail",value:function(e){var t=document.createElement("div"),n=e+1;t.className="bp-thumbnail",t.dataset.bpPageNum=n,t.appendChild(this.createPageNumber(n));var i=this.createThumbnailNav();t.appendChild(i),n===this.currentPage&&t.classList.add("bp-thumbnail-is-selected");var r=this.thumbnailImageCache.get(e);return r&&!r.inProgress&&(i.appendChild(r.image),t.classList.add("bp-thumbnail-image-loaded")),this.currentThumbnails.push(t),t}},{key:"createThumbnailNav",value:function(){var e=document.createElement("div");return e.className="bp-thumbnail-nav",e.setAttribute("role","button"),e}},{key:"requestThumbnailImage",value:function(e,t){var n=this;requestAnimationFrame(function(){n.createThumbnailImage(e).then(function(e){e&&(t.lastChild.appendChild(e),t.classList.add("bp-thumbnail-image-loaded")),n.renderNextThumbnailImage()})})}},{key:"createThumbnailImage",value:function(e){var t=this,n=this.thumbnailImageCache.get(e);return n&&n.image?Promise.resolve(n.image):n&&n.inProgress?Promise.resolve(null):(this.thumbnailImageCache.set(e,u({},n,{inProgress:!0})),this.getThumbnailDataURL(e+1).then(this.createImageEl).then(function(n){return t.thumbnailImageCache.set(e,{inProgress:!1,image:n}),n}))}},{key:"getThumbnailDataURL",value:function(e){var t=this,n=document.createElement("canvas");return this.pdfViewer.pdfDocument.getPage(e).then(function(e){var i=e.getViewport(1),r=i.width,o=i.height,a=r/o;a<t.pageRatio?(n.height=Math.ceil(308/t.pageRatio),n.width=n.height*a):(n.width=308,n.height=Math.ceil(308/a));var s=n.width,l=s/r;return e.render({canvasContext:n.getContext("2d"),viewport:e.getViewport(l)})}).then(function(){return n.toDataURL()})}},{key:"createImageEl",value:function(e){var t=document.createElement("div");return t.classList.add("bp-thumbnail-image"),t.style.backgroundImage="url('"+e+"')",t.style.width="154px",t.style.height=this.thumbnailHeight+"px",t}},{key:"createPageNumber",value:function(e){var t=document.createElement("div");return t.className="bp-thumbnail-page-number",t.textContent=""+e,t}},{key:"setCurrentPage",value:function(e){var t=parseInt(e,10);t>=1&&t<=this.pdfViewer.pagesCount&&(this.currentPage=t,this.applyCurrentPageSelection(),this.virtualScroller.scrollIntoView(t-1))}},{key:"applyCurrentPageSelection",value:function(){var e=this;this.currentThumbnails.forEach(function(t){parseInt(t.dataset.bpPageNum,10)===e.currentPage?t.classList.add("bp-thumbnail-is-selected"):t.classList.remove("bp-thumbnail-is-selected")})}},{key:"toggle",value:function(){this.anchorEl&&(this.isOpen?this.toggleClose():this.toggleOpen())}},{key:"toggleOpen",value:function(){this.virtualScroller&&(this.isOpen=!0,this.virtualScroller.scrollIntoView(this.currentPage-1))}},{key:"toggleClose",value:function(){this.isOpen=!1}},{key:"resize",value:function(){this.virtualScroller&&this.virtualScroller.resize(this.getContainerHeight())}},{key:"getContainerHeight",value:function(){return this.anchorEl?this.anchorEl.parentNode.clientHeight:null}}]),e}();t.a=h},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(124),o=n.n(r),a=n(53),s=n.n(a),l=n(26),u=n.n(l),c=n(43),h=n.n(c),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=150,f=151,v=function(){function e(t){i(this,e),this.anchorEl=t,this.previousScrollTop=0,this.createListElement=this.createListElement.bind(this),this.isVisible=this.isVisible.bind(this),this.onScrollEndHandler=this.onScrollEndHandler.bind(this),this.onScrollHandler=this.onScrollHandler.bind(this),this.getCurrentListInfo=this.getCurrentListInfo.bind(this),this.renderItems=this.renderItems.bind(this),this.scrollIntoView=this.scrollIntoView.bind(this),this.debouncedOnScrollEndHandler=h()(this.onScrollEndHandler,f),this.throttledOnScrollHandler=u()(this.onScrollHandler,p)}return d(e,[{key:"destroy",value:function(){this.scrollingEl&&this.scrollingEl.remove(),this.scrollingEl=null,this.listEl=null}},{key:"init",value:function(e){this.validateRequiredConfig(e),this.totalItems=e.totalItems,this.itemHeight=e.itemHeight,this.containerHeight=e.containerHeight,this.renderItemFn=e.renderItemFn,this.margin=e.margin||0,this.onScrollEnd=e.onScrollEnd,this.onScrollStart=e.onScrollStart,this.scrollingEl=document.createElement("div"),this.scrollingEl.className="bp-vs",this.listEl=this.createListElement(),this.scrollingEl.appendChild(this.listEl),this.anchorEl.appendChild(this.scrollingEl),this.resize(this.containerHeight);var t=e.initialRowIndex||0;if(this.renderItems(t<this.maxRenderedItems?0:t),this.scrollIntoView(t),this.bindDOMListeners(),e.onInit){var n=this.getCurrentListInfo();e.onInit(n)}}},{key:"resize",value:function(e){e&&o()(e)&&(this.containerHeight=e,this.totalViewItems=Math.floor(this.containerHeight/(this.itemHeight+this.margin)),this.maxBufferHeight=this.totalViewItems*this.itemHeight,this.maxRenderedItems=3*(this.totalViewItems+1))}},{key:"validateRequiredConfig",value:function(e){if(!e.totalItems||!o()(e.totalItems))throw new Error("totalItems is required");if(!e.itemHeight||!o()(e.itemHeight))throw new Error("itemHeight is required");if(!e.renderItemFn||!s()(e.renderItemFn))throw new Error("renderItemFn is required");if(!e.containerHeight||!o()(e.containerHeight))throw new Error("containerHeight is required")}},{key:"bindDOMListeners",value:function(){this.scrollingEl.addEventListener("scroll",this.throttledOnScrollHandler,{passive:!0}),this.scrollingEl.addEventListener("scroll",this.debouncedOnScrollEndHandler,{passive:!0})}},{key:"unbindDOMListeners",value:function(){this.scrollingEl&&(this.scrollingEl.removeEventListener("scroll",this.throttledOnScrollHandler),this.scrollingEl.removeEventListener("scroll",this.debouncedOnScrollEndHandler))}},{key:"onScrollHandler",value:function(e){var t=e.target.scrollTop;if(Math.abs(t-this.previousScrollTop)>this.maxBufferHeight){var n=Math.floor(t/(this.itemHeight+this.margin))-this.totalViewItems;this.renderItems(Math.max(n,0)),this.previousScrollTop=t}}},{key:"onScrollEndHandler",value:function(){if(this.onScrollEnd){var e=this.getCurrentListInfo();this.onScrollEnd(e)}}},{key:"getCurrentListInfo",value:function(){var e=this.listEl,t=e.firstElementChild,n=e.lastElementChild,i=e.children,r=t?parseInt(t.dataset.bpVsRowIndex,10):-1,a=n?parseInt(n.dataset.bpVsRowIndex,10):-1;r=o()(r)?r:-1,a=o()(a)?a:-1;var s=[];return i&&(s=this.getListItems().map(function(e){return e&&e.children?e.children[0]:null})),{startOffset:r,endOffset:a,items:s}}},{key:"renderItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.getCurrentListInfo(),n=t.startOffset,i=t.endOffset;if(n!==e){var r=Math.max(0,this.totalItems-this.maxRenderedItems),o=e>r?r:e,a=e+this.maxRenderedItems;a>=this.totalItems&&(a=this.totalItems-1);var s=document.createDocumentFragment();n<=e&&e<=i?(o=i+1,this.createItems(s,o,a),this.deleteItems(this.listEl,n-n,e-n),this.listEl.appendChild(s)):n<=a&&a<=i?(this.createItems(s,e,n-1),this.deleteItems(this.listEl,a-n+1),this.listEl.insertBefore(s,this.listEl.firstElementChild)):(this.createItems(s,o,a),this.deleteItems(this.listEl),this.listEl.appendChild(s))}}},{key:"createItems",value:function(e,t,n){if(!(!e||t<0||n<0))for(var i=t;i<=n;i++){var r=this.renderItem(i);e.appendChild(r)}}},{key:"deleteItems",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2];if(!(!e||t<0||n<0)){Array.prototype.slice.call(e.children,t,n).forEach(function(t){return e.removeChild(t)})}}},{key:"renderItem",value:function(e){var t=document.createElement("li"),n=(this.itemHeight+this.margin)*e+this.margin,i=void 0;try{i=this.renderItemFn.call(this,e)}catch(e){}return t.style.top=n+"px",t.style.height=this.itemHeight+"px",t.classList.add("bp-vs-list-item"),t.dataset.bpVsRowIndex=e,i&&t.appendChild(i),t}},{key:"createListElement",value:function(){var e=document.createElement("ol");return e.className="bp-vs-list",e.style.height=this.totalItems*(this.itemHeight+this.margin)+this.margin+"px",e}},{key:"scrollIntoView",value:function(e){if(!(!this.scrollingEl||e<0||e>=this.totalItems)){var t=this.getListItems().find(function(t){var n=t.dataset.bpVsRowIndex;return parseInt(n,10)===e});if(t)this.isVisible(t)||t.scrollIntoView();else{var n=(this.itemHeight+this.margin)*e;this.scrollingEl.scrollTop=n,this.scrollingEl.dispatchEvent(new Event("scroll"))}}}},{key:"isVisible",value:function(e){if(!this.scrollingEl||!e)return!1;var t=this.scrollingEl.scrollTop,n=e.offsetTop;return t<=n&&n+this.itemHeight<=t+this.containerHeight}},{key:"getVisibleItems",value:function(){var e=this;return this.listEl?this.getListItems().filter(function(t){return e.isVisible(t)}).map(function(e){return e&&e.children&&e.children[0]}):[]}},{key:"getListItems",value:function(){return this.listEl?Array.prototype.slice.call(this.listEl.children):[]}}]),e}();t.a=v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(125),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},u=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.maxEntries=e||500,n.cache={},n.cacheQueue=[],n}return o(t,e),s(t,[{key:"destroy",value:function(){this.cache=null,this.cacheQueue=null}},{key:"set",value:function(e,n){if(this.inCache(e)||this.cacheQueue.push(e),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"set",this).call(this,e,n),this.cacheQueue.length>this.maxEntries){var i=this.cacheQueue.shift();this.unset(i)}}}]),t}(a.a);t.a=u},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return s});var i=n(0),r="third-party/doc/"+i.U+"/",o=[r+"pdf.min.js",r+"pdf_viewer.min.js",r+"exif.min.js"],a=[r+"pdf.worker.min.js"],s=[r+"pdf_viewer.min.css"]},function(e,t){},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}var o=n(9),a=n(1),s=n(0),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=s.Z.FIELD_HASXREFS,c=s.Z.SCOPE_GLOBAL,h={getXrefsMetadata:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e&&t?h.getMetadata(e,c,t,n).then(function(e){var t=e[u],n=r(e,[u]);return l({},n,i({},u,"true"===t))}):Promise.reject(new Error("id and template are required parameters"))},getMetadata:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=i.apiHost,s=i.token;return o.a.get(h.getMetadataURL(e,t,n,r),{headers:Object(a.p)({},s)})},getMetadataURL:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,n=arguments[2];return arguments[3]+"/2.0/files/"+e+"/metadata/"+t+"/"+n}};t.a=h},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(26),s=n.n(a),l=n(123),u=n(342),c=n(0),h=n(343),d=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mobileScrollHandler=n.mobileScrollHandler.bind(n),n.pagesinitHandler=n.pagesinitHandler.bind(n),n.pagechangeHandler=n.pagechangeHandler.bind(n),n.throttledWheelHandler=n.getWheelHandler().bind(n),n}return o(t,e),d(t,[{key:"setup",value:function(){this.isSetup||(p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.docEl.classList.add("bp-doc-presentation"),this.preloader=new u.a(this.previewUI),this.preloader.addListener("preload",this.onPreload.bind(this)))}},{key:"destroy",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.preloader.removeAllListeners("preload")}},{key:"setPage",value:function(e){this.checkOverflow();var n=this.docEl.querySelectorAll(".page");[].forEach.call(n,function(e){e.classList.add(c.L)}),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setPage",this).call(this,e),this.docEl.querySelector('[data-page-number="'+this.pdfViewer.currentPageNumber+'"]').classList.remove(c.L),this.pdfViewer.update()}},{key:"onKeydown",value:function(e,n){return"ArrowUp"===e?(this.previousPage(),!0):"ArrowDown"===e?(this.nextPage(),!0):p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onKeydown",this).call(this,e,n)}},{key:"checkOverflow",value:function(){var e=this.docEl,t=this.docEl.querySelector('[data-page-number="'+this.pdfViewer.currentPageNumber+'"]'),n=t.clientWidth>e.clientWidth,i=t.clientHeight-30>e.clientHeight;return e.classList.remove("overflow-x"),e.classList.remove("overflow-y"),n&&e.classList.add("overflow-x"),i&&e.classList.add("overflow-y"),n||i}},{key:"initViewer",value:function(e){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initViewer",this).call(this,e),this.overwritePdfViewerBehavior()}},{key:"bindDOMListeners",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"bindDOMListeners",this).call(this),this.docEl.addEventListener("wheel",this.throttledWheelHandler),this.hasTouch&&(this.docEl.addEventListener("touchstart",this.mobileScrollHandler),this.docEl.addEventListener("touchmove",this.mobileScrollHandler),this.docEl.addEventListener("touchend",this.mobileScrollHandler))}},{key:"unbindDOMListeners",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"unbindDOMListeners",this).call(this),this.docEl.removeEventListener("wheel",this.throttledWheelHandler),this.hasTouch&&(this.docEl.removeEventListener("touchstart",this.mobileScrollHandler),this.docEl.removeEventListener("touchmove",this.mobileScrollHandler),this.docEl.removeEventListener("touchend",this.mobileScrollHandler))}},{key:"mobileScrollHandler",value:function(e){if(!(this.checkOverflow()||this.isPinching||e.touches.length>1))if("touchstart"===e.type)this.scrollStart=e.changedTouches[0].clientY;else if("touchmove"===e.type)e.preventDefault();else{var t=e.changedTouches[0].clientY;if(!this.scrollStart||!t)return;this.scrollStart>t+5?this.nextPage():this.scrollStart<t-5&&this.previousPage(),this.scrollStart=null}}},{key:"pagesinitHandler",value:function(){[].slice.call(this.docEl.querySelectorAll(".pdfViewer .page"),0).forEach(function(e){"1"!==e.getAttribute("data-page-number")&&e.classList.add(c.L)}),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pagesinitHandler",this).call(this),this.pdfViewer.currentScaleValue="page-fit"}},{key:"pagechangeHandler",value:function(e){this.setPage(e.pageNumber),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pagechangeHandler",this).call(this,e)}},{key:"getWheelHandler",value:function(){var e=this;return s()(function(t){0===t.deltaY||0!==t.deltaX||e.checkOverflow()||(t.deltaY>0?e.nextPage():t.deltaY<0&&e.previousPage())},200)}},{key:"overwritePdfViewerBehavior",value:function(){var e=this;this.pdfViewer.scrollPageIntoView=function(t){if(e.loaded){var n=t;"number"!=typeof n&&(n=t.pageNumber||1),e.setPage(n)}},this.pdfViewer._getVisiblePages=function(){var t=e.pdfViewer._pages[e.pdfViewer._currentPageNumber-1];return{first:t,last:t,views:[{id:t.id,view:t}]}}}}]),t}(l.a);t.a=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(126),s=n(0),l=n(1),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.maxZoomScale=0,n.wrapperClassName=s.v,n}return o(t,e),u(t,[{key:"scaleAndShowPreload",value:function(e,t){this.checkDocumentLoaded()||(Object(l.F)(this.imageEl,e,t),Object(l.F)(this.overlayEl,e,t),this.previewUI.hideLoadingIndicator(),this.preloadEl.classList.remove(s.L),this.emit("preload"))}}]),t}(a.a);t.a=c},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(70),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"initPdfViewer",value:function(){return new PDFJS.PDFSinglePageViewer({container:this.docEl,linkService:new PDFJS.PDFLinkService,enhanceTextSelection:!this.isMobile})}}]),t}(a.a);t.a=l},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(13),s=n(5),l=n(8),u=n(1),c=n(2),h=n(346),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f=[{NAME:"Model3d",CONSTRUCTOR:h.a,REP:"3d",EXT:["box3d","fbx","obj","dae","3ds","ply","stl"]}],v=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=f,e}return o(t,e),d(t,[{key:"determineViewer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"determineViewer",this).call(this,e,n);if(i&&!s.a.supportsModel3D()){var r=Object(u.D)("We're sorry, your browser doesn't support preview for {1}.",["3D models"]);throw new l.a(c.c.BROWSER_UNSUPPORTED,r,{file:e})}return i}}]),t}(a.a);t.a=new v},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(115),s=n(347),l=n(350),u=n(27),c=n(20),h=n(353),d=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.instances=[],n.axes={up:null,forward:null},n.handleRotateOnAxis=n.handleRotateOnAxis.bind(n),n.handleSelectAnimationClip=n.handleSelectAnimationClip.bind(n),n.handleSetCameraProjection=n.handleSetCameraProjection.bind(n),n.handleSetRenderMode=n.handleSetRenderMode.bind(n),n.handleShowSkeletons=n.handleShowSkeletons.bind(n),n.handleShowWireframes=n.handleShowWireframes.bind(n),n.handleShowGrid=n.handleShowGrid.bind(n),n.handleToggleAnimation=n.handleToggleAnimation.bind(n),n.handleToggleHelpers=n.handleToggleHelpers.bind(n),n.handleCanvasClick=n.handleCanvasClick.bind(n),n.onMetadataError=n.onMetadataError.bind(n),n}return o(t,e),d(t,[{key:"setup",value:function(){this.isSetup||(p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.wrapperEl.classList.add(c.c),this.loadTimeout=18e4)}},{key:"createSubModules",value:function(){this.controls=new s.a(this.wrapperEl),this.renderer=new l.a(this.wrapperEl,this.boxSdk)}},{key:"attachEventHandlers",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attachEventHandlers",this).call(this),this.controls&&(this.controls.on(u.n,this.handleRotateOnAxis),this.controls.on(u.o,this.handleSelectAnimationClip),this.controls.on(u.p,this.handleSetCameraProjection),this.controls.on(u.r,this.handleSetRenderMode),this.controls.on(u.s,this.handleShowSkeletons),this.controls.on(u.t,this.handleShowWireframes),this.controls.on(u.q,this.handleShowGrid),this.controls.on(u.u,this.handleToggleAnimation),this.controls.on(u.v,this.handleToggleHelpers)),this.renderer&&this.renderer.on(u.l,this.handleCanvasClick)}},{key:"detachEventHandlers",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"detachEventHandlers",this).call(this),this.controls&&(this.controls.removeListener(u.n,this.handleRotateOnAxis),this.controls.removeListener(u.o,this.handleSelectAnimationClip),this.controls.removeListener(u.p,this.handleSetCameraProjection),this.controls.removeListener(u.r,this.handleSetRenderMode),this.controls.removeListener(u.s,this.handleShowSkeletons),this.controls.removeListener(u.t,this.handleShowWireframes),this.controls.removeListener(u.q,this.handleShowGrid),this.controls.removeListener(u.u,this.handleToggleAnimation),this.controls.removeListener(u.v,this.handleToggleHelpers)),this.renderer&&this.renderer.removeListener(u.l,this.handleCanvasClick)}},{key:"handleSelectAnimationClip",value:function(e){this.renderer.setAnimationClip(e)}},{key:"handleRotateOnAxis",value:function(e){this.renderer.rotateOnAxis(e)}},{key:"handleRotationAxisSet",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.renderer.setAxisRotation(e,t,n)}},{key:"handleSceneLoaded",value:function(){var e=this;return this.loaded=!0,this.boxSdk.getMetadataClient().get(this.options.file.id,"global","box3d").then(function(e){if(200!==e.status)throw new Error("Received unsuccessful response status: "+e.status);return e.response}).catch(this.onMetadataError).then(function(t){return e.controls&&e.controls.addUi(),e.axes.up=t.upAxis||"+Y",e.axes.forward=t.forwardAxis||"+Z",e.renderMode=t.defaultRenderMode||u.A,e.projection=t.cameraProjection||u.e,"true"===t.renderGrid?e.renderGrid=!0:"false"===t.renderGrid?e.renderGrid=!1:e.renderGrid=!0,"+Y"===e.axes.up&&"+Z"===e.axes.forward||e.handleRotationAxisSet(e.axes.up,e.axes.forward,!1),e.handleReset(),e.populateAnimationControls(),e.showWrapper(),e.emit(c.e),!0})}},{key:"onMetadataError",value:function(e){return{}}},{key:"populateAnimationControls",value:function(){var e=this;if(this.controls){var t=this.renderer.box3d.getEntitiesByType("animation");if(t.length>0){var n=t[0].getClipIds();n.forEach(function(n){var i=t[0].getClip(n),r=i.stop-i.start;e.controls.addAnimationClip(n,i.name,r)}),n.length>0&&(this.controls.showAnimationControls(),this.controls.selectAnimationClip(n[0]))}}}},{key:"handleToggleAnimation",value:function(e){this.renderer.toggleAnimation(e)}},{key:"handleCanvasClick",value:function(){this.controls.hidePullups()}},{key:"showWrapper",value:function(){this.wrapperEl.classList.remove(c.c)}},{key:"handleReset",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleReset",this).call(this),this.controls&&(this.controls.handleSetRenderMode(this.renderMode),this.controls.setCurrentProjectionMode(this.projection),this.controls.handleSetSkeletonsVisible(!1),this.controls.handleSetWireframesVisible(!1),this.controls.handleSetGridVisible(this.renderGrid)),this.renderer&&(this.handleRotationAxisSet(this.axes.up,this.axes.forward,!1),this.renderer.stopAnimation(),this.renderer.resetView())}},{key:"handleSetRenderMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Lit";this.renderer.setRenderMode(e)}},{key:"handleToggleHelpers",value:function(e){this.renderer.toggleHelpers(e)}},{key:"handleSetCameraProjection",value:function(e){this.renderer.setCameraProjection(e)}},{key:"handleShowSkeletons",value:function(e){this.renderer.setSkeletonsVisible(e)}},{key:"handleShowWireframes",value:function(e){this.renderer.setWireframesVisible(e)}},{key:"handleShowGrid",value:function(e){this.renderer.setGridVisible(e)}}]),t}(a.a);t.a=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(66),s=n(348),l=n(349),u=n(27),c=n(20),h=n(6),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isAnimationPlaying=!1,n.animationClipsPullup=new s.a(e),n.settingsPullup=new l.a,n.handleSelectAnimationClip=n.handleSelectAnimationClip.bind(n),n.handleToggleAnimation=n.handleToggleAnimation.bind(n),n.handleToggleAnimationClips=n.handleToggleAnimationClips.bind(n),n.handleToggleSettings=n.handleToggleSettings.bind(n),n.handleSetRenderMode=n.handleSetRenderMode.bind(n),n.handleSetSkeletonsVisible=n.handleSetSkeletonsVisible.bind(n),n.handleSetWireframesVisible=n.handleSetWireframesVisible.bind(n),n.handleSetGridVisible=n.handleSetGridVisible.bind(n),n.handleSetCameraProjection=n.handleSetCameraProjection.bind(n),n.handleAxisRotation=n.handleAxisRotation.bind(n),n}return o(t,e),d(t,[{key:"addUi",value:function(){this.resetButtonEl=this.controls.add("Reset",this.handleReset,"",h.a),this.animationClipsPullup.addListener(u.o,this.handleSelectAnimationClip),this.animationToggleEl=this.controls.add("Play/pause animation",this.handleToggleAnimation,"",h.p),this.animationClipButtonEl=this.controls.add("Animation clips",this.handleToggleAnimationClips,"",h.c),this.animationClipButtonEl.parentNode.appendChild(this.animationClipsPullup.pullupEl),this.hideAnimationControls(),this.addVrButton(),this.settingsPullup.addListener(u.r,this.handleSetRenderMode),this.settingsPullup.addListener(u.s,this.handleSetSkeletonsVisible),this.settingsPullup.addListener(u.t,this.handleSetWireframesVisible),this.settingsPullup.addListener(u.q,this.handleSetGridVisible),this.settingsPullup.addListener(u.p,this.handleSetCameraProjection),this.settingsPullup.addListener(u.n,this.handleAxisRotation),this.settingsButtonEl=this.controls.add("Settings",this.handleToggleSettings,"",h.n),this.settingsButtonEl.parentNode.appendChild(this.settingsPullup.pullupEl),this.addFullscreenButton(),this.handleSetRenderMode(u.A)}},{key:"hidePullups",value:function(){this.animationClipsPullup.hide(),this.settingsPullup.hide(),this.emit(u.v,!1)}},{key:"handleToggleSettings",value:function(){this.animationClipsPullup.hide(),this.settingsPullup.toggle(),this.emit(u.v)}},{key:"handleSetRenderMode",value:function(e){this.emit(u.r,e),this.settingsPullup.setCurrentRenderMode(e)}},{key:"handleSetSkeletonsVisible",value:function(e){this.emit(u.s,e)}},{key:"handleSetWireframesVisible",value:function(e){this.emit(u.t,e)}},{key:"handleSetGridVisible",value:function(e){this.emit(u.q,e),this.settingsPullup.setGridVisible(e)}},{key:"handleSetCameraProjection",value:function(e){this.emit(u.p,e)}},{key:"handleAxisRotation",value:function(e){this.emit(u.n,e)}},{key:"showAnimationControls",value:function(){this.animationToggleEl&&this.animationClipButtonEl&&(this.animationToggleEl.classList.remove(c.b),this.animationClipButtonEl.classList.remove(c.b))}},{key:"hideAnimationControls",value:function(){this.animationToggleEl&&this.animationClipButtonEl&&(this.animationToggleEl.classList.add(c.b),this.animationClipButtonEl.classList.add(c.b))}},{key:"handleSelectAnimationClip",value:function(e){this.setAnimationPlaying(!1),this.emit(u.o,e)}},{key:"handleToggleAnimationClips",value:function(){this.settingsPullup.hide(),this.animationClipsPullup.toggle()}},{key:"handleToggleAnimation",value:function(){this.hidePullups(),this.setAnimationPlaying(!this.isAnimationPlaying)}},{key:"setAnimationPlaying",value:function(e){this.isAnimationPlaying=e,this.animationToggleEl.innerHTML=this.isAnimationPlaying?h.o:h.p,this.emit(u.u,this.isAnimationPlaying)}},{key:"addAnimationClip",value:function(e,t,n){this.animationClipsPullup.addClip(e,t,n)}},{key:"selectAnimationClip",value:function(e){this.animationClipsPullup.selectClip(e)}},{key:"handleToggleFullscreen",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleToggleFullscreen",this).call(this),this.hidePullups()}},{key:"setCurrentProjectionMode",value:function(e){this.settingsPullup.onProjectionSelected(e),this.settingsPullup.setCurrentProjectionMode(e)}},{key:"handleReset",value:function(){p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleReset",this).call(this),this.hidePullups(),this.settingsPullup.reset(),this.setAnimationPlaying(!1)}},{key:"destroy",value:function(){this.animationClipsPullup.removeListener(u.o,this.handleSelectAnimationClip),this.animationClipsPullup.destroy(),this.animationClipsPullup=null,this.settingsPullup.removeListener(u.r,this.handleSetRenderMode),this.settingsPullup.removeListener(u.s,this.handleSetSkeletonsVisible),this.settingsPullup.removeListener(u.t,this.handleSetWireframesVisible),this.settingsPullup.removeListener(u.q,this.handleSetGridVisible),this.settingsPullup.removeListener(u.p,this.handleSetCameraProjection),this.settingsPullup.removeListener(u.n,this.handleAxisRotation),this.settingsPullup.destroy(),this.settingsPullup=null,p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(a.a);t.a=f},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(7),s=n.n(a),l=n(27),u=n(67),c=n(6),h=n(1),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p='\n    <div class="box3d-animation-clip" data-type="clip">\n        <div class="box3d-animation-clip-icon"></div>\n        <div class="box3d-animation-clip-value"></div>\n    </div>'.trim(),f=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.pullupEl=Object(u.e)(),e.pullupEl.classList.add(l.f),e.uiRegistry=new u.a,e.uiRegistry.registerItem("settings-pullup-el",e.pullupEl),e.clipEls={},e}return o(t,e),d(t,[{key:"addClip",value:function(e,t,n){var i=Object(h.i)(this.pullupEl,p),r=i.firstChild,o=this.formatDurationStr(n),a=r.querySelector(".box3d-animation-clip-value");a.setAttribute("data-value",e),a.textContent=o+" "+t,a.addEventListener("click",this.handleClipClick.bind(this)),this.pullupEl.appendChild(r),this.clipEls[e]=r}},{key:"destroy",value:function(){this.pullupEl=null,this.uiRegistry.unregisterAll(),this.uiRegistry=null}},{key:"formatDurationStr",value:function(e){var t=Math.floor(e),n=Math.floor(t/3600),i=this.padLeft(n.toString(),2);t-=3600*n;var r=Math.floor(t/60),o=this.padLeft(r.toString(),2);return t-=60*r,i+":"+o+":"+this.padLeft(t.toString(),2)}},{key:"getClipCount",value:function(){return Object.keys(this.clipEls).length}},{key:"getClipId",value:function(e){return Object.keys(this.clipEls)[e]}},{key:"handleClipClick",value:function(e){if(e.target){var t=e.target.getAttribute("data-value");this.selectClip(t)}}},{key:"hide",value:function(){this.pullupEl.classList.add(l.g)}},{key:"padLeft",value:function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e}},{key:"reset",value:function(){this.getClipCount()>0&&this.selectClip(this.getClipId(0))}},{key:"selectClip",value:function(e){var t=this;Object.keys(this.clipEls).forEach(function(n){t.clipEls[n].querySelector(".box3d-animation-clip-icon").innerHTML=n===e?c.f:""}),this.emit(l.o,e)}},{key:"show",value:function(){this.pullupEl.classList.remove(l.g)}},{key:"toggle",value:function(){this.pullupEl.classList.toggle(l.g)}}]),t}(s.a);t.a=f},function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(7),l=n.n(s),u=n(67),c=n(27),h=n(0),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=[{text:c.A,callback:"onRenderModeSelected",args:[c.A]},{text:c.D,callback:"onRenderModeSelected",args:[c.D]},{text:c.B,callback:"onRenderModeSelected",args:[c.B]},{text:c.C,callback:"onRenderModeSelected",args:[c.C]},{text:c.E,callback:"onRenderModeSelected",args:[c.E]}],f=[{text:"Perspective",callback:"onProjectionSelected",args:[c.e]},{text:"Orthographic",callback:"onProjectionSelected",args:[c.d]}],v=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.uiRegistry=new u.a,e.createUi(),e}return a(t,e),d(t,[{key:"convertToValidCallback",value:function(e){var t=e,n=t.callback;if("string"==typeof n&&this[n]){var r;t.callback=(r=this[n]).bind.apply(r,[this].concat(i(t.args)))}}},{key:"createUi",value:function(){var e=this;this.pullupEl=Object(u.e)(),this.uiRegistry.registerItem("settings-pullup-el",this.pullupEl);var t=p.map(function(t){var n=Object.assign({},t);return e.convertToValidCallback(n),n}),n=Object(u.c)("Render Mode","Lit",t);this.renderModeEl=n.querySelector("button"),this.pullupEl.appendChild(n);var i=Object(u.f)();this.showGridEl=Object(u.b)();var r=Object(u.d)("Show grid");i.appendChild(this.showGridEl),i.appendChild(r),this.pullupEl.appendChild(i),this.showGridEl.addEventListener("click",function(){e.onShowGridToggled()});var o=Object(u.f)();this.showWireframesEl=Object(u.b)();var a=Object(u.d)("Show wireframes");o.appendChild(this.showWireframesEl),o.appendChild(a),this.pullupEl.appendChild(o),this.showWireframesEl.addEventListener("click",function(){e.onShowWireframesToggled()});var s=Object(u.f)();this.showSkeletonsEl=Object(u.b)();var l=Object(u.d)("Show skeletons");s.appendChild(this.showSkeletonsEl),s.appendChild(l),this.pullupEl.appendChild(s),this.showSkeletonsEl.addEventListener("click",function(){e.onShowSkeletonsToggled()});var c=f.map(function(t){var n=Object.assign({},t);return e.convertToValidCallback(n),n}),d=Object(u.c)("Camera Projection","Perspective",c);this.projectionEl=d.querySelector("button"),this.pullupEl.appendChild(d),this.renderModeListEl=n.querySelector("."+h.p),this.projectionListEl=d.querySelector("."+h.p),this.uiRegistry.registerItem("settings-render-mode-selector-label",this.renderModeEl,"click",function(){e.projectionListEl.classList.remove(h.Q)}),this.uiRegistry.registerItem("settings-projection-mode-selector-label",this.projectionEl,"click",function(){e.renderModeListEl.classList.remove(h.Q)});var v=Object(u.f)("Rotate Model"),b=this.createAxisWidget();this.pullupEl.appendChild(v),this.pullupEl.appendChild(b)}},{key:"createAxisWidget",value:function(){var e=this,t=Object(u.f)();return t.appendChild(this.createRotationAxis(c.a,function(){return e.onAxisRotationSelected(c.a,-1)},function(){return e.onAxisRotationSelected(c.a,1)})),t.appendChild(this.createRotationAxis(c.b,function(){return e.onAxisRotationSelected(c.b,-1)},function(){return e.onAxisRotationSelected(c.b,1)})),t.appendChild(this.createRotationAxis(c.c,function(){return e.onAxisRotationSelected(c.c,1)},function(){return e.onAxisRotationSelected(c.c,-1)})),t}},{key:"createRotationAxis",value:function(e,t,n){var i=document.createElement("div");i.classList.add("box3d-settings-axis-widget"),i.classList.add("box3d-settings-axis-widget-"+e);var r=document.createElement("span");r.classList.add("box3d-setting-axis-rotate"),r.classList.add("box3d-setting-axis-rotate-left"),this.uiRegistry.registerItem("minus-"+e+"-axis-icon",r,"click",t),i.appendChild(r);var o=document.createElement("span");o.textContent=e.toUpperCase(),i.appendChild(o);var a=document.createElement("span");return a.classList.add("box3d-setting-axis-rotate"),a.classList.add("box3d-setting-axis-rotate-right"),this.uiRegistry.registerItem("plus-"+e+"-axis-icon",a,"click",n),i.appendChild(a),i}},{key:"onRenderModeSelected",value:function(e){this.emit(c.r,e)}},{key:"onAxisRotationSelected",value:function(e,t){var n={};n[e]=t*c.F,this.emit(c.n,n)}},{key:"onProjectionSelected",value:function(e){this.emit(c.p,e)}},{key:"onShowSkeletonsToggled",value:function(){this.emit(c.s,this.showSkeletonsEl.checked)}},{key:"hideSkeletons",value:function(){this.showSkeletonsEl.checked=!1,this.onShowSkeletonsToggled()}},{key:"onShowWireframesToggled",value:function(){this.emit(c.t,this.showWireframesEl.checked)}},{key:"onShowGridToggled",value:function(){this.emit(c.q,this.showGridEl.checked)}},{key:"hideWireframes",value:function(){this.showWireframesEl.checked=!1,this.onShowWireframesToggled()}},{key:"showGrid",value:function(){this.showGridEl.checked=!0,this.onShowGridToggled()}},{key:"reset",value:function(){this.hideWireframes(),this.hideSkeletons(),this.showGrid()}},{key:"setCurrentRenderMode",value:function(e){this.renderModeEl.textContent=e}},{key:"setCurrentProjectionMode",value:function(e){this.projectionEl.textContent=e}},{key:"setGridVisible",value:function(e){this.showGridEl.checked=e}},{key:"show",value:function(){this.pullupEl.classList.remove(c.g)}},{key:"hide",value:function(){this.pullupEl.classList.add(c.g),this.projectionListEl.classList.remove(h.Q),this.renderModeListEl.classList.remove(h.Q)}},{key:"toggle",value:function(){this.pullupEl.classList.toggle(c.g),this.projectionListEl.classList.remove(h.Q),this.renderModeListEl.classList.remove(h.Q)}},{key:"destroy",value:function(){this.uiRegistry.unregisterAll(),this.uiRegistry=null,this.renderModeEl=null,this.showWireframesEl=null,this.showGridEl=null,this.showSkeletonsEl=null,this.projectionEl=null,this.pullupEl=null}}]),t}(l.a);t.a=v},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(45),l=n(351),u=n(352),c=n(27),h=n(0),d=n(1),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},b="third-party/model3d/"+h._0+"/box3d-player.json",m={x:0,y:0,z:0},g={x:0,y:0,z:0,w:1},y=function(e){function t(e,n){var a;r(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return s.renderModeValues=(a={},i(a,c.A,Box3D.RenderMode.Lit),i(a,c.D,Box3D.RenderMode.Unlit),i(a,c.B,Box3D.RenderMode.Normals),i(a,c.C,Box3D.RenderMode.Shape),i(a,c.E,Box3D.RenderMode.UVOverlay),a),s.handleCanvasClick=s.handleCanvasClick.bind(s),s}return a(t,e),f(t,[{key:"destroy",value:function(){this.box3d&&(this.box3d.canvas.removeEventListener("click",this.handleCanvasClick),this.cleanupScene(),v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this))}},{key:"load",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=p({},i),o=r.location;if(o&&(r.sceneEntities=Object(u.a)(o.staticBaseURI),!r.box3dApplication)){var a=Object(d.g)(o);r.box3dApplication=a(b)}return v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this,e,r).then(this.loadBox3dFile.bind(this,i.file.id)).catch(function(){return n.onUnsupportedRepresentation()})}},{key:"handleCanvasClick",value:function(e){this.emit(c.l,e)}},{key:"loadBox3dFile",value:function(e){var t=this;this.box3d.canvas.addEventListener("click",this.handleCanvasClick);var n=this.box3d.getApplication().getComponentByScriptId("render_modes");return n&&n.setAttribute("shapeTexture","MAT_CAP_TEX"),new Promise(function(n,i){var r=t.getScene();r||i(new Error("Provided Box3D application data contains no scene")),t.instance=r.getDescendantByName("Preview Model"),t.instance||i(new Error('Provided Box3D application must include node named "Preview Model"')),t.instance.getComponentByScriptId("remote_instance")?(t.instance.once("remoteInstanceCreated",function(){t.setupScene(),n()}),t.instance.trigger("createRemoteInstance",e)):t.instance.when("load",function(){t.setupScene(),n()})})}},{key:"setupScene",value:function(){var e=this,t=this.getScene();if(!t)return void this.onSceneLoad();this.instance.addComponent("axis_rotation",{},"axis_rotation_"+this.instance.id),this.instance.addComponent("animation",{},"animation_"+this.instance.id);var n=this.box3d.getAssetsByClass(Box3D.AnimationAsset);n.length>0&&this.setAnimationAsset(n[0]),this.addHelpersToScene(),t.when("load",function(){return e.onSceneLoad()})}},{key:"reset",value:function(){this.resetModel(),v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"reset",this).call(this)}},{key:"resetModel",value:function(){if(this.instance){this.instance.getChildren().forEach(function(e){e.setPosition(m.x,m.y,m.z),e.setScale(1,1,1),e.setQuaternion(g.x,g.y,g.z,g.w),e.unsetProperty("bounds")}),this.instance.unsetProperty("bounds");var e=this.instance.getComponentByScriptId("scale_to_size");e&&e.enable();var t=this.instance.getComponentByScriptId("align_to_position");t&&t.enable(),this.vrEnabled&&this.disableAutoTransform()}}},{key:"resetView",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resetView",this).call(this);var e=this.getCamera();if(e){var n=e.getComponentByScriptId("orbit_camera");if(n&&this.instance.runtimeData){var i=this.instance.getBounds();this.instance.runtimeData.updateMatrixWorld(),i.min.applyMatrix4(this.instance.runtimeData.matrixWorld),i.max.applyMatrix4(this.instance.runtimeData.matrixWorld);var r=new THREE.Vector3;r.subVectors(i.max,i.min);var o=this.instance.getCenter();o.applyMatrix4(this.instance.runtimeData.matrixWorld),n.reset(),n.setPivotPosition(o);var a=1.5*Math.max(Math.max(r.x,r.y),r.z);n.setOrbitDistance(a)}}}},{key:"onSceneLoad",value:function(){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onSceneLoad",this).call(this),this.initVrGamepadControls(),this.resetSkeletons(),this.box3d.getEntitiesByType("video").forEach(function(e){return e.play()})}},{key:"setAnimationAsset",value:function(e){if(this.instance){var t=this.instance.getComponentByScriptId("animation");t.setAsset(e),t.setLoop(!0)}}},{key:"setAnimationClip",value:function(e){if(this.instance){this.instance.getComponentByScriptId("animation").setClipId(e)}}},{key:"toggleAnimation",value:function(e){var t=this;if(this.instance){var n=this.instance.getComponentByScriptId("animation"),i=n?n.asset:void 0;i&&i.when("load",function(){t.instance.when("load",function(){e?n.play():n.pause()})})}}},{key:"stopAnimation",value:function(){if(this.instance){var e=this.instance.getComponentByScriptId("animation");e&&e.stop()}}},{key:"onUnsupportedRepresentation",value:function(){this.emit("error",new Error("We're sorry, we can't preview this file type in your web browser. To view this content please download and open it on your device."))}},{key:"addHelpersToScene",value:function(){var e=this.getScene()?this.getScene().runtimeData:void 0;e&&(this.grid=new THREE.GridHelper(c.z,c.y,c.x,c.w),this.grid.material.transparent=!0,this.grid.material.blending=THREE.MultiplyBlending,e.add(this.grid),this.grid.visible=!0,this.axisDisplay=new THREE.AxisHelper(.5),e.add(this.axisDisplay),this.axisDisplay.visible=!1)}},{key:"cleanupHelpers",value:function(){var e=this.getScene()?this.getScene().runtimeData:void 0;e&&(this.grid&&(e.remove(this.grid),this.grid.material.dispose(),this.grid.geometry.dispose()),this.axisDisplay&&(e.remove(this.axisDisplay),this.axisDisplay.material.dispose(),this.axisDisplay.geometry.dispose()))}},{key:"toggleHelpers",value:function(e){var t=void 0!==e?e:!this.axisDisplay.visible;this.axisDisplay.visible=t,this.box3d.needsRender=!0}},{key:"cleanupScene",value:function(){this.cleanupHelpers(),this.resetSkeletons()}},{key:"resetSkeletons",value:function(){this.box3d&&Box3D.globalEvents.trigger(c.m)}},{key:"setRenderMode",value:function(e){this.box3d&&Box3D.globalEvents.trigger(c.r,this.renderModeValues[e])}},{key:"setCameraProjection",value:function(e){var t=this.getCamera();if(t){switch(e){case c.d:t.setProperty("cameraType","orthographic");break;case c.e:t.setProperty("cameraType","perspective")}this.resetView()}}},{key:"rotateOnAxis",value:function(e){this.instance&&this.box3d&&this.instance.trigger("rotate_on_axis",e,!0)}},{key:"setAxisRotation",value:function(e,t,n){this.instance&&this.instance.trigger("set_axes_orientation",e,t,n)}},{key:"setSkeletonsVisible",value:function(e){this.box3d&&Box3D.globalEvents.trigger(c.s,e)}},{key:"setWireframesVisible",value:function(e){this.box3d&&Box3D.globalEvents.trigger(c.t,e)}},{key:"setGridVisible",value:function(e){this.box3d&&(this.grid.visible=e)}},{key:"enableVr",value:function(){if(!this.vrEnabled){v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enableVr",this).call(this);var e=this.box3d.getVrDisplay();this.vrDeviceHasPosition=e?e.capabilities.hasPosition:void 0,this.vrDeviceHasPosition?this.grid.visible=!0:this.box3d.on("update",this.updateNonPositionalVrControls,this),this.disableAutoTransform()}}},{key:"onDisableVr",value:function(){this.vrDeviceHasPosition||this.box3d.off("update",this.updateNonPositionalVrControls,this),v(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onDisableVr",this).call(this)}},{key:"disableAutoTransform",value:function(){if(this.instance){var e=this.instance.getComponentByScriptId("scale_to_size");if(e){var t=this.instance.getScale();e.disable(),this.instance.setScale(t.x,t.y,t.z)}var n=this.instance.getComponentByScriptId("align_to_position");if(n){var i=this.instance.getPosition();n.disable(),this.instance.setPosition(i.x,i.y,i.z)}}}},{key:"updateNonPositionalVrControls",value:function(){var e=this.getCamera(),t=e.getComponentByScriptId("orbit_camera");if(t){var n=e.runtimeData;n.position.set(0,0,t.getOrbitDistance()),n.position.applyQuaternion(n.quaternion),n.position.add(t.pivotPoint.position)}}},{key:"initVrGamepadControls",value:function(){this.vrControls=new l.a(this.vrGamepads,this.box3d)}}]),t}(s.a);t.a=y},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o={None:0,Translation:1,Scale:2},a={grabObject:1,grabWorld:2},s=function(){function e(t,n){var r=this;i(this,e),this.initialScaleDistance=0,this.initialScale=new THREE.Vector3,this.vrWorkVector1=new THREE.Vector3,this.vrWorkVector2=new THREE.Vector3,this.vrWorkMatrix=new THREE.Matrix4,this.vrGamepads=t,this.box3d=n,this.onScaleUpdate=this.onScaleUpdate.bind(this),this.onGamepadButtonDown=this.onGamepadButtonDown.bind(this),this.onGamepadButtonUp=this.onGamepadButtonUp.bind(this),this.vrGamepads.forEach(function(e){e.listenTo(e,"gamepadButtonDown",r.onGamepadButtonDown),e.listenTo(e,"gamepadButtonUp",r.onGamepadButtonUp)}),this.controllerState={initiatingController:null,selectedObject:null,previousParent:null,controlType:o.None}}return r(e,[{key:"destroy",value:function(){this.vrGamepads.forEach(function(e){return e.stopListening()})}},{key:"changeParent",value:function(e,t){var n=t.runtimeData,i=e.runtimeData;n&&i&&(i.matrix.premultiply(i.parent.matrixWorld),this.vrWorkMatrix.getInverse(n.matrixWorld),i.applyMatrix(this.vrWorkMatrix),e.setPosition(i.position.x,i.position.y,i.position.z),e.setQuaternion(i.quaternion.x,i.quaternion.y,i.quaternion.z,i.quaternion.w),e.setScale(i.scale.x,i.scale.y,i.scale.z),t.addChild(e))}},{key:"startTranslation",value:function(){this.changeParent(this.controllerState.selectedObject,this.controllerState.initiatingController)}},{key:"endTranslation",value:function(){this.changeParent(this.controllerState.selectedObject,this.controllerState.previousParent)}},{key:"onScaleUpdate",value:function(){this.vrGamepads[0].getPosition(this.vrWorkVector1),this.vrGamepads[1].getPosition(this.vrWorkVector2);var e=this.vrWorkVector1.sub(this.vrWorkVector2).length(),t=e/this.initialScaleDistance;this.vrWorkVector1.copy(this.initialScale).multiplyScalar(t),this.controllerState.selectedObject.setScale(this.vrWorkVector1.x,this.vrWorkVector1.y,this.vrWorkVector1.z)}},{key:"startScale",value:function(){this.vrGamepads[0].getPosition(this.vrWorkVector1),this.vrGamepads[1].getPosition(this.vrWorkVector2),this.controllerState.selectedObject.getScale(this.initialScale),this.initialScaleDistance=this.vrWorkVector1.sub(this.vrWorkVector2).length(),this.box3d.listenTo(this.box3d,"update",this.onScaleUpdate)}},{key:"endScale",value:function(){this.box3d.stopListening(this.box3d,"update",this.onScaleUpdate)}},{key:"onGamepadButtonUp",value:function(e,t){if(t===a.grabObject)if(this.controllerState.controlType===o.Translation)this.endTranslation(),this.controllerState.controlType=o.None,this.controllerState.selectedObject=null;else if(this.controllerState.controlType===o.Scale){this.controllerState.controlType=o.Translation,this.endScale();var n=this.vrGamepads.find(function(t){var n=t.getComponentByScriptId("motion_gamepad_device");return n&&n.getGamepad()!==e});this.controllerState.initiatingController=n,this.startTranslation()}}},{key:"onGamepadButtonDown",value:function(e,t){if(t===a.grabObject){if(this.controllerState.controlType===o.Translation)return this.controllerState.controlType=o.Scale,this.endTranslation(),void this.startScale();var n=this.vrGamepads.find(function(t){var n=t.getComponentByScriptId("motion_gamepad_device");return n&&n.getGamepad()===e}),i=n.getComponentByScriptId("intersection_checker"),r=i.checkIntersection(),s=void 0,l=Object.keys(r);if(l.length&&(s=r[l[0]].getInstanceTop()),s){if(this.vrGamepads.find(function(e){return s===e.getChild()}))return;this.controllerState.controlType=o.Translation,this.controllerState.selectedObject=s,this.controllerState.previousParent=s.getParentObject(),this.controllerState.initiatingController=n,this.startTranslation()}}}}]),e}();t.a=s},function(e,t,n){"use strict";function i(e){return[{id:"MAT_CAP_TEX",type:"texture2D",properties:{name:"Mat Cap Texture",imageId:"MAT_CAP_IMG",wrapModeU:"clampToEdge",wrapModeV:"clampToEdge",flipY:!0}},{id:"MAT_CAP_IMG",type:"image",properties:{name:"Mat Cap Image",width:256,height:256,stream:!1},representations:[{src:e+"third-party/model3d/"+r._0+"/matcap.png",isExternal:!0,contentType:"image/png",contentEncoding:"identity",width:256,height:256,compression:"zip"}]}]}var r=n(0);t.a=i},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(13),s=n(355),l=n(0),u=[{NAME:"IFrame",CONSTRUCTOR:s.a,REP:l._1,EXT:["boxnote","boxdicom"]}],c=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=u,e}return o(t,e),t}(a.a);t.a=new c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(14),s=n(2),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},c=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"setup",value:function(){this.isSetup||(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.iframeEl=this.createViewer(document.createElement("iframe")),this.iframeEl.setAttribute("width","100%"),this.iframeEl.setAttribute("height","100%"),this.iframeEl.setAttribute("frameborder",0),this.loadTimeout=12e4)}},{key:"load",value:function(){var e="",n=this.options,i=n.file,r=n.sharedLink,o=void 0===r?"":r,a=n.appHost,l=i.extension;if("boxnote"===l){e=a+"/notes_embedded/"+i.id+"?isReadonly=1&is_preview=1";var c=o.indexOf("/s/");if(-1!==c){e=e+"&s="+o.substr(c+3)}}else"boxdicom"===l&&(e=a+"/dicom_viewer/"+i.id);this.startLoadTimer(),this.iframeEl.src=e,this.loaded=!0,this.emit(s.l.load),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this)}}]),t}(a.a);t.a=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(13),s=n(357),l=n(15),u=n(0),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},d=[{NAME:"Office",CONSTRUCTOR:s.a,REP:u._1,EXT:["xlsx"]}],p=function(e){function t(){i(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.viewers=d,e}return o(t,e),c(t,[{key:"determineViewer",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=e.shared_link&&e.shared_link.is_password_enabled;return(!Object(l.e)(e,u._6)||e.size>5242880||i)&&n.push("Office"),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"determineViewer",this).call(this,e,n)}}]),t}(a.a);t.a=new p},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(14),s=n(5),l=n(112),u=n(68),c=n(0),h=n(15),d=n(6),p=n(9),f=n(2),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},m=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.print=n.print.bind(n),n}return o(t,e),v(t,[{key:"setup",value:function(){this.isSetup||(b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.platformSetup=!1,this.setupIframe(),this.initPrint(),this.setupPDFUrl(),this.loadTimeout=12e4)}},{key:"destroy",value:function(){this.printBlob=null,this.printPopup&&this.printPopup.destroy(),this.printURL&&URL.revokeObjectURL(this.printURL),b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"load",value:function(){b(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this),this.startLoadTimer(),this.loaded=!0,this.emit(f.l.load)}},{key:"print",value:function(){var e=this;if(!this.printBlob)return this.fetchPrintBlob(this.pdfUrl).then(this.print),void(this.printDialogTimeout=setTimeout(function(){e.printPopup.show("Preparing to print...","Print",function(){e.printPopup.hide(),e.browserPrint()}),e.printPopup.disableButton(),e.printDialogTimeout=null},500));this.printDialogTimeout||!this.printPopup.isVisible()?(clearTimeout(this.printDialogTimeout),this.browserPrint()):(this.printPopup.enableButton(),this.printPopup.messageEl.textContent="Ready to print.",this.printPopup.loadingIndicator.classList.add(c.K),this.printPopup.printCheckmark.classList.remove(c.K))}},{key:"initPrint",value:function(){this.printPopup=new u.a(this.rootEl);var e=document.createElement("div");e.className="bp-print-check "+c.K,e.innerHTML=d.r.trim();var t=document.createElement("div");t.classList.add("bp-crawler"),t.innerHTML="\n            <div></div>\n            <div></div>\n            <div></div>".trim(),this.printPopup.addContent(t,!0),this.printPopup.addContent(e,!0),this.printPopup.loadingIndicator=t,this.printPopup.printCheckmark=e}},{key:"setupPDFUrl",value:function(){var e=this.options.file,t=Object(h.h)(e,"pdf"),n=t.content.url_template;this.pdfUrl=this.createContentUrlWithAuthParams(n)}},{key:"setupIframe",value:function(){var e=this.options,t=e.appHost,n=e.apiHost,i=e.file,r=e.sharedLink,o=e.location.locale,a=this.createIframeElement();if(this.createViewer(a),this.platformSetup){this.createFormElement(n,i.id,r,o).submit(),a.contentWindow.postMessage("Host_PostmessageReady",l.a.getOrigin())}else a.src=this.setupRunmodeURL(t,i.id,r)}},{key:"setupRunmodeURL",value:function(e,t,n){var i="/integrations/officeonline/openExcelOnlinePreviewer",r=document.createElement("a");if(r.href=n,n){i=""+(r.protocol+"//"+r.hostname)+i;var o=n.split("/s/")[1];if(o)i=i+"?s="+o+"&fileId="+t;else{var a=r.hostname.split(".")[0];i=i+"?v="+r.href.split("/v/")[1]+"&vanity_subdomain="+a+"&fileId="+t}}else i=""+e+i+"?fileId="+t;return i}},{key:"setupWOPISrc",value:function(e,t,n){var i=e+"/wopi/files/";if(n){var r=n.split("/s/")[1];r&&(i=i+"s_"+r+"_f_")}return""+i+t}},{key:"createIframeElement",value:function(){var e=document.createElement("iframe");return e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("frameborder",0),e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms allow-popups"),this.platformSetup&&(e.setAttribute("allowfullscreen","true"),e.name="office-online-iframe",e.id="office-online-iframe"),e}},{key:"createFormElement",value:function(e,t,n,i){var r=this.setupWOPISrc(e,t,n),o={origin:l.a.getOrigin()},a=this.containerEl.appendChild(document.createElement("form"));a.setAttribute("action","https://excel.officeapps.live.com/x/_layouts/xlembed.aspx?ui="+i+"&rs="+i+"&WOPISrc="+r+"&sc="+JSON.stringify(o)),a.setAttribute("method","POST"),a.setAttribute("target","office-online-iframe");var s=document.createElement("input");s.setAttribute("name","access_token"),s.setAttribute("value",""+this.options.token),s.setAttribute("type","hidden");var u=document.createElement("input");return u.setAttribute("name","access_token_TTL"),u.setAttribute("value",0),u.setAttribute("type","hidden"),a.appendChild(s),a.appendChild(u),a}},{key:"fetchPrintBlob",value:function(e){var t=this;return p.a.get(e,{type:"blob"}).then(function(e){t.printBlob=e})}},{key:"browserPrint",value:function(){if("function"==typeof window.navigator.msSaveOrOpenBlob){window.navigator.msSaveOrOpenBlob(this.printBlob,"print.pdf")?this.emit("printsuccess"):this.emit("printerror")}else{this.printURL||(this.printURL=URL.createObjectURL(this.printBlob));var e=window.open(this.printURL);if(e&&"function"==typeof e.print){var t=s.a.getName();"Chrome"===t?e.addEventListener("load",function(){e.print()}):"Safari"===t&&setTimeout(function(){e.print()},1e3)}!e||e.closed||void 0===e.closed?this.emit("printerror"):this.emit("printsuccess")}}}]),t}(a.a);t.a=m},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(14),s=n(8),l=n(15),u=n(6),c=n(2),h=n(1),d=n(359),p=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),f=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},v=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.download=n.download.bind(n),n}return o(t,e),p(t,[{key:"setup",value:function(){this.isSetup||(f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this),this.infoEl=this.createViewer(document.createElement("div")),this.infoEl.className="bp-error",this.iconEl=this.infoEl.appendChild(document.createElement("div")),this.iconEl.className="bp-icon bp-icon-file",this.messageEl=this.infoEl.appendChild(document.createElement("p")),this.messageEl.className="bp-error-text")}},{key:"finishLoadingSetup",value:function(){}},{key:"destroy",value:function(){this.downloadBtnEl&&this.downloadBtnEl.removeEventListener("click",this.download),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"load",value:function(e){var t=e instanceof s.a?e:new s.a(c.c.GENERIC,"We're sorry, the preview didn't load.",{},e.message),n=t.displayMessage,i=t.details,r=t.message,o=this.options.file;if(this.icon=Object(u.y)("FILE_DEFAULT"),o)switch(o.extension){case"zip":case"tgz":case"flv":this.icon=Object(u.x)(o.extension)}this.iconEl.innerHTML=this.icon,this.messageEl.textContent=n,i&&i.linkText&&i.linkUrl?this.addLinkButton(i.linkText,i.linkUrl):Object(l.b)(o,this.options)&&this.addDownloadButton(),this.loaded=!0,this.emit(c.l.load,{error:Object(h.G)(r)})}},{key:"addLinkButton",value:function(e,t){var n=this.infoEl.appendChild(document.createElement("a"));n.className="bp-btn bp-btn-primary",n.target="_blank",n.textContent=e,n.href=t}},{key:"addDownloadButton",value:function(){this.downloadBtnEl=this.infoEl.appendChild(document.createElement("button")),this.downloadBtnEl.className="bp-btn bp-btn-primary",this.downloadBtnEl.textContent="Download",this.downloadBtnEl.addEventListener("click",this.download)}},{key:"download",value:function(){this.emit(c.l.download)}}]),t}(a.a);t.a=v},function(e,t){},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(361),o=n(362),a=n.n(o),s=n(116),l=n(1),u=n(0),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(){function e(){i(this,e)}return c(e,[{key:"cleanup",value:function(){this.progressBar&&this.progressBar.destroy(),this.contentContainer&&this.contentContainer.removeEventListener("mousemove",this.mousemoveHandler),this.container&&(this.container.innerHTML=""),document.removeEventListener("keydown",this.keydownHandler)}},{key:"setup",value:function(e,t,n,i,o){return this.container=e.container,this.leftHandler=n,this.rightHandler=i,this.mousemoveHandler=o,this.keydownHandler=t,"string"==typeof this.container?this.container=document.querySelector(this.container):this.container||(this.container=document.body),this.cleanup(),Object(l.s)(this.container,a.a),this.container=this.container.querySelector(u._17),this.contentContainer=this.container.querySelector(u._11),"none"!==e.header&&this.setupHeader(e.header,e.logoUrl),this.progressBar=new r.a(this.container),this.setupLoading(),document.addEventListener("keydown",this.keydownHandler),this.container}},{key:"isSetup",value:function(){return this.container&&""!==this.container.innerHTML}},{key:"showNavigation",value:function(e,t){if(this.container){var n=this.container.querySelector(u._26),i=this.container.querySelector(u._27);if(n&&i&&(n.title="Previous file",i.title="Next file",n.classList.add(u.K),i.classList.add(u.K),this.contentContainer.classList.remove(u.h),n.removeEventListener("click",this.leftHandler),i.removeEventListener("click",this.rightHandler),this.contentContainer.removeEventListener("mousemove",this.mousemoveHandler),!(t.length<2))){this.contentContainer.classList.add(u.h),this.contentContainer.addEventListener("mousemove",this.mousemoveHandler);var r=t.indexOf(e);r>0&&(n.addEventListener("click",this.leftHandler),n.classList.remove(u.K)),r<t.length-1&&(i.addEventListener("click",this.rightHandler),i.classList.remove(u.K))}}}},{key:"showPrintButton",value:function(e){var t=this.container.querySelector(u._16);t&&(t.title="Print",t.classList.remove(u.K),t.addEventListener("click",e))}},{key:"showDownloadButton",value:function(e){var t=this.container.querySelector(u._14);t&&(t.title="Download",t.classList.remove(u.K),t.addEventListener("click",e))}},{key:"showLoadingDownloadButton",value:function(e){var t=this.container.querySelector(u._15);t&&(t.title="Download",t.classList.remove(u.L),t.addEventListener("click",e))}},{key:"showLoadingIndicator",value:function(){this.contentContainer&&this.contentContainer.classList.remove(u.T)}},{key:"hideLoadingIndicator",value:function(){if(this.contentContainer){this.contentContainer.classList.add(u.T);var e=this.contentContainer.querySelector(u._19);e&&e.classList.remove(u.K)}}},{key:"startProgressBar",value:function(){this.progressBar.start()}},{key:"finishProgressBar",value:function(){this.progressBar.finish()}},{key:"setupNotification",value:function(){this.notification=new s.a(this.contentContainer)}},{key:"showNotification",value:function(e,t,n){this.notification&&this.notification.show(e,t,n)}},{key:"hideNotification",value:function(){this.notification&&this.notification.hide()}},{key:"replaceHeader",value:function(e){var t=this.container.querySelector(e);if(t){var n=this.container.querySelectorAll("."+u.i);[].forEach.call(n,function(e){e.classList.add(u.K)}),t.classList.remove(u.K)}}},{key:"setupHeader",value:function(e,t){var n=this.container.querySelector(u._20);n.classList.remove(u.K);var i=n.firstElementChild;if(i.className=u.i+" "+u.d,this.contentContainer.classList.add(u.g),"dark"===e&&this.container.classList.add(u.y),t){i.querySelector(u._25).classList.add(u.K);var r=i.querySelector(u._24);r.src=t,r.classList.remove(u.K)}}},{key:"setupLoading",value:function(){var e=this.container.querySelector(u._23);if(e){e.querySelector(u._22).textContent="Loading Preview...";e.querySelector(u._15).textContent="Download File"}}}]),e}();t.a=h},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(0),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){i(this,e),this.mountEl=t,this.containerEl=document.createElement("div"),this.containerEl.classList.add(r.x),this.progressBarEl=document.createElement("div"),this.progressBarEl.classList.add(r.w),this.containerEl.appendChild(this.progressBarEl),this.mountEl.appendChild(this.containerEl)}return o(e,[{key:"destroy",value:function(){this.progressBarEl&&(clearInterval(this.progressInterval),this.mountEl&&this.mountEl.removeChild(this.containerEl),this.containerEl=null,this.progressBarEl=null)}},{key:"start",value:function(){var e=this;this.showProgress(),this.progress=0,this.progressInterval=setInterval(function(){if(e.progress>=95)return void clearInterval(e.progressInterval);e.progress>=80?e.progress+=Math.random():e.progress+=5*Math.random(),e.updateProgress(e.progress)},150)}},{key:"finish",value:function(){this.hideProgress(),clearInterval(this.progressInterval),this.updateProgress(100)}},{key:"updateProgress",value:function(e){this.progressBarEl&&(this.progressBarEl.style.width=e+"%")}},{key:"showProgress",value:function(){this.progressBarEl&&this.progressBarEl.classList.add(r.Q)}},{key:"hideProgress",value:function(){this.progressBarEl&&this.progressBarEl.classList.remove(r.Q)}}]),e}();t.a=a},function(e,t){e.exports='<div class="bp-container">\n    <div class="bp-header-container bp-is-hidden">\n        <div>\n            <span class="bp-default-logo">\n                <svg height="25" width="45" viewBox="0 0 98 52" focusable="false">\n                    <path d="M95.34 44.7c1.1 1.53.8 3.66-.75 4.8-1.56 1.13-3.74.84-4.93-.64l-7.8-10.23-7.82 10.23c-1.2 1.48-3.36 1.77-4.9.63-1.55-1.15-1.87-3.28-.75-4.8l9.06-11.86L68.4 21c-1.1-1.54-.8-3.67.75-4.8 1.55-1.14 3.72-.85 4.9.63l7.82 10.23 7.8-10.23c1.2-1.48 3.38-1.77 4.92-.63 1.52 1.13 1.84 3.26.73 4.8L86.3 32.84l9.04 11.85zM53.9 43.22c-5.86 0-10.6-4.65-10.6-10.4 0-5.72 4.74-10.37 10.6-10.37 5.85 0 10.6 4.65 10.6 10.38 0 5.74-4.75 10.4-10.6 10.4zm-31.23 0c-5.85 0-10.6-4.65-10.6-10.4 0-5.72 4.75-10.37 10.6-10.37 5.86 0 10.6 4.65 10.6 10.38 0 5.74-4.74 10.4-10.6 10.4zm31.22-27.7c-6.78 0-12.66 3.73-15.63 9.2-2.97-5.47-8.84-9.2-15.6-9.2-4 0-7.66 1.3-10.6 3.46V4.38C12.02 2.52 10.45 1 8.53 1 6.6 1 5.03 2.5 5 4.4v28.7c.16 9.43 8 17.03 17.67 17.03 6.77 0 12.64-3.73 15.6-9.2 2.98 5.47 8.86 9.2 15.62 9.2 9.74 0 17.66-7.75 17.66-17.32 0-9.55-7.92-17.3-17.68-17.3z"></path>\n                </svg>\n            </span>\n            <img class="bp-is-hidden bp-custom-logo"></img>\n            <div class="bp-header-btns">\n                <button class="bp-btn-plain bp-btn-annotate-draw bp-is-hidden" data-testid="draw-annotation" type="button">\n                    <svg class="bp-btn-annotate-draw-enter" width="22" height="21" viewBox="0 0 14.88 14.88" focusable="false">\n                        <path d="M11.65,6.64,5.11,13.17.06,14.94,1.83,9.89,8.37,3.35Zm1.41-1.41L9.78,1.94,11.37.35a1,1,0,0,1,1.41,0l1.87,1.87a1,1,0,0,1,0,1.41Z" transform="translate(-0.06 -0.06)" fill-rule="evenodd"/>\n                    </svg>\n                </button>\n                <button class="bp-btn-plain bp-btn-annotate-point bp-is-hidden" data-testid="point-annotation" type="button">\n                    <svg width="22" height="21" viewBox="0 0 22 21" focusable="false">\n                        <path d="M11 21l-4-4H1.99C.89 17 0 16.11 0 15V2C0 .895.89 0 1.99 0h18.02C21.11 0 22 .89 22 2v13c0 1.105-.89 2-1.99 2H15l-4 4zm-7-9.5c0-.276.228-.5.51-.5h8.98c.282 0 .51.232.51.5 0 .276-.228.5-.51.5H4.51c-.282 0-.51-.232-.51-.5zm0-3c0-.276.23-.5.5-.5h11c.276 0 .5.232.5.5 0 .276-.23.5-.5.5h-11c-.276 0-.5-.232-.5-.5zm0-3c0-.276.22-.5.498-.5h13.004c.275 0 .498.232.498.5 0 .276-.22.5-.498.5H4.498C4.223 6 4 5.768 4 5.5z" fill-rule="evenodd"/>\n                    </svg>\n                </button>\n                <button class="bp-btn-plain bp-btn-print bp-is-hidden" data-testid="print-preview" type="button">\n                    <svg height="24" viewBox="0 0 24 24" width="24" focusable="false">\n                        <path d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"/>\n                        <path d="M0 0h24v24H0z" fill="none"/>\n                    </svg>\n                </button>\n                <button class="bp-btn-plain bp-btn-download bp-is-hidden" data-testid="download-preview" type="button">\n                    <svg height="24" viewBox="0 0 24 24" width="24" focusable="false">\n                        <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>\n                        <path d="M0 0h24v24H0z" fill="none"/>\n                    </svg>\n                </button>\n            </div>\n        </div>\n    </div>\n    <div class="bp" data-testid="bp" tabindex="-1">\n        <div class="bp-content" data-testid="bp-content" tabindex="-1">\n            <div class="bp-loading-wrapper">\n                <div class="bp-loading">\n                    <div class="bp-icon bp-icon-file"></div>\n                    <div class="bp-crawler-wrapper">\n                        <div class="bp-crawler">\n                            <div></div>\n                            <div></div>\n                            <div></div>\n                        </div>\n                    </div>\n                    <span class="bp-loading-text"></span>\n                </div>\n                <div class="bp-loading-btn-container">\n                    <button class="bp-btn-plain bp-btn-loading-download bp-is-invisible" type="button"></button>\n                </div>\n            </div>\n            <button class="bp-btn-plain bp-navigate bp-navigate-left bp-is-hidden" type="button">\n                <svg viewBox="0 0 48 48" focusable="false">\n                    <path fill="#494949" stroke="#DCDCDC" stroke-miterlimit="10" d="M30.8,33.2L21.7,24l9.2-9.2L28,12L16,24l12,12L30.8,33.2z"/>\n                    <path display="none" fill="none" d="M0,0h48v48H0V0z"/>\n                </svg>\n            </button>\n            <button class="bp-btn-plain bp-navigate bp-navigate-right bp-is-hidden" type="button">\n                <svg viewBox="0 0 48 48" focusable="false">\n                    <path fill="#494949" stroke="#DCDCDC" stroke-miterlimit="10" d="M17.2,14.8l9.2,9.2l-9.2,9.2L20,36l12-12L20,12L17.2,14.8z"/>\n                    <path display="none" fill="none" d="M48,48H0L0,0l48,0V48z"/>\n                </svg>\n            </button>\n        </div>\n    </div>\n</div>\n'},function(e,t,n){"use strict";function i(e){return"file_"+e}function r(e,t){var n={};return e.forEach(function(e){var r=i(e);if(t&&"string"!=typeof t)if("object"===(void 0===t?"undefined":a(t))&&t[r])n[e]=t[r];else{if("object"!==(void 0===t?"undefined":a(t))||!t[e])throw s;n[e]=t[e]}else n[e]=t}),n}function o(e,t){if(!e)return Promise.reject(s);var n=void 0;return n=Array.isArray(e)?e:[e],t&&"string"!=typeof t?new Promise(function(e,o){var a=n.map(function(e){return i(e)});t(a).then(function(t){try{e(r(n,t))}catch(e){o(e)}})}):Promise.resolve(r(n,t))}t.a=o;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=new Error("Bad Auth Token!")},function(e,t,n){"use strict";function i(){return(new Date).toISOString()}function r(){return{client_version:a.a,browser_name:o.a.getName(),logger_session_id:s}}t.b=i,t.a=r;var o=n(5),a=n(1),s=function(){function e(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e)}()},function(e,t){}]);